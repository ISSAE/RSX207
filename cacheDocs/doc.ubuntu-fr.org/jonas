<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript"/>
    <meta http-equiv="Content-Style-Type" content="text/css"/>
    <meta http-equiv="Content-Language" content="fr"/>
    <title>jonas - Documentation Ubuntu Francophone</title>
    <meta name="Description" content="Documentation francophone pour la distribution Ubuntu" lang="fr" />
    <meta name="language" content="fr-FR" />

    <!--[if IE 8]>
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <![endif]-->
        <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2009-01-01T14:34:32+0100"/>
<meta name="keywords" content="brouillon,serveur"/>
<link rel="search" type="application/opensearchdescription+xml" href="lib/exe/opensearch.php" title="Documentation Ubuntu Francophone"/>
<link rel="start" href="index.html"/>
<link rel="contents" href="http://doc.ubuntu-fr.org/jonas?do=index" title="Plan du site"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Namespace actuel" href="feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="http://doc.ubuntu-fr.org/jonas?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="http://doc.ubuntu-fr.org/_export/xhtml/jonas"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="http://doc.ubuntu-fr.org/_export/raw/jonas"/>
<link rel="canonical" href="jonas"/>
<link rel="stylesheet" type="text/css" href="lib/exe/css.php?t=ubuntu-2010&amp;tseed=4af22dedc19f28c99fa67afabbb173df"/>
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"id":"jonas","namespace":""};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="lib/exe/js.php?tseed=4af22dedc19f28c99fa67afabbb173df"></script>
    <link rel="shortcut icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/icone.png" type="image/x-icon" />
    <link rel="apple-touch-icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/touch-ico.png" />

    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc.css" />
    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-ubuntu.css" />
    <link rel="stylesheet" media="print" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-print.css" />

    <script type="text/javascript">
      var menu_hidden;
      var static_url = "UFR_STATIC";
    </script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/menu.js" type="text/javascript"></script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/common.js" type="text/javascript"></script>
  </head>
  <body>

    <div id="accessibar">
      <a href="jonas#main" tabindex="1">Contenu</a> | <a href="jonas#qsearch__in" tabindex="2">Rechercher</a> | <a href="jonas#navigation" tabindex="3">Menus</a>
    </div>

    <div id="page">

      <div id="header">

        <div id="logo">
          <h1>Ubuntu-fr</h1>
          <a href="index.html" title="Accueil de la documentation">Communauté francophone d'utilisateurs d'Ubuntu</a>
        </div>

        <form action="http://ubuntu-fr.org/recherche" accept-charset="utf-8" id="search" onsubmit="if (document.getElementById('qsearch__in').value == 'Recherche rapide....') {document.getElementById('qsearch__in').value = '';}">
          <fieldset>
            <label for="qsearch__in">Recherche : </label><input type="text" value="Recherche rapide...." id="qsearch__in" accesskey="f" name="sk_q" alt="[F]" size="34" tabindex="4" />
            <label for="tsearch_field">Chercher dans : </label><select name="sk_engine" tabindex="5" id="tsearch_field" title="Chercher dans">
              <option value="all">Site</option>
              <option selected="selected" value="doc">Documentation</option>
              <option value="forum">Forum</option>
              <option value="planet">Planet</option>
            </select>
            <input type="submit" value="ok" class="button" alt="Lancer la recherche" tabindex="5" />
          </fieldset>
        </form>
        <!--[if lte IE 7]><div class="clear"></div><![endif]-->

        <form action="jonas" accept-charset="utf-8" id="login_top" method="post">
          <fieldset>
            <label for="u_field">Identifiant : </label><input type="text" value="Identifiant" name="u" id="u_field" size="9" /><label for="p_field">Mot de passe : </label><input type="password" value="Mot de passe" name="p" id="p_field" size="9" alt="Mot de passe" /><input type="submit" value="connexion" id="connect" /> / <a href="http://forum.ubuntu-fr.org/register.php">inscription</a>
          </fieldset>
        </form>
 

      </div>

      <div id="navbar">
          <h2 id="pagetitle"><a href="jonas" >jonas</a></h2>
      </div>

      
      <div id="main" class="dokuwiki">

        <div id="hidemenu" title="Masquer le menu"></div>

        <div id="pagerror"></div>
                <div class="notetag">Cette page est en cours de rédaction.<br />
<a href="wiki/participer_wiki">Apportez votre aide…</a>
</div>
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table des matières</h3>
<div>

<ul class="toc">
<li class="level2"><div class="li"><a href="jonas#telechargement_de_l_archive">Téléchargement de l&#039;archive</a></div></li>
<li class="level2"><div class="li"><a href="jonas#installation_du_jdk_de_sun">Installation du JDK de SUN</a></div></li>
<li class="level2"><div class="li"><a href="jonas#installation_de_ant_et_bcel">Installation de ANT et BCEL</a></div></li>
<li class="level2"><div class="li"><a href="jonas#modification_des_variables_d_environnements">Modification des variables d&#039;environnements</a></div></li>
<li class="level2"><div class="li"><a href="jonas#automatisation_du_demarrage_de_jonas">Automatisation du démarrage de JOnAS</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->
<div class="tags"><span>
	<a href="brouillon" class="wikilink1" title="brouillon" rel="tag">brouillon</a>,
	<a href="serveur" class="wikilink1" title="serveur" rel="tag">serveur</a>
</span></div>
<hr />

<h1 class="sectionedit1" id="installation_jonas">Installation JOnAS</h1>
<div class="level1">

<p>
Extrait de <a href="http://fr.wikipedia.org/wiki/JOnAS" class="urlextern" title="http://fr.wikipedia.org/wiki/JOnAS"  rel="nofollow">wikipedia</a>
<p><div class="noteclassic">JOnAS est un serveur d’application open-source (licence <abbr title="GNU Lesser General Public License">LGPL</abbr>) multi-systèmes d’exploitation, et multi bases de données, permettant de bâtir aisément des services applicatifs métier. Il est adapté aux applications critiques. Il est exploité dans de très grandes organisations (banques, ministères, défense, industrie, …) dans des infrastructures J2EE de grande envergure.
Il est développé au sein du consortium OW2, consortium dont les membres fondateurs sont l’INRIA, France Télécom et Bull. OW2 est le premier consortium mondial dédié aux middlewares Open Source
</div></p>
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit" method="post" action="jonas"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1230816872" /><input type="hidden" name="summary" value="[Installation JOnAS] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="32-727" /><input type="submit" value="Modifier" class="button" title="Installation JOnAS" /></div></form></div>
<h3 class="sectionedit2" id="telechargement_de_l_archive">Téléchargement de l&#039;archive</h3>
<div class="level3">

<p>
Téléchargez l&#039;archive sur le site d&#039;ObjectWeb<br/>

</p>
<pre class="code">cd /tmp
wget http://download.forge.objectweb.org/jonas/jonas4.8.4-tomcat5.5.17.tgz</pre>

<p>
Décompressez l&#039;archive dans le répertoire de votre choix avec la commande et copier les données de jonas dans le répertoire /usr/share/jonas afin de respecter la philosophie d&#039;Ubuntu.
</p>
<pre class="code">tar xvzf jonas4.8.4-tomcat5.5.17.tgz
sudo mkdir /usr/share/jonas
sudo mv /tmp/JONAS_4_8_4/* /usr/share/jonas</pre>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit" method="post" action="jonas"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1230816872" /><input type="hidden" name="summary" value="[Téléchargement de l'archive] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="728-1230" /><input type="submit" value="Modifier" class="button" title="Téléchargement de l'archive" /></div></form></div>
<h3 class="sectionedit3" id="installation_du_jdk_de_sun">Installation du JDK de SUN</h3>
<div class="level3">

<p>
Attention car il existe 2 version du JDK sur les dépôts d&#039;Ubuntu Gusty Gibbon. Dans ce tutoriel nous choisirons les paquets sun-java5-*
</p>
<pre class="code">sudo apt-get install sun-java5-jdk</pre>

<p>
Acceptez les termes de la licence et l&#039;installation du JDK est terminée.
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit" method="post" action="jonas"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1230816872" /><input type="hidden" name="summary" value="[Installation du JDK de SUN] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="1231-1528" /><input type="submit" value="Modifier" class="button" title="Installation du JDK de SUN" /></div></form></div>
<h3 class="sectionedit4" id="installation_de_ant_et_bcel">Installation de ANT et BCEL</h3>
<div class="level3">

<p>
Réalisez cette opération avec la commande suivante:
</p>
<pre class="code">sudo apt-get install ant libbcel-java</pre>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit" method="post" action="jonas"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1230816872" /><input type="hidden" name="summary" value="[Installation de ANT et BCEL] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="1529-1676" /><input type="submit" value="Modifier" class="button" title="Installation de ANT et BCEL" /></div></form></div>
<h3 class="sectionedit5" id="modification_des_variables_d_environnements">Modification des variables d&#039;environnements</h3>
<div class="level3">

<p>
Modifier le fichier <code>/etc/bash.bashrc</code> pour y ajouter la variable JAVA_HOME et ANT_HOME. <br/>

Ajouter ces lignes à la fin du fichier:
</p>
<pre class="code">export JAVA_HOME=/usr/lib/jvm/java-1.5.0-sun
PATH=$JAVA_HOME/bin:$PATH

export ANT_HOME=/usr/share/ant
PATH=$ANT_HOME/bin:$PATH

export JONAS_ROOT=/usr/share/jonas
PATH=$JONAS_ROOT/bin/unix:$PATH

export PATH</pre>

<p>
Déconnectez et reconnectez-vous du serveur afin de vérifier que les variables d&#039;environnements sont bien initialisées.
Exécuter la commande <code>env</code> pour vérifier la présence de JAVA_HOME, ANT_HOME et JONAS_ROOT
</p>
<pre class="code">:~$ env
TERM=xterm
SHELL=/bin/bash
...
ANT_HOME=/usr/share/ant
...
PATH=/usr/share/jonas/bin/unix:/usr/share/ant/bin:/usr/lib/jvm/java-1.5.0-sun/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
...
JAVA_HOME=/usr/lib/jvm/java-1.5.0-sun
...
JONAS_ROOT=/usr/share/jonas
...</pre>

<p>
Vérifiez ensuite que Java, Ant et JONAS répondent correctement
</p>
<pre class="code">:~$java -version
java version &quot;1.5.0_13&quot;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_13-b05)
Java HotSpot(TM) Client VM (build 1.5.0_13-b05, mixed mode, sharing)

:~$ant -version
Apache Ant version 1.7.0 compiled on August 29 2007

:~$ jonas version
JOnAS version: 4.8.4
JOnAS vendor: ObjectWeb</pre>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit" method="post" action="jonas"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1230816872" /><input type="hidden" name="summary" value="[Modification des variables d'environnements] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="1677-3014" /><input type="submit" value="Modifier" class="button" title="Modification des variables d'environnements" /></div></form></div>
<h3 class="sectionedit6" id="automatisation_du_demarrage_de_jonas">Automatisation du démarrage de JOnAS</h3>
<div class="level3">

<p>
Créez le script de démarrage /etc/init.d/jonas
</p>
<pre class="code">sudo nano /etc/init.d/jonas</pre>

<p>
Copiez/collez le script ci-dessous dans le fichier que vous éditez
</p>
<pre class="code bash"><span class="co0">#!/bin/sh</span>
<span class="co0">#/etc/init.d/jonas: start jonas daemon.</span>
&nbsp;
<span class="co0">### BEGIN INIT INFO</span>
<span class="co0"># Provides:          jonas</span>
<span class="co0"># Short-Description: Start software jonas daemon</span>
<span class="co0">### END INIT INFO</span>
&nbsp;
<span class="re2">PATH</span>=<span class="sy0">/</span>usr<span class="sy0">/</span>share<span class="sy0">/</span>jonas<span class="sy0">/</span>bin<span class="sy0">/</span>unix:<span class="sy0">/</span>usr<span class="sy0">/</span>share<span class="sy0">/</span>ant<span class="sy0">/</span>bin:<span class="sy0">/</span>usr<span class="sy0">/</span>lib<span class="sy0">/</span>jvm<span class="sy0">/</span>java-1.5.0-sun<span class="sy0">/</span>bin:<span class="sy0">/</span>usr<span class="sy0">/</span>local<span class="sy0">/</span>sbin:<span class="sy0">/</span>usr<span class="sy0">/</span>local<span class="sy0">/</span>bin:<span class="sy0">/</span>usr<span class="sy0">/</span>sbin:<span class="sy0">/</span>usr<span class="sy0">/</span>bin:<span class="sy0">/</span>sbin:<span class="sy0">/</span>bin
&nbsp;
start<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp;
  <span class="kw3">echo</span> <span class="re5">-n</span> <span class="st0">&quot;Starting <span class="es2">$NAME</span> daemon: &quot;</span>
  jonas start
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
stop<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp;
    <span class="kw3">echo</span> <span class="re5">-n</span> <span class="st0">&quot;Stopping <span class="es2">$NAME</span> daemon: &quot;</span>
    jonas stop
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
&nbsp;
&nbsp;
<span class="re2">NAME</span>=jonas
&nbsp;
<span class="kw1">case</span> <span class="st0">&quot;$1&quot;</span> <span class="kw1">in</span>
  start<span class="br0">&#41;</span>
        start
    <span class="sy0">;;</span>
&nbsp;
  stop<span class="br0">&#41;</span>
        stop
    <span class="sy0">;;</span>
&nbsp;
  restart<span class="br0">&#41;</span>
        stop 
        start 
    <span class="sy0">;;</span>
&nbsp;
  force-reload<span class="br0">&#41;</span>
        stop 
        start 
    <span class="sy0">;;</span>
&nbsp;
  <span class="sy0">*</span><span class="br0">&#41;</span>
    <span class="kw3">echo</span> <span class="st0">&quot;Usage: /etc/init.d/jonas {start|stop|restart|force-reload}&quot;</span>
    <span class="kw3">exit</span> <span class="nu0">1</span>
&nbsp;
<span class="kw1">esac</span>
&nbsp;
<span class="kw3">exit</span> <span class="nu0">0</span></pre>

<p>
Sauvegardez ce script de démarrage et ajoutez lui les droit d&#039;exécution avec la commande suivante:
</p>
<pre class="code">sudo chmod +x /etc/init.d/jonas</pre>

<p>
Créez un lien dans rc2.d vers le script de démarrage pour que celui-ci démarre juste après apache2. Dans notre cas, nous allons créer un lien S92jonas vers /etc/init.d/jonas de la manière suivante:
</p>
<pre class="code">cd /etc/rc2.d
sudo ln -s ../init.d/jonas S92jonas</pre>

<p>
Vous pouvez dés lors démarrer JONAS avec la commande suivante:
</p>
<pre class="code">sudo /etc/init.d/jonas start</pre>

<p>
ou le stopper
</p>
<pre class="code">sudo /etc/init.d/jonas stop</pre>

<p>
<p><div class="notewarning">Dans le fichier de démarrage $JONAS_ROOT/bin/jonas, il faut remplacer #!/bin/sh par #!/bin/bash
Cf <a href="http://forum.ubuntu-fr.org/viewtopic.php?id=209155" class="urlextern" title="http://forum.ubuntu-fr.org/viewtopic.php?id=209155"  rel="nofollow">http://forum.ubuntu-fr.org/viewtopic.php?id=209155</a>
</div></p>
</p>

<p>
Lors du prochain démarrage du serveur, JONAS sera automatiquement exécuté.
Pour vérifier que tout fonctionnement correctement, il suffira de se connecter sur <a href="http://monserveur:9000" class="urlextern" title="http://monserveur:9000"  rel="nofollow">http://monserveur:9000</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit" method="post" action="jonas"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1230816872" /><input type="hidden" name="summary" value="[Automatisation du démarrage de JOnAS] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="3015-" /><input type="submit" value="Modifier" class="button" title="Automatisation du démarrage de JOnAS" /></div></form></div>
<!-- cachefile /srv/www/doc.ubuntu-fr.org/htdocs/data/cache/7/7bab91cd2c9b464ce92e9940c7ff527a.xhtml used -->

        <br style="clear:both;" />
        <div id="pageinfo">
            <!--  |  | -->
            <!-- ?tpl_pageinfo()? -->
            <br />
            Le contenu de ce wiki est sous licence : <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" rel="license" target="_blank">CC BY-SA v3.0</a>
        </div> 
      </div>

      
      <div id="navigation">

        <ul>
          <li class="menu"><a href="http://www.ubuntu-fr.org" class="title" id="menu-accueil"><span>Accueil</span></a></li>
          <li class="menu" id="active">
            <a href="index.html"  class="title" id="menu-doc"><span>Documentation</span></a>
            <ul>
              <li id="navWiki" class="cat">
                <h2>Actions</h2>
                <ul>
                  <li><a href="http://doc.ubuntu-fr.org/jonas?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/jonas?do=edit&amp;rev=0"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/jonas?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li>
                  <li></li>
                  <li><a href="http://doc.ubuntu-fr.org/jonas?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/jonas?do=backlink"  class="action backlink" rel="nofollow" title="Liens vers cette page">Liens vers cette page</a></li>
                  <li></li>
                  <li></li>
                  <li></li>
                </ul>
              </li>
              <li id="navDivers" class="cat">
                <h2>Divers</h2>
                <ul>
                  <li><bdi><a href="wiki/participer_wiki" class="wikilink1" title="wiki:participer_wiki">Participer à la documentation</a></bdi></li>
                  <li><bdi><a href="documentation_hors_ligne" class="wikilink1" title="documentation_hors_ligne">Documentation hors ligne</a></bdi></li>
                  <li><a href="http://www.ubuntu-fr.org/telechargement" title="T&eacute;l&eacute;charger Ubuntu">T&eacute;l&eacute;charger Ubuntu</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="menu"><a href="http://forum.ubuntu-fr.org"  class="title" id="menu-forum"><span>Forum</span></a></li>
          <li class="menu"><a href="http://planet.ubuntu-fr.org"  class="title" id="menu-planet"><span>Planet</span></a></li>
        </ul>

      </div>
      <div id="references-ufr">
        <ul id="legal-ufr">
          <li><a href="http://www.ubuntu-fr.org/contacts">Contact</a></li>
        </ul>

        <ul id="sponsors-ufr">
          <li><a href="http://www.dokuwiki.org/dokuwiki" id="dokuwiki">Propulsé par Dokuwiki</a></li>
        </ul>
      </div>

    </div>
    <!-- $Id$ -->

    <!-- Piwik Image Tracker -->
    <!-- img src="http://piwik.infra.ubuntu-fr.org/piwik.php?idsite=2&amp;rec=1" style="border:0" alt="" /-->
    <!-- End Piwik -->

  </body>
</html>
