<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript"/>
    <meta http-equiv="Content-Style-Type" content="text/css"/>
    <meta http-equiv="Content-Language" content="fr"/>
    <title>chillispot - Documentation Ubuntu Francophone</title>
    <meta name="Description" content="Documentation francophone pour la distribution Ubuntu" lang="fr" />
    <meta name="language" content="fr-FR" />

    <!--[if IE 8]>
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <![endif]-->
        <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2013-04-24T14:49:17+0200"/>
<meta name="keywords" content="wi-fi,reseau,securite,portail captif"/>
<link rel="search" type="application/opensearchdescription+xml" href="lib/exe/opensearch.php" title="Documentation Ubuntu Francophone"/>
<link rel="start" href="index.html"/>
<link rel="contents" href="http://doc.ubuntu-fr.org/chillispot?do=index" title="Plan du site"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Namespace actuel" href="feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="http://doc.ubuntu-fr.org/chillispot?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="http://doc.ubuntu-fr.org/_export/xhtml/chillispot"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="http://doc.ubuntu-fr.org/_export/raw/chillispot"/>
<link rel="canonical" href="chillispot"/>
<link rel="stylesheet" type="text/css" href="lib/exe/css.php?t=ubuntu-2010&amp;tseed=4af22dedc19f28c99fa67afabbb173df"/>
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"id":"chillispot","namespace":""};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="lib/exe/js.php?tseed=4af22dedc19f28c99fa67afabbb173df"></script>
    <link rel="shortcut icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/icone.png" type="image/x-icon" />
    <link rel="apple-touch-icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/touch-ico.png" />

    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc.css" />
    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-ubuntu.css" />
    <link rel="stylesheet" media="print" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-print.css" />

    <script type="text/javascript">
      var menu_hidden;
      var static_url = "UFR_STATIC";
    </script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/menu.js" type="text/javascript"></script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/common.js" type="text/javascript"></script>
  </head>
  <body>

    <div id="accessibar">
      <a href="chillispot#main" tabindex="1">Contenu</a> | <a href="chillispot#qsearch__in" tabindex="2">Rechercher</a> | <a href="chillispot#navigation" tabindex="3">Menus</a>
    </div>

    <div id="page">

      <div id="header">

        <div id="logo">
          <h1>Ubuntu-fr</h1>
          <a href="index.html" title="Accueil de la documentation">Communauté francophone d'utilisateurs d'Ubuntu</a>
        </div>

        <form action="http://ubuntu-fr.org/recherche" accept-charset="utf-8" id="search" onsubmit="if (document.getElementById('qsearch__in').value == 'Recherche rapide....') {document.getElementById('qsearch__in').value = '';}">
          <fieldset>
            <label for="qsearch__in">Recherche : </label><input type="text" value="Recherche rapide...." id="qsearch__in" accesskey="f" name="sk_q" alt="[F]" size="34" tabindex="4" />
            <label for="tsearch_field">Chercher dans : </label><select name="sk_engine" tabindex="5" id="tsearch_field" title="Chercher dans">
              <option value="all">Site</option>
              <option selected="selected" value="doc">Documentation</option>
              <option value="forum">Forum</option>
              <option value="planet">Planet</option>
            </select>
            <input type="submit" value="ok" class="button" alt="Lancer la recherche" tabindex="5" />
          </fieldset>
        </form>
        <!--[if lte IE 7]><div class="clear"></div><![endif]-->

        <form action="chillispot" accept-charset="utf-8" id="login_top" method="post">
          <fieldset>
            <label for="u_field">Identifiant : </label><input type="text" value="Identifiant" name="u" id="u_field" size="9" /><label for="p_field">Mot de passe : </label><input type="password" value="Mot de passe" name="p" id="p_field" size="9" alt="Mot de passe" /><input type="submit" value="connexion" id="connect" /> / <a href="http://forum.ubuntu-fr.org/register.php">inscription</a>
          </fieldset>
        </form>
 

      </div>

      <div id="navbar">
          <h2 id="pagetitle"><a href="chillispot" >chillispot</a></h2>
      </div>

      
      <div id="main" class="dokuwiki">

        <div id="hidemenu" title="Masquer le menu"></div>

        <div id="pagerror"></div>
                <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table des matières</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="chillispot#pre-requis">Pré-requis</a></div></li>
<li class="level1"><div class="li"><a href="chillispot#installation">Installation</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="chillispot#configuration_reseau_module_tuntap">Configuration Réseau (module TUN/TAP)</a></div></li>
<li class="level2"><div class="li"><a href="chillispot#installation_de_la_partie_applicative">Installation de la partie applicative</a></div></li>
<li class="level2"><div class="li"><a href="chillispot#configuration">Configuration</a></div></li>
<li class="level2"><div class="li"><a href="chillispot#test_de_fonctionnement">Test de fonctionnement</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="chillispot#voir_aussi">Voir aussi</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->
<div class="tags"><span>
	<a href="http://doc.ubuntu-fr.org/wi-fi" class="wikilink1" title="wi-fi" rel="tag">wi-fi</a>,
	<a href="reseau" class="wikilink1" title="reseau" rel="tag">réseau</a>,
	<a href="http://doc.ubuntu-fr.org/securite" class="wikilink1" title="securite" rel="tag">sécurité</a>,
	<a href="portail_captif" class="wikilink1" title="portail_captif" rel="tag">portail captif</a>
</span></div>
<hr />

<h1 class="sectionedit1" id="chillispotportail_captif">Chillispot : portail captif</h1>
<div class="level1">

<p>
<p><div class="notetip">Le projet Chillispot est abandonné le développeur principal étant parti, cependant il existe un fork très actif nommé <a href="coovachilli" class="wikilink1" title="coovachilli">CoovaChilli</a>
</div></p>
</p>

<p>
Chillispot est un portail captif. Il a pour rôle dans un premier temps de distribuer les adresses IP aux clients qui se connectent sur le Hotspot, puis dans un second temps de capturer toutes les requêtes à destination du web. Il force ainsi le client à passer par la page de demande d’authentification. Il n’est pas possible de passer outre, seuls les sites de dimension iT et la page d’authentification de Chillispot sont autorisés sans être, au préalable, authentifié sur le serveur Radius. Chillispot peut à la fois être installé sur une machine, via les paquets téléchargeables sur le site officiel, mais peut également être flashé dans un routeur compatible (du type Linksys WRT-54G) au moyen d’un firmware spécifique (DD-WRT).
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit" method="post" action="chillispot"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1366807757" /><input type="hidden" name="summary" value="[Chillispot : portail captif] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="55-1029" /><input type="submit" value="Modifier" class="button" title="Chillispot : portail captif" /></div></form></div>
<h2 class="sectionedit2" id="pre-requis">Pré-requis</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Deux cartes réseau (interface <abbr title="Réseau Local">LAN</abbr> et publique)</div>
</li>
<li class="level1"><div class="li"> serveur web apache2</div>
</li>
<li class="level1"><div class="li"> générateur de certificats</div>
</li>
<li class="level1"><div class="li"> freeradius (authentification)</div>
</li>
<li class="level1"><div class="li"> iptables (pare-feu)</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit" method="post" action="chillispot"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1366807757" /><input type="hidden" name="summary" value="[Pré-requis] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="1030-1221" /><input type="submit" value="Modifier" class="button" title="Pré-requis" /></div></form></div>
<h2 class="sectionedit3" id="installation">Installation</h2>
<div class="level2">

<p>
<img src="lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> / <a href="tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong><a href="apt://apache2,apache-ssl,phpmyadmin,mysql-server,freeradius,freeradius-mysql" class="interwiki iw_apt" title="apt://apache2,apache-ssl,phpmyadmin,mysql-server,freeradius,freeradius-mysql">apache2 apache-ssl phpmyadmin mysql-server freeradius freeradius-mysql</a></strong>.
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit" method="post" action="chillispot"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1366807757" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="1222-1474" /><input type="submit" value="Modifier" class="button" title="Installation" /></div></form></div>
<h3 class="sectionedit4" id="configuration_reseau_module_tuntap">Configuration Réseau (module TUN/TAP)</h3>
<div class="level3">

<p>
Vous avez besoin du module <strong>tun.o</strong> (inclus dans les sources du kernel depuis les versions &gt;= 2.4.7). Ubuntu/Debian ne crée pas le périphérique &quot;tun&quot; automatiquement. Dans un <a href="terminal" class="wikilink1" title="terminal">terminal</a>, taper les commandes suivantes pour la création d&#039;une interface « tun » : 
</p>
<pre class="code">mkdir /dev/net
mknod /dev/net/tun c 10 200
modprobe tun</pre>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit" method="post" action="chillispot"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1366807757" /><input type="hidden" name="summary" value="[Configuration Réseau (module TUN/TAP)] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="1475-1864" /><input type="submit" value="Modifier" class="button" title="Configuration Réseau (module TUN/TAP)" /></div></form></div>
<h3 class="sectionedit5" id="installation_de_la_partie_applicative">Installation de la partie applicative</h3>
<div class="level3">

<p>
<a href="tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Ouvrez le fichier</a> <strong>/etc/modules.conf</strong> et vérifiez qu&#039;il contient la ligne suivante : 
</p>
<pre class="file">alias char-major-10-200 tun</pre>
<ul>
<li class="level1"><div class="li"> <a href="tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez le paquet</a> <del><strong><a href="apt://chillispot" class="interwiki iw_apt" title="apt://chillispot">chillispot</a></strong></del> (n&#039;existe plus)</div>
</li>
<li class="level1"><div class="li"> Configuration du cgi</div>
</li>
</ul>

<p>
On copie le fichier cgi fourni dans le répertoire adéquat :
</p>
<pre class="code">cp /usr/share/doc/chillispot/hotspotlogin.cgi.gz /usr/lib/cgi-bin/
cd /usr/lib/cgi-bin
gunzip hotspotlogin.cgi.gz
chmod a+x hotspotlogin.cgi</pre>

<p>
(vous pourrez éditer ce fichier une fois chillispot fonctionnel afin de personnalisez l&#039;installation)
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit" method="post" action="chillispot"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1366807757" /><input type="hidden" name="summary" value="[Installation de la partie applicative] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="1865-2546" /><input type="submit" value="Modifier" class="button" title="Installation de la partie applicative" /></div></form></div>
<h3 class="sectionedit6" id="configuration">Configuration</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Modifiez le fichier</a> <strong>/usr/lib/cgi-bin/hotspotlogin.cgi</strong>, décommenter et modifier le paramètre suivant :</div>
</li>
</ul>
<pre class="file">$uamsecret = &quot;uamsecret&quot; /* secret partagé entre le CGI hotspotlogin.cgi et le daemon chilli */</pre>
<ul>
<li class="level1"><div class="li"> <a href="tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Modifiez le fichier</a> <strong>/etc/chilli.conf</strong>, décommenter et modifier les paramètres suivants :</div>
</li>
</ul>
<div class="table sectionedit7"><table class="inline">
	<tr class="row0">
		<td class="col0 centeralign">  net 192.168.1.0/24  </td><td class="col1 centeralign">  ou laisser commenter pour utiliser la configuration par défaut 192.168.182.0/24  </td>
	</tr>
	<tr class="row1">
		<td class="col0 centeralign">  dns1 10.187.36.3  </td><td class="col1 centeralign">  (le <abbr title="Domain Name System">DNS</abbr> de mon Fournisseur d’accès) ou laisser commenté pour utiliser la configuration par défaut ( les <abbr title="Domain Name System">DNS</abbr> spécifiés dans votre /etc/resolv.conf)  </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">  radiuslisten 127.0.0.1  </td><td class="col1 centeralign">  Décommenter sinon l’adresse 0.0.0.0 (NAS-IP-Address) apparaît dans les logs de freeradius  </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">  radiusserver1 127.0.0.1  </td><td class="col1 centeralign">  IP du serveur d’authentification  </td>
	</tr>
	<tr class="row4">
		<td class="col0 centeralign">  radiusserver2 127.0.0.1  </td><td class="col1 centeralign">  IP du serveur d’authentification Radius  </td>
	</tr>
	<tr class="row5">
		<td class="col0 centeralign">  radiussecret radiussecret  </td><td class="col1 centeralign">  secret partagé entre le serveur Radius et le daemon chilli  </td>
	</tr>
	<tr class="row6">
		<td class="col0 centeralign">  Radiusnasid portail  </td><td class="col1 centeralign">  identifiant de votre chillispot  </td>
	</tr>
	<tr class="row7">
		<td class="col0 centeralign">  radiuslocationid  </td><td class="col1 centeralign">  isocc=fr,cc=33,ac=87000,network=MonESSID  </td>
	</tr>
	<tr class="row8">
		<td class="col0 centeralign">  dhcpif eth1  </td><td class="col1 centeralign">  nom de l’interface reliée au point d’accès  </td>
	</tr>
	<tr class="row9">
		<td class="col0 centeralign">  uamserver <a href="https://ipdevotreserveur/cgi-bin/hotspotlogin.cgi" class="urlextern" title="https://ipdevotreserveur/cgi-bin/hotspotlogin.cgi"  rel="nofollow">https://ipdevotreserveur/cgi-bin/hotspotlogin.cgi</a>  </td><td class="col1 centeralign">  ou mettre <a href="https://192.168.182.1/cgi-bin/hotspotlogin.cgi" class="urlextern" title="https://192.168.182.1/cgi-bin/hotspotlogin.cgi"  rel="nofollow">https://192.168.182.1/cgi-bin/hotspotlogin.cgi</a> si vous utilisez la configuration par défaut.  </td>
	</tr>
	<tr class="row10">
		<td class="col0 centeralign">  Uamsecret uamsecret  </td><td class="col1 centeralign">  mettre le même secret que dans le fichier /usr/lib/cgi-bin/hotspotlogin.cgi  </td>
	</tr>
	<tr class="row11">
		<td class="col0 centeralign">  Uamlisten 192.168.1.1  </td><td class="col1 leftalign"> adresse écoutée   </td>
	</tr>
	<tr class="row12">
		<td class="col0 centeralign">  uamallowed localhost <a href="http://www.yahoo.fr" class="urlextern" title="http://www.yahoo.fr"  rel="nofollow">www.yahoo.fr</a>  </td><td class="col1 centeralign">  Url autorisée  </td>
	</tr>
</table></div>

</div>

<h4 id="configuration_du_pare-feu">Configuration du pare-feu</h4>
<div class="level4">
<pre class="code">cp /usr/share/doc/chillispot/firewall.iptables /etc/chilli.iptables
chmod u+x /etc/chilli.iptables</pre>

<p>
Vous devez avoir à l&#039;intérieur :
</p>
<pre class="file">EXTIF=&quot;eth0&quot; /* interface reliée à Internet */
INTIF=&quot;eth1&quot; /* interface reliée au point d&#039;accès */</pre>

<p>
Si ce n’est pas déjà fait, activer le forwarding entre les interfaces réseau. Vérifier que la ligne suivante existe dans le fichier <strong>/etc/network/options</strong> : 
</p>
<pre class="file">ip_forward=yes</pre>

<p>
relancez ensuite les interfaces réseaux 
</p>
<pre class="code">/etc/init.d/networking restart</pre>

<p>
Dans le fichier <strong>/etc/freeradius/clients.conf</strong>, modifier le paramètre suivant :
</p>
<pre class="file">client 127.0.0.1 {
#secret = testing123
secret = radiussecret /* mettre le même secret partagé que dans le fichier /etc/chilli.conf */</pre>

</div>

<h4 id="configuration_de_freeradius">Configuration de Freeradius</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> <a href="tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">modifier le fichier</a> <strong>/etc/freeradius/sql.conf</strong>:</div>
</li>
</ul>
<pre class="file">server = &quot;localhost&quot; (ou x.x.x.x l&#039;ip de votre serveur mysql) 
login = &quot;radius_login_sql&quot; 
password = &quot;radius_pass_sql&quot;</pre>
<ul>
<li class="level1"><div class="li"> mettre dans <strong>/etc/freeradius/radiusd.conf</strong> (après le sql.conf) :</div>
</li>
</ul>
<pre class="file">authorize {
        preprocess
        chap
        suffix
        eap
        #files
        sql
}
authenticate {
        Auth-Type PAP {
          pap
        }
        Auth-Type CHAP {
          chap
        }
        eap
}
accounting {
        detail
        radutmp
        sql
}
session {
        sql
}
		radutmp {
				filename = ${logdir}/radutmp
				username = %{User-Name}
		case_sensitive = yes
				check_with_nas = yes		
		perm = 0600
		callerid = &quot;yes&quot;
	}
		radutmp sradutmp {
		filename = ${logdir}/sradutmp
		perm = 0644
		callerid = &quot;no&quot;
	}
		attr_filter {
		attrsfile = ${confdir}/attrs
	}
	counter daily {
		filename = ${raddbdir}/db.daily
		key = User-Name
		count-attribute = Acct-Session-Time
		reset = daily
		counter-name = Daily-Session-Time
		check-name = Max-Daily-Session
		allowed-servicetype = Framed-User
		cache-size = 5000
	}
	always fail {
		rcode = fail
	}
	always reject {
		rcode = reject
	}
	always ok {
		rcode = ok
		simulcount = 0
		mpp = no
	}
		expr {
	}
		digest {
	}
		exec {
		wait = yes
		input_pairs = request
	}
		exec echo {
				wait = yes
				program = &quot;/bin/echo %{User-Name}&quot;
				input_pairs = request
				output_pairs = reply
			}
	ippool main_pool {
		range-start = 192.168.1.1
		range-stop = 192.168.3.254
		netmask = 255.255.255.0
				cache-size = 800
		session-db = ${raddbdir}/db.ippool
		ip-index = ${raddbdir}/db.ipindex
		override = no
		maximum-timeout = 0
	}	
}
instantiate {	
	exec
		expr
	}
authorize {
		preprocess
		auth_log	
		chap
		mschap
		suffix
		eap
		files
		sql
}
authenticate {
		Auth-Type PAP {
		pap
	}
		Auth-Type CHAP {
		chap
	}
		Auth-Type MS-CHAP {
		mschap
	}
	unix
	eap
}
preacct {
	preprocess
	acct_unique
	suffix
	files
}
accounting {
	detail	
	unix
	radutmp
}
session {
	radutmp
}
post-auth {
	sql
}
pre-proxy {
}
post-proxy {
	eap
}</pre>

</div>

<h4 id="configuration_de_mysql">Configuration de MySQL</h4>
<div class="level4">

<p>
<img src="lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> / On s&#039;occupe ensuite de notre base de données :
</p>
<pre class="code">echo &quot;create database radius;&quot; mysql -u root -p
echo &quot;grant all on radius.* to radius_login_sql@&#039;%&#039; identified by &#039;radius_pass_sql&#039;; flush privileges;&quot; mysql -u root -p
zcat /usr/share/doc/freeradius/examples/mysql.sql.gz mysql -u root -p radius
#ou bien
zcat /usr/share/doc/freeradius/examples/db_mysql.sql.gz | mysql -u root -p radius

# sur Lucid Lynx, il est possible que les zcat ne marchent pas. 
#Essayez celles ci (vous devez rentrer les 2) :
mysql -u radius_login_sql -p radius &lt; /etc/freeradius/sql/mysql/schema.sql
mysql -u radius_login_sql -p radius &lt; /etc/freeradius/sql/mysql/nas.sql
</pre>

<p>
Pour ajouter des utilisateur dans la base il faut ajouter un <strong>login + password</strong> dans la table <strong>radcheck</strong> de la base radius , un login plus le type d&#039;authentification dans la table <strong>radgroupcheck</strong> et enfin un login associé à un nom de groupe dans la table <strong>usergroup</strong>
</p>

</div>

<h5 id="table_usergroup">Table usergroup</h5>
<div class="level5">
<div class="table sectionedit8"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 centeralign">  id  </th><th class="col1 centeralign">  UserName  </th><th class="col2 centeralign">  GroupName  </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 centeralign">  1  </td><td class="col1 centeralign">  utilisateur  </td><td class="col2 centeralign">  groupe  </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">  2  </td><td class="col1 centeralign">  prof1  </td><td class="col2 centeralign">  professeurs  </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">  3  </td><td class="col1 centeralign">  élève1  </td><td class="col2 centeralign">  élèves  </td>
	</tr>
</table></div>

</div>

<h5 id="table_radcheck">Table radcheck</h5>
<div class="level5">
<div class="table sectionedit9"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 centeralign">  id  </th><th class="col1 centeralign">  UserName  </th><th class="col2 centeralign">  Attribute  </th><th class="col3 centeralign">  Op  </th><th class="col4 centeralign">  Value  </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 centeralign">  1  </td><td class="col1 centeralign">  utilisateur  </td><td class="col2 centeralign">  Password  </td><td class="col3 centeralign">  ==  </td><td class="col4 centeralign">  passuser  </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">  2  </td><td class="col1 centeralign">  prof1  </td><td class="col2 centeralign">  Password  </td><td class="col3 centeralign">  ==  </td><td class="col4 centeralign">  passprof  </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">  3  </td><td class="col1 centeralign">  élève1  </td><td class="col2 centeralign">  Password  </td><td class="col3 centeralign">  ==  </td><td class="col4 centeralign">  passeleve  </td>
	</tr>
</table></div>

</div>

<h5 id="table_radgroupcheck">Table radgroupcheck</h5>
<div class="level5">
<div class="table sectionedit10"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 centeralign">  id  </th><th class="col1 centeralign">  GroupName  </th><th class="col2 centeralign">  Attribute  </th><th class="col3 centeralign">  op  </th><th class="col4 centeralign">  Value  </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 centeralign">  1  </td><td class="col1 centeralign">  groupe  </td><td class="col2 centeralign">  Auth-Type  </td><td class="col3 centeralign">  :=  </td><td class="col4 centeralign">  Local  </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">  2  </td><td class="col1 centeralign">  professeurs  </td><td class="col2 centeralign">  Auth-Type  </td><td class="col3 centeralign">  :=  </td><td class="col4 centeralign">  Local  </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">  3  </td><td class="col1 centeralign">  élèves  </td><td class="col2 centeralign">  Auth-Type  </td><td class="col3 centeralign">  :=  </td><td class="col4 centeralign">  Local  </td>
	</tr>
</table></div>

<p>
Vous pouvez vous référer au site officiel de <a href="http://www.chillispot.info/features.html" class="urlextern" title="http://www.chillispot.info/features.html"  rel="nofollow">chillispot</a> pour l&#039;ensemble des syntaxes supportés.
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit" method="post" action="chillispot"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1366807757" /><input type="hidden" name="summary" value="[Configuration] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="2547-8984" /><input type="submit" value="Modifier" class="button" title="Configuration" /></div></form></div>
<h3 class="sectionedit11" id="test_de_fonctionnement">Test de fonctionnement</h3>
<div class="level3">

<p>
On test l&#039;authentification de freeradius en mode débug
</p>
<pre class="code">/etc/init.d/freeradius stop
# ou bien 
service freeradius stop

freeradius -XX
[...]
Debug: Listening on authentication *:1812Debug:
Listening on accounting *:1813
Debug: Listening on proxy *:1814
Info: Ready to process requests</pre>

<p>
Dans une autre console on lance un radtest :
</p>
<pre class="code">radtest tux tuxy 127.0.0.1 0 radiussecret

Sending Access-Request of id 95 to 127.0.0.1:1812
User-Name = &quot;tux&quot;
User-Password = &quot;tuxy&quot;
NAS-IP-Address = localhost
NAS-Port = 0
rad_recv: Access-Accept packet from host 127.0.0.1:1812, id=95, length=20</pre>

<p>
<img src="lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> / Notre identification par rapport à mysql est donc fonctionnelle on peut dès à présent tester notre chillispot.
</p>
<pre class="code">/etc/init.d/freeradius stop (ctrl+c pour le mode débug)
/etc/init.d/freeradius start
ifconfig eth1 0.0.0.0
/etc/init.d/chilli stop
/etc/init.d/chilli start
/etc/chilli.iptables</pre>

<p>
Vérifiez que la borne wifi à bien pris son adresse en dhcp puis connectez vous au réseau wifi avec votre poste, lancez une page web, si tout ce passe bien vous devriez être redirigé sur <a href="https://ipdevotreserveur/cgi-bin/hotspotlogin.cgi" class="urlextern" title="https://ipdevotreserveur/cgi-bin/hotspotlogin.cgi"  rel="nofollow">https://ipdevotreserveur/cgi-bin/hotspotlogin.cgi</a>
</p>

<p>
Il vous reste maintenant à vous authentifier, si le radtest à été concluant l&#039;authentification devrait réussir sans problèmes.                                                                             
</p>

<p>
Un popup s&#039;ouvre alors avec le temps de connexion et la possibilité de se déloguer tandis que la page que vous aviez ouverte est redirigé vers le site demandé. 
</p>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit" method="post" action="chillispot"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1366807757" /><input type="hidden" name="summary" value="[Test de fonctionnement] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="8985-10618" /><input type="submit" value="Modifier" class="button" title="Test de fonctionnement" /></div></form></div>
<h2 class="sectionedit12" id="voir_aussi">Voir aussi</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <strong>(en)</strong> <a href="http://www.chillispot.info/" class="urlextern" title="http://www.chillispot.info/"  rel="nofollow">Site officiel</a></div>
</li>
<li class="level1"><div class="li"> <strong>(fr)</strong> Inspiré du livre blanc <a href="http://www.guellec.fr/ressources/rapports/documentation_hotspot.pdf" class="urlextern" title="http://www.guellec.fr/ressources/rapports/documentation_hotspot.pdf"  rel="nofollow">http://www.guellec.fr/ressources/rapports/documentation_hotspot.pdf</a></div>
</li>
</ul>
<hr />

<p>
<em>Contributeurs principaux : <a href="http://doc.ubuntu-fr.org/utilisateurs/erwik666" class="wikilink1" title="utilisateurs:erwik666">erwik666</a>, <a href="utilisateurs/herrleiche" class="wikilink1" title="utilisateurs:herrleiche">Herrleiche</a>.</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit" method="post" action="chillispot"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1366807757" /><input type="hidden" name="summary" value="[Voir aussi] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="10619-" /><input type="submit" value="Modifier" class="button" title="Voir aussi" /></div></form></div>
<!-- cachefile /srv/www/doc.ubuntu-fr.org/htdocs/data/cache/f/fca6cd0f95d54fabfac26833f33bb770.xhtml used -->

        <br style="clear:both;" />
        <div id="pageinfo">
            <!--  |  | -->
            <!-- ?tpl_pageinfo()? -->
            <br />
            Le contenu de ce wiki est sous licence : <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" rel="license" target="_blank">CC BY-SA v3.0</a>
        </div> 
      </div>

      
      <div id="navigation">

        <ul>
          <li class="menu"><a href="http://www.ubuntu-fr.org" class="title" id="menu-accueil"><span>Accueil</span></a></li>
          <li class="menu" id="active">
            <a href="index.html"  class="title" id="menu-doc"><span>Documentation</span></a>
            <ul>
              <li id="navWiki" class="cat">
                <h2>Actions</h2>
                <ul>
                  <li><a href="http://doc.ubuntu-fr.org/chillispot?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/chillispot?do=edit&amp;rev=0"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/chillispot?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li>
                  <li></li>
                  <li><a href="http://doc.ubuntu-fr.org/chillispot?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/chillispot?do=backlink"  class="action backlink" rel="nofollow" title="Liens vers cette page">Liens vers cette page</a></li>
                  <li></li>
                  <li></li>
                  <li></li>
                </ul>
              </li>
              <li id="navDivers" class="cat">
                <h2>Divers</h2>
                <ul>
                  <li><bdi><a href="wiki/participer_wiki" class="wikilink1" title="wiki:participer_wiki">Participer à la documentation</a></bdi></li>
                  <li><bdi><a href="documentation_hors_ligne" class="wikilink1" title="documentation_hors_ligne">Documentation hors ligne</a></bdi></li>
                  <li><a href="http://www.ubuntu-fr.org/telechargement" title="T&eacute;l&eacute;charger Ubuntu">T&eacute;l&eacute;charger Ubuntu</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="menu"><a href="http://forum.ubuntu-fr.org"  class="title" id="menu-forum"><span>Forum</span></a></li>
          <li class="menu"><a href="http://planet.ubuntu-fr.org"  class="title" id="menu-planet"><span>Planet</span></a></li>
        </ul>

      </div>
      <div id="references-ufr">
        <ul id="legal-ufr">
          <li><a href="http://www.ubuntu-fr.org/contacts">Contact</a></li>
        </ul>

        <ul id="sponsors-ufr">
          <li><a href="http://www.dokuwiki.org/dokuwiki" id="dokuwiki">Propulsé par Dokuwiki</a></li>
        </ul>
      </div>

    </div>
    <!-- $Id$ -->

    <!-- Piwik Image Tracker -->
    <!-- img src="http://piwik.infra.ubuntu-fr.org/piwik.php?idsite=2&amp;rec=1" style="border:0" alt="" /-->
    <!-- End Piwik -->

  </body>
</html>
