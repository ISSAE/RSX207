<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript"/>
    <meta http-equiv="Content-Style-Type" content="text/css"/>
    <meta http-equiv="Content-Language" content="fr"/>
    <title>testdisk - Documentation Ubuntu Francophone</title>
    <meta name="Description" content="Documentation francophone pour la distribution Ubuntu" lang="fr" />
    <meta name="language" content="fr-FR" />

    <!--[if IE 8]>
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <![endif]-->
        <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="noindex,nofollow"/>
<link rel="search" type="application/opensearchdescription+xml" href="lib/exe/opensearch.php" title="Documentation Ubuntu Francophone"/>
<link rel="start" href="index.html"/>
<link rel="contents" href="testdisk?do=index" title="Plan du site"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Namespace actuel" href="feed.php?mode=list&amp;ns="/>
<link rel="alternate" type="text/html" title="HTML brut" href="_export/xhtml/testdisk"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="_export/raw/testdisk"/>
<link rel="stylesheet" type="text/css" href="lib/exe/css.php?t=ubuntu-2010&amp;tseed=4af22dedc19f28c99fa67afabbb173df"/>
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"id":"testdisk","namespace":""};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="lib/exe/js.php?tseed=4af22dedc19f28c99fa67afabbb173df"></script>
    <link rel="shortcut icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/icone.png" type="image/x-icon" />
    <link rel="apple-touch-icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/touch-ico.png" />

    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc.css" />
    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-ubuntu.css" />
    <link rel="stylesheet" media="print" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-print.css" />

    <script type="text/javascript">
      var menu_hidden;
      var static_url = "UFR_STATIC";
    </script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/menu.js" type="text/javascript"></script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/common.js" type="text/javascript"></script>
  </head>
  <body>

    <div id="accessibar">
      <a href="testdisk?do=edit#main" tabindex="1">Contenu</a> | <a href="testdisk?do=edit#qsearch__in" tabindex="2">Rechercher</a> | <a href="testdisk?do=edit#navigation" tabindex="3">Menus</a>
    </div>

    <div id="page">

      <div id="header">

        <div id="logo">
          <h1>Ubuntu-fr</h1>
          <a href="index.html" title="Accueil de la documentation">Communauté francophone d'utilisateurs d'Ubuntu</a>
        </div>

        <form action="http://ubuntu-fr.org/recherche" accept-charset="utf-8" id="search" onsubmit="if (document.getElementById('qsearch__in').value == 'Recherche rapide....') {document.getElementById('qsearch__in').value = '';}">
          <fieldset>
            <label for="qsearch__in">Recherche : </label><input type="text" value="Recherche rapide...." id="qsearch__in" accesskey="f" name="sk_q" alt="[F]" size="34" tabindex="4" />
            <label for="tsearch_field">Chercher dans : </label><select name="sk_engine" tabindex="5" id="tsearch_field" title="Chercher dans">
              <option value="all">Site</option>
              <option selected="selected" value="doc">Documentation</option>
              <option value="forum">Forum</option>
              <option value="planet">Planet</option>
            </select>
            <input type="submit" value="ok" class="button" alt="Lancer la recherche" tabindex="5" />
          </fieldset>
        </form>
        <!--[if lte IE 7]><div class="clear"></div><![endif]-->

        <form action="testdisk?do=edit" accept-charset="utf-8" id="login_top" method="post">
          <fieldset>
            <label for="u_field">Identifiant : </label><input type="text" value="Identifiant" name="u" id="u_field" size="9" /><label for="p_field">Mot de passe : </label><input type="password" value="Mot de passe" name="p" id="p_field" size="9" alt="Mot de passe" /><input type="submit" value="connexion" id="connect" /> / <a href="http://forum.ubuntu-fr.org/register.php">inscription</a>
          </fieldset>
        </form>
 

      </div>

      <div id="navbar">
          <h2 id="pagetitle"><a href="testdisk" >testdisk</a></h2>
      </div>

      
      <div id="main" class="dokuwiki">

        <div id="hidemenu" title="Masquer le menu"></div>

        <div id="pagerror"></div>
                
<p>
<strong>Quelques recommandations avant de créer ou de modifier cette page :</strong>
</p>
<ol>
<li class="level1"><div class="li"> Lisez le <a href="wiki/participer_wiki" class="wikilink1" title="wiki:participer_wiki">guide du contributeur</a> et la <a href="wiki/ligne_editoriale" class="wikilink1" title="wiki:ligne_editoriale">ligne éditoriale</a>.</div>
</li>
<li class="level1"><div class="li"> Découvrez la <a href="http://doc.ubuntu-fr.org/wiki/syntaxe" class="wikilink1" title="wiki:syntaxe">syntaxe</a> et entraînez-vous dans le <a href="playground/playground" class="wikilink1" title="playground:playground">bac à sable</a>.</div>
</li>
<li class="level1"><div class="li"> Utilisez les modèles (<a href="wiki/modeles/application" class="wikilink1" title="wiki:modeles:application">application</a>, <a href="wiki/modeles/materiel" class="wikilink1" title="wiki:modeles:materiel">matériel</a>, <a href="wiki/modeles/portable" class="wikilink1" title="wiki:modeles:portable">ordinateur portable</a>, <a href="wiki/modeles/tutoriel" class="wikilink1" title="wiki:modeles:tutoriel">tutoriel</a>, <a href="wiki/modeles/utilisateur" class="wikilink1" title="wiki:modeles:utilisateur">utilisateur</a>, <a href="wiki/modeles/portail" class="wikilink1" title="wiki:modeles:portail">portail</a>) et les <a href="wiki/mini-tutoriels" class="wikilink1" title="wiki:mini-tutoriels">mini-tutoriels</a>.</div>
</li>
<li class="level1"><div class="li"> Rapportez toutes créations ou modifications importantes sur <a href="wiki/liste_discussion#coordination_de_la_documentation" class="wikilink1" title="wiki:liste_discussion">la liste de discussion</a>.</div>
</li>
</ol>

<!-- cachefile /srv/www/doc.ubuntu-fr.org/htdocs/data/cache/f/fcdb5fe1d67011f56447459483d05597.xhtml used -->
<script type="text/javascript">/*<![CDATA[*/
textChanged = false/*!]]>*/</script>
    <div class="editBox" role="application">

    <div class="toolbar group">
        <div id="draft__status"></div>
        <div id="tool__bar"><a href="http://doc.ubuntu-fr.org/lib/exe/mediamanager.php?ns="
            target="_blank">Sélection de fichiers</a></div>
    </div>
    <form id="dw__editform" method="post" action="testdisk?do=edit" accept-charset="utf-8"><div class="no">
<input type="hidden" name="sectok" value="3bbdeeb4168d06af7a8bbdbdb8925be6" /><input type="hidden" name="id" value="testdisk" /><input type="hidden" name="rev" value="0" /><input type="hidden" name="date" value="1425289364" /><input type="hidden" name="prefix" value="." /><input type="hidden" name="suffix" value="" /><input type="hidden" name="changecheck" value="b44f8a71b4047748e681804154aaa97c" /><input type="hidden" name="target" value="section" /><textarea name="wikitext" id="wiki__text" dir="auto" class="edit" cols="80" rows="10" tabindex="1">
{{tag&gt;Precise Trusty récupérer système disque_dur}}

----
====== Testdisk======

&lt;note important&gt;Aussitôt que vous constatez la perte de fichiers, arrêtez d'utiliser, autant que faire se peut, le disque dur (ou autre périphérique de stockage sur lequel a eu lieu la perte). Autrement, vous risquez de ré-écrire par dessus vos fichiers perdus. Ainsi pour l'installation de PhotoRec puis la sauvegarde des fichiers récupérés, vous ne devez pas utiliser la partition sur laquelle les fichiers ont été perdus.&lt;/note&gt;

**Testdisk** est un outil analysant un disque dur à la recherche de [[:partitions|partitions]] effacées ou endommagées. Il recherche un « index » permettant de retrouver une partition formatée à tort. Ayant retrouvé cet index, il reconstitue le [[systeme_de_fichiers|système de fichiers]].\\
Il est fourni avec [[:Photorec]], un outil permettant d'analyser une partition pour retrouver puis récupérer des fichiers effacés.\\
L'utilisation ensuite de[[:fsck]] peut compléter la récupération après l'utilisation de TestDisk en corrigeant la structure du [[:système de fichiers]] de la partition récupérée.\\
Testdisk est distribué sous [[http://www.gnu.org/licenses/gpl.html|Licence GPLv2]] et fonctionne sous Windows,%% GNU/Linux, Mac OS X, Solaris et BSD.%%


===== Pré-requis =====
 * Disposer des [[:sudo|droits d'administration]].
  * Disposer d'une connexion à Internet configurée et activée.
  * Savoir ce qu'est un [[wpfr&gt;disque dur]].
  * Savoir exactement où est branché le disque dur sur son ordinateur :
    * 1er/2e disque dur SATA ?
    * Sur le contrôleur IDE 1 ou 2, en maître ou en esclave ?
  * Savoir ce qu'est une partition et ce qu'est le formatage d'un disque dur.

===== Installation =====

====Via les dépôts officiels ====

[[:tutoriel:comment_installer_un_paquet|Installer le paquet]] **[[apt&gt;testdisk|testdisk]]** (le dépot universe doit être activé).
====Via le site officiel ====

&lt;note important&gt;Installer un paquet hors des dépôts officiels peut présenter un risque d'instabilité pour votre système.&lt;/note&gt;

Si vous souhaitez installer les dernières versions (stable et développement) de TestDisk (et [[:PhotoRec]]), les fichiers se trouvent sur [[http://www.cgsecurity.org/wiki/TestDisk_Download|la page de téléchargements du site]].

  - Télécharger l'[[:archivage|archive]] depuis le [[http://www.cgsecurity.org/wiki/TestDisk_Download|site officiel]]. 
  - [[:archivage|Extraire l'archive]] dans votre dossier personnel (Cela créera le dossier ''testdisk suivi_du_N°_de_version'').\\ Puis depuis un [[:terminal]] avec les [[:commande_shell|commandes]] suivantes:
  - Se déplacer dans le dossier créé&lt;code&gt;cd testdisk*&lt;/code&gt;
  - Pour exécuter Testdisc&lt;code&gt;sudo ./testdisk_static&lt;/code&gt; et pour PhotoRec &lt;code&gt;sudo ./photorec_static&lt;/code&gt;


===== Configuration =====

Pas de configuration particulière.
=====Lancement=====
Dans un [[:terminal]], saisir la [[;commande_shell|commande]] &lt;code&gt;sudo testdisk&lt;/code&gt;
===== Utilisation=====
La version actuelle stable des dépôts offciels Ubuntu (décembre 2014) est la version 6.14 de juillet 2013.
Lancée sur mon ordinateur elle a détecté une partition recovery qui est certainement celle de windows 8.1. 
une description du fonctionnement d'une version plus récente est disponible [[http://www.cgsecurity.org/wiki/TestDisk_Etape_par_Etape|ici]]

(capture d'une version Windows ici, mais il n'y a aucune différence visible entre les versions).

{{ tuto_20testdisk_htm_m3a5d0d83.png }}

Puis avec les flèches haut et bas, on choisit le disque dur sur lequel se trouve la partition formatée à tort.

&lt;note tip&gt;
Conseils :
  *&lt;del&gt; 1er disque dur (IDE) = C:\ = hda&lt;/del&gt;
  * 2e disque dur (SATA) = D:\ = sda
Une bonne méthode pour repérer le bon disque dur est par rapport à sa capacité. Dans cet exemple, il y a 3 disques de 232 GiB, donc, on peut éventuellement se tromper.

Depuis Hardy, le kernel ne distingue plus les ports PATA (EIDE) et SATA, ils sont tous nommés sdX (X est une lettre), avec en priorité les disques SCSI puis les disques SATA et enfin les disques PATA (EIDE), le lecteur CD/DVD quant à lui porte la mention scdX (et X est un chiffre correspondant au numéro du lecteur, 0 pour le premier).
&lt;/note&gt;

&lt;note warning&gt;Attention si vous vous trompez de disque dur vous risquez de perdre des données (cela équivaut à le formater en fait).&lt;/note&gt;

On choisit l'option « Proceed » en bas avec les flèches « ← » et « → » puis on valide avec « Entrée ».

{{tuto_20testdisk_htm_9eaff93.png|}}

On choisit le type de partition. Notez qu'on peut ainsi récupérer différents [[systeme_de_fichiers]] : des disques XBox, Mac ou Sun. Dans la plupart des cas, ce sera Intel donc pour un PC Windows ou GNU/Linux.

{{tuto_20testdisk_htm_5925d16b.png|}}

On choisit ensuite « analyse » :

{{tuto_20testdisk_htm_m34fbf52.png|}}

Il nous dit comment est partitionné le disque dur pour le moment. Ici, il y a une grosse partition en FAT32 créée par erreur.

{{tuto_20testdisk_htm_m504776e1.png|}}

On choisit donc l'option « proceed » :

{{tuto_20testdisk_htm_36b2c2db.png}}

Il nous dit que la partition actuelle est en bonne santé ; on peut lister les fichiers qu'elle contient et d'autres manipulations, moins conseillées si on ne sait pas ce qu'on fait.
Donc on appuie juste sur « Entrée » pour passer a l'étape suivante.

Là on choisit « Search » cela va lancer le scan.

{{tuto_20testdisk_htm_m504776e1.png|}}

Scan lancé.

{{tuto_20testdisk_htm_1bd09c81.png|}}

On laisse mijoter ainsi longtemps… très longtemps ici pour un disque dur de 250 Gio
Mais on constate que, au bout de quelques secondes, il a déjà retrouvé la partition :

{{tuto_20testdisk_htm_5a611058.png|}}

On appuie donc sur « Entrée » pour arrêter la recherche car nous avons reconnu notre partition (inutile d'attendre qu'il analyse tout le disque).

{{tuto_20testdisk_htm_m4b4b19da.png|}}

Il me liste les partitions effacées qu'il a découvertes.
Ici, une autre partition en FAT32 (sûrement une partition encore plus vieille) et MA partition en NTFS ; je vois même le label (le nom) de mon ancienne partition.

{{tuto_20testdisk_htm_m79e6954e.png}}

Pour récupérer cette partition, il faut appuyer sur les flèches droites et gauche.
En effet, on remarque au début de la ligne un « D » ce qui signifie //Deleted// (effacée) on va changer ça.
On peu choisir soit :
  * L = logical
  * E = extended
  * P = primary
  * * = primaire et bootable

Dans mon cas, c'est //primary bootable// à noter que je n'ai le choix que entre « primary »

{{tuto_20testdisk_htm_18d5b64c.png|}}

et « primary bootable »

{{tuto_20testdisk_htm_ea9bfb4.png|}}

Je mets donc le flag « primary bootable » et j'appuie sur « Entrée » pour valider.

{{tuto_20testdisk_htm_70ce73a8.png}}

&lt;note important&gt;
Attention, en choisissant « write », il réécrit l'index du disque dur donc tout ce qu'il y a actuellement sur le disque dur sera effacé par contre on pourra récupérer les données de l'ancienne partition (si on n'a pas réécrit dessus).
&lt;/note&gt;

Puis on redémarre l'ordinateur et c'est tout bon.

===== Désinstallation =====

Pour supprimer cette application, il suffit de [[:tutoriel:comment_supprimer_un_paquet|supprimer son paquet]]. La configuration de l'application sera conservée ou supprimée selon la méthode de désinstallation que vous choisirez.

===== Voir aussi =====

  * **(fr, en)** [[http://www.cgsecurity.org/wiki/TestDisk_Etape_par_Etape|TestDisk, étape par étape]] : mode d'emploi simple et détaillé sur le site officiel.
  * **(fr)** [[https://www.benji1000.net/recuperer-les-donnees-dun-disque-dur-non-reconnu/|Récupérer les données d’un disque-dur non reconnu]] : tutoriel étape par étape sur le blog de benji1000.

----

//Contributeurs : [[utilisateurs:toth_o]].//</textarea>
<div id="wiki__editbar" class="editBar">
<div id="size__ctl">
</div>
<div class="editButtons">
<div id="plugin__captcha_wrapper"><input type="hidden" name="2fb66f204277c840e98f107ec703890c" value="4ec6bP4QEooFVsiFFH4vQJx764SPp+CjTUjGh7PCdbI=" /><label for="plugin__captcha">Merci de recopier le code ci-contre pour prouver que vous êtes humain :</label> <span id="plugin__captcha_code">B R᠎
S CJ</span> <input type="text" size="5" name="9ec605edbb46e2d0e393e92a66205d87" class="edit" /> <label class="no">Merci de laisser ce champ vide : <input type="text" name="682347b6006826a8069e94705646f76c" /></label></div><input name="do[save]" type="submit" value="Enregistrer" class="button" id="edbtn__save" accesskey="s" tabindex="4" title="Enregistrer [S]" />
<input name="do[preview]" type="submit" value="Aperçu" class="button" id="edbtn__preview" accesskey="p" tabindex="5" title="Aperçu [P]" />
<input name="do[draftdel]" type="submit" value="Annuler" class="button" tabindex="6" />
</div>
<div class="summary">
<label class="nowrap" for="edit__summary"><span>Résumé</span> <input type="text" id="edit__summary" name="summary" class="edit" size="50" tabindex="2" /></label>
</div>
</div>
<div class="license">
Note : En modifiant cette page, vous acceptez que le contenu soit placé sous les termes de la licence suivante : <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" rel="license" class="urlextern">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a></div>
</div></form>
</div>
<script type="text/javascript">
   var saveBtn = document.getElementById('edbtn__save');
   saveBtn.disabled = true;
   saveBtn.style.color = 'gray';
   saveBtn.style.backgroundColor = '#EEEEEE';
   saveBtn.value = 'Enregistrer (Click \'Aperçu\' first)';
</script>
        <br style="clear:both;" />
        <div id="pageinfo">
            <!--  |  | -->
            <!-- ?tpl_pageinfo()? -->
            <br />
            Le contenu de ce wiki est sous licence : <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" rel="license" target="_blank">CC BY-SA v3.0</a>
        </div> 
      </div>

      
      <div id="navigation">

        <ul>
          <li class="menu"><a href="http://www.ubuntu-fr.org" class="title" id="menu-accueil"><span>Accueil</span></a></li>
          <li class="menu" id="active">
            <a href="index.html"  class="title" id="menu-doc"><span>Documentation</span></a>
            <ul>
              <li id="navWiki" class="cat">
                <h2>Actions</h2>
                <ul>
                  <li><a href="testdisk?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/testdisk?do="  class="action show" accesskey="v" rel="nofollow" title="Afficher la page [V]">Afficher la page</a></li>
                  <li><a href="testdisk?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li>
                  <li></li>
                  <li><a href="testdisk?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li>
                  <li><a href="testdisk?do=backlink"  class="action backlink" rel="nofollow" title="Liens vers cette page">Liens vers cette page</a></li>
                  <li></li>
                  <li></li>
                  <li></li>
                </ul>
              </li>
              <li id="navDivers" class="cat">
                <h2>Divers</h2>
                <ul>
                  <li><bdi><a href="wiki/participer_wiki" class="wikilink1" title="wiki:participer_wiki">Participer à la documentation</a></bdi></li>
                  <li><bdi><a href="documentation_hors_ligne" class="wikilink1" title="documentation_hors_ligne">Documentation hors ligne</a></bdi></li>
                  <li><a href="http://www.ubuntu-fr.org/telechargement" title="T&eacute;l&eacute;charger Ubuntu">T&eacute;l&eacute;charger Ubuntu</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="menu"><a href="http://forum.ubuntu-fr.org"  class="title" id="menu-forum"><span>Forum</span></a></li>
          <li class="menu"><a href="http://planet.ubuntu-fr.org"  class="title" id="menu-planet"><span>Planet</span></a></li>
        </ul>

      </div>
      <div id="references-ufr">
        <ul id="legal-ufr">
          <li><a href="http://www.ubuntu-fr.org/contacts">Contact</a></li>
        </ul>

        <ul id="sponsors-ufr">
          <li><a href="http://www.dokuwiki.org/dokuwiki" id="dokuwiki">Propulsé par Dokuwiki</a></li>
        </ul>
      </div>

    </div>
    <!-- $Id$ -->

    <!-- Piwik Image Tracker -->
    <!-- img src="http://piwik.infra.ubuntu-fr.org/piwik.php?idsite=2&amp;rec=1" style="border:0" alt="" /-->
    <!-- End Piwik -->

  </body>
</html>
