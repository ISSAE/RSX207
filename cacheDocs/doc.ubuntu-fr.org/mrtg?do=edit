<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript"/>
    <meta http-equiv="Content-Style-Type" content="text/css"/>
    <meta http-equiv="Content-Language" content="fr"/>
    <title>mrtg - Documentation Ubuntu Francophone</title>
    <meta name="Description" content="Documentation francophone pour la distribution Ubuntu" lang="fr" />
    <meta name="language" content="fr-FR" />

    <!--[if IE 8]>
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <![endif]-->
        <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="noindex,nofollow"/>
<link rel="search" type="application/opensearchdescription+xml" href="lib/exe/opensearch.php" title="Documentation Ubuntu Francophone"/>
<link rel="start" href="index.html"/>
<link rel="contents" href="mrtg?do=index" title="Plan du site"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Namespace actuel" href="feed.php?mode=list&amp;ns="/>
<link rel="alternate" type="text/html" title="HTML brut" href="_export/xhtml/mrtg"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="_export/raw/mrtg"/>
<link rel="stylesheet" type="text/css" href="lib/exe/css.php?t=ubuntu-2010&amp;tseed=4af22dedc19f28c99fa67afabbb173df"/>
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"id":"mrtg","namespace":""};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="lib/exe/js.php?tseed=4af22dedc19f28c99fa67afabbb173df"></script>
    <link rel="shortcut icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/icone.png" type="image/x-icon" />
    <link rel="apple-touch-icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/touch-ico.png" />

    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc.css" />
    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-ubuntu.css" />
    <link rel="stylesheet" media="print" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-print.css" />

    <script type="text/javascript">
      var menu_hidden;
      var static_url = "UFR_STATIC";
    </script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/menu.js" type="text/javascript"></script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/common.js" type="text/javascript"></script>
  </head>
  <body>

    <div id="accessibar">
      <a href="mrtg?do=edit#main" tabindex="1">Contenu</a> | <a href="mrtg?do=edit#qsearch__in" tabindex="2">Rechercher</a> | <a href="mrtg?do=edit#navigation" tabindex="3">Menus</a>
    </div>

    <div id="page">

      <div id="header">

        <div id="logo">
          <h1>Ubuntu-fr</h1>
          <a href="index.html" title="Accueil de la documentation">Communauté francophone d'utilisateurs d'Ubuntu</a>
        </div>

        <form action="http://ubuntu-fr.org/recherche" accept-charset="utf-8" id="search" onsubmit="if (document.getElementById('qsearch__in').value == 'Recherche rapide....') {document.getElementById('qsearch__in').value = '';}">
          <fieldset>
            <label for="qsearch__in">Recherche : </label><input type="text" value="Recherche rapide...." id="qsearch__in" accesskey="f" name="sk_q" alt="[F]" size="34" tabindex="4" />
            <label for="tsearch_field">Chercher dans : </label><select name="sk_engine" tabindex="5" id="tsearch_field" title="Chercher dans">
              <option value="all">Site</option>
              <option selected="selected" value="doc">Documentation</option>
              <option value="forum">Forum</option>
              <option value="planet">Planet</option>
            </select>
            <input type="submit" value="ok" class="button" alt="Lancer la recherche" tabindex="5" />
          </fieldset>
        </form>
        <!--[if lte IE 7]><div class="clear"></div><![endif]-->

        <form action="mrtg?do=edit" accept-charset="utf-8" id="login_top" method="post">
          <fieldset>
            <label for="u_field">Identifiant : </label><input type="text" value="Identifiant" name="u" id="u_field" size="9" /><label for="p_field">Mot de passe : </label><input type="password" value="Mot de passe" name="p" id="p_field" size="9" alt="Mot de passe" /><input type="submit" value="connexion" id="connect" /> / <a href="http://forum.ubuntu-fr.org/register.php">inscription</a>
          </fieldset>
        </form>
 

      </div>

      <div id="navbar">
          <h2 id="pagetitle"><a href="mrtg" >mrtg</a></h2>
      </div>

      
      <div id="main" class="dokuwiki">

        <div id="hidemenu" title="Masquer le menu"></div>

        <div id="pagerror"></div>
                
<p>
<strong>Quelques recommandations avant de créer ou de modifier cette page :</strong>
</p>
<ol>
<li class="level1"><div class="li"> Lisez le <a href="wiki/participer_wiki" class="wikilink1" title="wiki:participer_wiki">guide du contributeur</a> et la <a href="wiki/ligne_editoriale" class="wikilink1" title="wiki:ligne_editoriale">ligne éditoriale</a>.</div>
</li>
<li class="level1"><div class="li"> Découvrez la <a href="http://doc.ubuntu-fr.org/wiki/syntaxe" class="wikilink1" title="wiki:syntaxe">syntaxe</a> et entraînez-vous dans le <a href="playground/playground" class="wikilink1" title="playground:playground">bac à sable</a>.</div>
</li>
<li class="level1"><div class="li"> Utilisez les modèles (<a href="wiki/modeles/application" class="wikilink1" title="wiki:modeles:application">application</a>, <a href="wiki/modeles/materiel" class="wikilink1" title="wiki:modeles:materiel">matériel</a>, <a href="wiki/modeles/portable" class="wikilink1" title="wiki:modeles:portable">ordinateur portable</a>, <a href="wiki/modeles/tutoriel" class="wikilink1" title="wiki:modeles:tutoriel">tutoriel</a>, <a href="wiki/modeles/utilisateur" class="wikilink1" title="wiki:modeles:utilisateur">utilisateur</a>, <a href="wiki/modeles/portail" class="wikilink1" title="wiki:modeles:portail">portail</a>) et les <a href="wiki/mini-tutoriels" class="wikilink1" title="wiki:mini-tutoriels">mini-tutoriels</a>.</div>
</li>
<li class="level1"><div class="li"> Rapportez toutes créations ou modifications importantes sur <a href="wiki/liste_discussion#coordination_de_la_documentation" class="wikilink1" title="wiki:liste_discussion">la liste de discussion</a>.</div>
</li>
</ol>

<!-- cachefile /srv/www/doc.ubuntu-fr.org/htdocs/data/cache/f/fcdb5fe1d67011f56447459483d05597.xhtml used -->
<script type="text/javascript">/*<![CDATA[*/
textChanged = false/*!]]>*/</script>
    <div class="editBox" role="application">

    <div class="toolbar group">
        <div id="draft__status"></div>
        <div id="tool__bar"><a href="http://doc.ubuntu-fr.org/lib/exe/mediamanager.php?ns="
            target="_blank">Sélection de fichiers</a></div>
    </div>
    <form id="dw__editform" method="post" action="mrtg?do=edit" accept-charset="utf-8"><div class="no">
<input type="hidden" name="sectok" value="3bbdeeb4168d06af7a8bbdbdb8925be6" /><input type="hidden" name="id" value="mrtg" /><input type="hidden" name="rev" value="0" /><input type="hidden" name="date" value="1269507045" /><input type="hidden" name="prefix" value="." /><input type="hidden" name="suffix" value="" /><input type="hidden" name="changecheck" value="61991cc35c52ea40fd87fd90b50bfb6b" /><input type="hidden" name="target" value="section" /><textarea name="wikitext" id="wiki__text" dir="auto" class="edit" cols="80" rows="10" tabindex="1">
&lt;note important&gt;
Cette page est encore en chantier et ne produit pas (encore) de résultat fonctionnel.
Il **ne** faut **pas** l'utiliser si vous n'êtes pas sûr de ce que vous faites.

Toutes les contributions sont les bienvenues pour l'améliorer.
&lt;/note&gt;

{{tag&gt;Hardy serveur réseau système supervision BROUILLON}}

----

====== MRTG : supervision réseau via le protocole SNMP ======

MRTG est un programme qui permet de créer des graphiques de l'activité de votre ordinateur. Ces graphiques sont sauvegardés sous forme de fichiers HTML.
Le but est bien entendu de les rendre accessible depuis l'extérieur en utilisant un serveur web, comme Apache, ce qui permet de surveiller l'activité de l'ordinateur à distance, depuis un simple navigateur web.

===== Pré-requis =====

  * Disposer des [[:sudo|droits d'administration]] ;
  * Disposer d'une connexion à Internet configurée et activée ;
  * Avoir activé l'accès aux [[:depots#universe_et_multiverse|dépôts Universe et Multiverse]] ;
  * Avoir un serveur web (Apache) fonctionnel et accessible depuis l'extérieur.

===== Installation =====

Il vous suffit, pour cela, d'[[:tutoriel:comment_installer_un_paquet|installer les paquets]] **[[apt://mrtg|mrtg]]**.



===== Configuration =====

FIXME **Partie à compléter**

&lt;note help&gt;Je suppose ici que le répertoire de votre serveur web est **/var/www/**. Si ce répertoire est différent, adaptez les commandes en conséquence.&lt;/note&gt;

Tout d'abord, rendez-vous dans le répertoire de votre serveur web, créez-y un sous-dossier mrtg et rendez-vous dans ce sous-dossier.
&lt;code&gt;cd /var/www &amp;&amp; sudo mkdir mrtg &amp;&amp; cd mrtg&lt;/code&gt;

Maintenant, nous allons récupérer mrtg-sys, qui est un ensemble de scripts Perl destiné à récupérer l'activité de l'ordinateur et créer les graphes d'utilisation de ce dernier.
Pour cela, utilisez la commande 
&lt;code&gt;sudo wget http://www.bozorokus.net/mrtg-sys.tgz&lt;/code&gt;
On décompresse l'archive :
&lt;code&gt;sudo tar xvfz mrtg-sys.tgz&lt;/code&gt;
Enfin, l'on crée les fichiers de configuration :
&lt;code&gt;sudo ./install.pl&lt;/code&gt;
Ce dernier script nous donne une ligne à ajouter dans le fichier **/etc/crontab** . Cette ligne nécessite quelques adaptations que nous verrons cela tout à l'heure. Gardez-là sous la main pour le moment ;-) .

Maintenant, nous allons faire en sorte que notre index soit généré automatiquement. Déjà, nous allons revenir dans le répertoire principal de mrtg :
&lt;code&gt;cd /var/www/mrtg&lt;/code&gt;
Ensuite, l'on exécute cette commande (**Remplacez XXXX par le nom de votre machine**) :
&lt;code&gt;sudo indexmaker --output=index.html /var/www/mrtg/mrtg-sys/mrtg_XXXX.cfg&lt;/code&gt;

Maintenant, vous pouvez ressortir la ligne donnée par le script d'installation de MRTG-sys. Toutefois, cette ligne ne marche pas sur Ubuntu (elle suppose que vous avez compilé mrtg, alors que nous l'avons installé avec apt-get).
La ligne donnée est du style (où XXXX est le nom de votre ordinateur):
&lt;code&gt;*/5 * * * * root /usr/local/mrtg-2/bin/mrtg /var/www/mrtg/mrtg-sys/mrtg_XXXX.cfg  &gt;/dev/null 2&gt;/dev/null&lt;/code&gt;
Pour que cette ligne soit fonctionnelle, remplacez le chemin **/usr/local/mrtg-2/bin/mrtg** par **/usr/bin/mrtg**. De plus, pour évitez les avertissements, il faut ajouter **env LANG=C** devant le chemin de l'exécutable.

La ligne finale à [[:tutoriel:comment_editer_un_fichier|ajouter]] dans **/etc/crontab** est donc (**pensez à remplacer XXXX par votre nom de machine !**) :
&lt;code&gt;*/5 * * * * root  env LANG=C /usr/bin/mrtg /var/www/mrtg/mrtg-sys/mrtg_XXXX.cfg  &gt;/dev/null 2&gt;/dev/null&lt;/code&gt;

Attendez 5 min que le cron s'exécute, et le premier graphe devrait être généré.

&lt;note tip&gt;Attention, les scripts proposés sont destinés à des serveurs OVH - Voir Topic sur le forum pour plus d'infos : http://forum.ubuntu-fr.org/viewtopic.php?pid=3360310#p3360310 &lt;/note&gt;

===== Utilisation=====

Pour utiliser mrtg, il suffit de regarder le répertoire dans lequel vous avez installé mrtg avec un navigateur web.

Soit, dans notre exemple :
  * [[http://localhost/mrtg]] depuis votre ordinateur
  * [[http://votre_ip/mrtg]] depuis l'extérieur
Si vous avez un nom de domaine, vous pouvez bien entendu l'utiliser ;) .


===== Désinstallation =====

Pour supprimer cette application, il suffit de [[:tutoriel:comment_supprimer_un_paquet|supprimer son paquet]] et de supprimer la ligne de /etc/crontab.

Vous pouvez également supprimer 



===== Voir aussi =====
  * [[http://oss.oetiker.ch/mrtg/]], le site du projet.

----
//Contributeurs : [[utilisateurs:kankan_01|kankan_01]], [[utilisateurs:Neurones67|Neurones67]]//

// Basé sur [[http://guides.ovh.com/InstallMRTGSys|Installation de MRTG-sys]] sur le site d'OVH (adapté à la gestion des paquets Debian).//</textarea>
<div id="wiki__editbar" class="editBar">
<div id="size__ctl">
</div>
<div class="editButtons">
<div id="plugin__captcha_wrapper"><input type="hidden" name="9486fd3e3f2b0cf011f862910cdccc60" value="XAd+HuVkZToJ6S6fjU71+Yi7Uopi6zkbLhMfD0R/3vY=" /><label for="plugin__captcha">Merci de recopier le code ci-contre pour prouver que vous êtes humain :</label> <span id="plugin__captcha_code">R
Q G H N</span> <input type="text" size="5" name="a6f329b0da1357ff0fd26aef887b218d" class="edit" /> <label class="no">Merci de laisser ce champ vide : <input type="text" name="f72a56d149685f2afc8253ad914bb087" /></label></div><input name="do[save]" type="submit" value="Enregistrer" class="button" id="edbtn__save" accesskey="s" tabindex="4" title="Enregistrer [S]" />
<input name="do[preview]" type="submit" value="Aperçu" class="button" id="edbtn__preview" accesskey="p" tabindex="5" title="Aperçu [P]" />
<input name="do[draftdel]" type="submit" value="Annuler" class="button" tabindex="6" />
</div>
<div class="summary">
<label class="nowrap" for="edit__summary"><span>Résumé</span> <input type="text" id="edit__summary" name="summary" class="edit" size="50" tabindex="2" /></label>
</div>
</div>
<div class="license">
Note : En modifiant cette page, vous acceptez que le contenu soit placé sous les termes de la licence suivante : <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" rel="license" class="urlextern">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a></div>
</div></form>
</div>
<script type="text/javascript">
   var saveBtn = document.getElementById('edbtn__save');
   saveBtn.disabled = true;
   saveBtn.style.color = 'gray';
   saveBtn.style.backgroundColor = '#EEEEEE';
   saveBtn.value = 'Enregistrer (Click \'Aperçu\' first)';
</script>
        <br style="clear:both;" />
        <div id="pageinfo">
            <!--  |  | -->
            <!-- ?tpl_pageinfo()? -->
            <br />
            Le contenu de ce wiki est sous licence : <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" rel="license" target="_blank">CC BY-SA v3.0</a>
        </div> 
      </div>

      
      <div id="navigation">

        <ul>
          <li class="menu"><a href="http://www.ubuntu-fr.org" class="title" id="menu-accueil"><span>Accueil</span></a></li>
          <li class="menu" id="active">
            <a href="index.html"  class="title" id="menu-doc"><span>Documentation</span></a>
            <ul>
              <li id="navWiki" class="cat">
                <h2>Actions</h2>
                <ul>
                  <li><a href="mrtg?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/mrtg?do="  class="action show" accesskey="v" rel="nofollow" title="Afficher la page [V]">Afficher la page</a></li>
                  <li><a href="mrtg?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li>
                  <li></li>
                  <li><a href="mrtg?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li>
                  <li><a href="mrtg?do=backlink"  class="action backlink" rel="nofollow" title="Liens vers cette page">Liens vers cette page</a></li>
                  <li></li>
                  <li></li>
                  <li></li>
                </ul>
              </li>
              <li id="navDivers" class="cat">
                <h2>Divers</h2>
                <ul>
                  <li><bdi><a href="wiki/participer_wiki" class="wikilink1" title="wiki:participer_wiki">Participer à la documentation</a></bdi></li>
                  <li><bdi><a href="documentation_hors_ligne" class="wikilink1" title="documentation_hors_ligne">Documentation hors ligne</a></bdi></li>
                  <li><a href="http://www.ubuntu-fr.org/telechargement" title="T&eacute;l&eacute;charger Ubuntu">T&eacute;l&eacute;charger Ubuntu</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="menu"><a href="http://forum.ubuntu-fr.org"  class="title" id="menu-forum"><span>Forum</span></a></li>
          <li class="menu"><a href="http://planet.ubuntu-fr.org"  class="title" id="menu-planet"><span>Planet</span></a></li>
        </ul>

      </div>
      <div id="references-ufr">
        <ul id="legal-ufr">
          <li><a href="http://www.ubuntu-fr.org/contacts">Contact</a></li>
        </ul>

        <ul id="sponsors-ufr">
          <li><a href="http://www.dokuwiki.org/dokuwiki" id="dokuwiki">Propulsé par Dokuwiki</a></li>
        </ul>
      </div>

    </div>
    <!-- $Id$ -->

    <!-- Piwik Image Tracker -->
    <!-- img src="http://piwik.infra.ubuntu-fr.org/piwik.php?idsite=2&amp;rec=1" style="border:0" alt="" /-->
    <!-- End Piwik -->

  </body>
</html>
