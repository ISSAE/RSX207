<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript"/>
    <meta http-equiv="Content-Style-Type" content="text/css"/>
    <meta http-equiv="Content-Language" content="fr"/>
    <title>picviz - Documentation Ubuntu Francophone</title>
    <meta name="Description" content="Documentation francophone pour la distribution Ubuntu" lang="fr" />
    <meta name="language" content="fr-FR" />

    <!--[if IE 8]>
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <![endif]-->
        <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="noindex,nofollow"/>
<link rel="search" type="application/opensearchdescription+xml" href="lib/exe/opensearch.php" title="Documentation Ubuntu Francophone"/>
<link rel="start" href="index.html"/>
<link rel="contents" href="picviz?do=index" title="Plan du site"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Namespace actuel" href="feed.php?mode=list&amp;ns="/>
<link rel="alternate" type="text/html" title="HTML brut" href="_export/xhtml/picviz"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="_export/raw/picviz"/>
<link rel="stylesheet" type="text/css" href="lib/exe/css.php?t=ubuntu-2010&amp;tseed=4af22dedc19f28c99fa67afabbb173df"/>
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"id":"picviz","namespace":""};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="lib/exe/js.php?tseed=4af22dedc19f28c99fa67afabbb173df"></script>
    <link rel="shortcut icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/icone.png" type="image/x-icon" />
    <link rel="apple-touch-icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/touch-ico.png" />

    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc.css" />
    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-ubuntu.css" />
    <link rel="stylesheet" media="print" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-print.css" />

    <script type="text/javascript">
      var menu_hidden;
      var static_url = "UFR_STATIC";
    </script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/menu.js" type="text/javascript"></script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/common.js" type="text/javascript"></script>
  </head>
  <body>

    <div id="accessibar">
      <a href="picviz?do=edit#main" tabindex="1">Contenu</a> | <a href="picviz?do=edit#qsearch__in" tabindex="2">Rechercher</a> | <a href="picviz?do=edit#navigation" tabindex="3">Menus</a>
    </div>

    <div id="page">

      <div id="header">

        <div id="logo">
          <h1>Ubuntu-fr</h1>
          <a href="index.html" title="Accueil de la documentation">Communauté francophone d'utilisateurs d'Ubuntu</a>
        </div>

        <form action="http://ubuntu-fr.org/recherche" accept-charset="utf-8" id="search" onsubmit="if (document.getElementById('qsearch__in').value == 'Recherche rapide....') {document.getElementById('qsearch__in').value = '';}">
          <fieldset>
            <label for="qsearch__in">Recherche : </label><input type="text" value="Recherche rapide...." id="qsearch__in" accesskey="f" name="sk_q" alt="[F]" size="34" tabindex="4" />
            <label for="tsearch_field">Chercher dans : </label><select name="sk_engine" tabindex="5" id="tsearch_field" title="Chercher dans">
              <option value="all">Site</option>
              <option selected="selected" value="doc">Documentation</option>
              <option value="forum">Forum</option>
              <option value="planet">Planet</option>
            </select>
            <input type="submit" value="ok" class="button" alt="Lancer la recherche" tabindex="5" />
          </fieldset>
        </form>
        <!--[if lte IE 7]><div class="clear"></div><![endif]-->

        <form action="picviz?do=edit" accept-charset="utf-8" id="login_top" method="post">
          <fieldset>
            <label for="u_field">Identifiant : </label><input type="text" value="Identifiant" name="u" id="u_field" size="9" /><label for="p_field">Mot de passe : </label><input type="password" value="Mot de passe" name="p" id="p_field" size="9" alt="Mot de passe" /><input type="submit" value="connexion" id="connect" /> / <a href="http://forum.ubuntu-fr.org/register.php">inscription</a>
          </fieldset>
        </form>
 

      </div>

      <div id="navbar">
          <h2 id="pagetitle"><a href="picviz" >picviz</a></h2>
      </div>

      
      <div id="main" class="dokuwiki">

        <div id="hidemenu" title="Masquer le menu"></div>

        <div id="pagerror"></div>
                
<p>
<strong>Quelques recommandations avant de créer ou de modifier cette page :</strong>
</p>
<ol>
<li class="level1"><div class="li"> Lisez le <a href="wiki/participer_wiki" class="wikilink1" title="wiki:participer_wiki">guide du contributeur</a> et la <a href="wiki/ligne_editoriale" class="wikilink1" title="wiki:ligne_editoriale">ligne éditoriale</a>.</div>
</li>
<li class="level1"><div class="li"> Découvrez la <a href="http://doc.ubuntu-fr.org/wiki/syntaxe" class="wikilink1" title="wiki:syntaxe">syntaxe</a> et entraînez-vous dans le <a href="playground/playground" class="wikilink1" title="playground:playground">bac à sable</a>.</div>
</li>
<li class="level1"><div class="li"> Utilisez les modèles (<a href="wiki/modeles/application" class="wikilink1" title="wiki:modeles:application">application</a>, <a href="wiki/modeles/materiel" class="wikilink1" title="wiki:modeles:materiel">matériel</a>, <a href="wiki/modeles/portable" class="wikilink1" title="wiki:modeles:portable">ordinateur portable</a>, <a href="wiki/modeles/tutoriel" class="wikilink1" title="wiki:modeles:tutoriel">tutoriel</a>, <a href="wiki/modeles/utilisateur" class="wikilink1" title="wiki:modeles:utilisateur">utilisateur</a>, <a href="wiki/modeles/portail" class="wikilink1" title="wiki:modeles:portail">portail</a>) et les <a href="wiki/mini-tutoriels" class="wikilink1" title="wiki:mini-tutoriels">mini-tutoriels</a>.</div>
</li>
<li class="level1"><div class="li"> Rapportez toutes créations ou modifications importantes sur <a href="wiki/liste_discussion#coordination_de_la_documentation" class="wikilink1" title="wiki:liste_discussion">la liste de discussion</a>.</div>
</li>
</ol>

<!-- cachefile /srv/www/doc.ubuntu-fr.org/htdocs/data/cache/f/fcdb5fe1d67011f56447459483d05597.xhtml used -->
<script type="text/javascript">/*<![CDATA[*/
textChanged = false/*!]]>*/</script>
    <div class="editBox" role="application">

    <div class="toolbar group">
        <div id="draft__status"></div>
        <div id="tool__bar"><a href="http://doc.ubuntu-fr.org/lib/exe/mediamanager.php?ns="
            target="_blank">Sélection de fichiers</a></div>
    </div>
    <form id="dw__editform" method="post" action="picviz?do=edit" accept-charset="utf-8"><div class="no">
<input type="hidden" name="sectok" value="3bbdeeb4168d06af7a8bbdbdb8925be6" /><input type="hidden" name="id" value="picviz" /><input type="hidden" name="rev" value="0" /><input type="hidden" name="date" value="1403121072" /><input type="hidden" name="prefix" value="." /><input type="hidden" name="suffix" value="" /><input type="hidden" name="changecheck" value="7fadb69ce42503c703e9e398f7521656" /><input type="hidden" name="target" value="section" /><textarea name="wikitext" id="wiki__text" dir="auto" class="edit" cols="80" rows="10" tabindex="1">
{{tag&gt;système sécurité}}
----

====== Picviz ======
Picviz est un applicatif qui, à partir de fichiers log générés par des sources diverses telles que Apache, Netfilter, ... va concevoir des graphiques au format png permettant une vue plus synthétique et plus compréhensible des données contenues dans ces fichiers log (erreurs, anomalies, ...)

 Picviz permet de générer des graphiques type coordonnées parallèles. 
Les coordonnées parallèles sont une technique permettant de visualiser un nombre important d'informations de façon non ambiguë ([[http://fr.wikipedia.org/wiki/Coordonn%C3%A9es_parall%C3%A8les|voir wikipedia]]).

===== Pré-requis =====

  * Disposer des [[:sudo|droits d'administration]].
  * Disposer d'une connexion à Internet configurée et activée.
  * Dépôt //universe// activé (sinon voir [[:depots]]).
===== Installation =====
Installation des paquetages prérequis (dont [[python]] et [[gcc]])

	apt-get install flex bison python-dev python-qt4 cmake cairo-dock gcc libpcre3 libpcre3-dbg libpcre3-dev

Installation de libpicviz (c'est la library de picviz développée en python) l'archive est disponible  [[http://trac.wallinfire.net/picviz/wiki/ReleasesDownload|ici]]
	cd ..
	wget http://pkgs.fedoraproject.org/repo/pkgs/picviz/libpicviz-0.6.tar.gz/bd2cd1dd250dc5df362b1d3a5edea3cd/libpicviz-0.6.tar.gz
	tar xvf libpicviz-0.6.1.tar.gz
	cd libpicviz-0.6.1
	make
	sudo make install
	cd src/bindings/python
	sudo python setup.py install

Installation de picviz-cli (picviz en interface texte) l'archive est disponible  [[http://trac.wallinfire.net/picviz/wiki/ReleasesDownload|ici]]
	cd ..
	wget http://pkgs.fedoraproject.org/repo/pkgs/picviz/picviz-cli-0.6.tar.gz/4ef5edbb77811de3ac608af28d02dce6/picviz-cli-0.6.tar.gz
	tar xvf picviz-cli-0.6.tar.gz
	cd picviz-cli-0.6/src
	make
	sudo make install

Installation de picviz-Gui (picviz en interface graphique) l'archive est disponible  [[http://trac.wallinfire.net/picviz/wiki/ReleasesDownload|ici]]
	cd ../..
	wget http://www.wallinfire.net/files/picviz/picviz-gui-0.7.tar.gz
	tar xvf picviz-gui-0.7.tar.gz
	cd picviz-gui-0.7
	sudo ./setup.py install
	sudo ldconfig

===== Configuration=====


==== &gt; picviz-gui ====

Intégrer picviz-gui au menu **Application** : Clic droit sur **Application**-&gt; **Éditer les menus** -&gt; **Accessoires** -&gt; **Nouvel élément** -&gt; le nom **Picviz**, la commande **picviz-gui**

===== Utilisation=====

Picviz reçoit en entrée des fichiers au format PCV.

Avant d'utiliser le logiciel Picviz, il faut utiliser un script qui permet de convertir le fichier log en un fichier PCV par l'utilisation du langage PGDL ([[http://trac.wallinfire.net/picviz/wiki/PcvLanguage|plus d'information]]).


Sources (Syslog, [[http://doc.ubuntu-fr.org/iptables|Netfilter]], [[http://doc.ubuntu-fr.org/apache2?redirect=1|Apache]]) -&gt; Génération par le langage PGDL (utilisation de [[http://trac.wallinfire.net/picviz/wiki/PerlPcv|script]]) -&gt; fichier PCV -&gt; Conception du graphique (par utilisation picviz) -&gt; Graphique png

==== &gt; picviz-cli ====

	pcv -Tpngcairo -Rheatline -rrrrrrrra access-wallinfire.net.pcv &gt; access.png

  * Tpngcairo : format png
  * Rheatline -Avirus : couleur
  * rrrrrrrr : permet une haute résolution
  * a : permet afficher du texte
Génération automatique de graphiques :
Nous pouvons, à partir [[cron]], créer un script qui permet de générer des images périodiques. Le script syslog2picviz.pl est disponible [[http://trac.wallinfire.net/picviz/browser/picviz-parsers/syslog2picviz.pl?rev=385|ici]]

	#!/bin/sh
	./syslog2picviz.pl syslogemu.log &gt; syslogemu.pcv
	pcv -Tpngcairo -Rheatline -rrrrrrrra syslogemu.pcv &gt; syslogemu.png
	echo &quot;&quot; | mutt -x -s &quot;Picviz&quot; root -a syslogemu.png
	rm syslogemu.pcv
	rm syslogemu.png

Un envoi de mail se fait automatiquement par utilisation d'un [[serveurs_messagerie|serveur mail]]

==== &gt; picviz-gui ====
{{ http://www.picviz.com/images/montage/picviz-ss1.png?439x169|Screenshot de picviz}}

picviz-gui apporte un plus à la ligne de commande, mais comme celle-ci est écrite en python. Elle est relativement moins fluide et fine que [[ggobi]].
==== &gt; Exemple d'utilisation ====
=== La source ===
On récupère un log, dans mon cas syslogemu.log log de parfeu.

Extrait du fichier log
	Mar  3 09:38:46 debian DINPUT IN=eth0 OUT= MAC=00:0c:30:db:0c:32:00:0c:30:b1:d9:e2:09:00  SRC=192.168.1.205 DST=192.168.1.240 LEN=44 TOS=00 PREC=0x00 TTL=55 ID=53647 CE PROTO=TCP SPT=48040 DPT=23 SEQ=2989621591 ACK=0 WINDOW=4096 SYN URGP=0 
	Mar  3 09:38:46 debian DINPUT IN=eth0 OUT= MAC=00:0c:30:db:0c:32:00:0c:30:b1:d9:e2:09:00  SRC=192.168.1.205 DST=192.168.1.240 LEN=44 TOS=00 PREC=0x00 TTL=40 ID=7426 PROTO=TCP SPT=48040 DPT=113 SEQ=2989621591 ACK=0 WINDOW=1024 SYN URGP=0 
	Mar  3 09:38:46 debian DINPUT IN=eth0 OUT= MAC=00:0c:30:db:0c:32:00:0c:30:b1:d9:e2:09:00  SRC=192.168.1.205 DST=192.168.1.240 LEN=44 TOS=00 PREC=0x00 TTL=56 ID=40787 CE PROTO=TCP SPT=48040 DPT=21 SEQ=2989621591 ACK=0 WINDOW=1024 SYN URGP=0
	...

=== Conversion ===
On convertit le log du parfeu en format PCV à l'aide de script. Le script syslog2picviz.pl est disponible [[http://trac.wallinfire.net/picviz/browser/picviz-parsers/syslog2picviz.pl?rev=385|ici]], On peut le modifier selon la situation.

	./syslog2picviz.pl syslogemu.log &gt; syslogemu.pcv
Extrait du fichier pcv
	header {
		title = &quot;Syslog picviz analysis&quot;;
	}
	axes {
		ipv4   SRC [label=&quot;Ip source&quot;];
		ipv4   DST [label=&quot;IP destination&quot;];
		port   SPT [label=&quot;Port source&quot;];
		port   DPT [label=&quot;Port destination&quot;];
	}
	data {
	PortIN=&quot;&quot;,SRC=&quot;192.168.1.205&quot;,DST=&quot;192.168.1.240&quot;,SPT=&quot;48040&quot;,DPT=&quot;23&quot;;
	PortIN=&quot;&quot;,SRC=&quot;192.168.1.205&quot;,DST=&quot;192.168.1.240&quot;,SPT=&quot;48040&quot;,DPT=&quot;113&quot;;
	PortIN=&quot;&quot;,SRC=&quot;192.168.1.205&quot;,DST=&quot;192.168.1.240&quot;,SPT=&quot;48040&quot;,DPT=&quot;21&quot;;
	...
	}

=== Création de l'image ===
On utilise la commande pcv pour convertir syslogemu.pcv en syslogemu.png. A partir de là, nous pouvons débuter l'analyse de l'image.
	pcv -Tpngcairo -Rheatline -rrrrrrrra syslogemu.pcv &gt; syslogemu.png

===== Voir aussi =====
  * **(en)** [[http://www.wallinfire.net/picviz/|Site officiel du logiciel Picviz]]
  * **(en)** [[https://www.honeynet.org/files/KYT-Picviz_v1_0.pdf|Manuel d'utilisation du logiciel Picviz]]
  * **(en)** [[http://www.ggobi.org/docs/parallel-coordinates/|Site officiel du logiciel GGobi]]</textarea>
<div id="wiki__editbar" class="editBar">
<div id="size__ctl">
</div>
<div class="editButtons">
<div id="plugin__captcha_wrapper"><input type="hidden" name="b5c68c6f7cb53a5beca71ddfb130064b" value="DONkL38k8UTMD0z/lbuP9VPgGNHpjeK5gvs66RvVzgY=" /><label for="plugin__captcha">Merci de recopier le code ci-contre pour prouver que vous êtes humain :</label> <span id="plugin__captcha_code">X C U D A</span> <input type="text" size="5" name="ef2126776ec173a4bdd54a1d42d427c9" class="edit" /> <label class="no">Merci de laisser ce champ vide : <input type="text" name="eb2f07ca6064cbf0bb3006a605d72846" /></label></div><input name="do[save]" type="submit" value="Enregistrer" class="button" id="edbtn__save" accesskey="s" tabindex="4" title="Enregistrer [S]" />
<input name="do[preview]" type="submit" value="Aperçu" class="button" id="edbtn__preview" accesskey="p" tabindex="5" title="Aperçu [P]" />
<input name="do[draftdel]" type="submit" value="Annuler" class="button" tabindex="6" />
</div>
<div class="summary">
<label class="nowrap" for="edit__summary"><span>Résumé</span> <input type="text" id="edit__summary" name="summary" class="edit" size="50" tabindex="2" /></label>
</div>
</div>
<div class="license">
Note : En modifiant cette page, vous acceptez que le contenu soit placé sous les termes de la licence suivante : <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" rel="license" class="urlextern">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a></div>
</div></form>
</div>
<script type="text/javascript">
   var saveBtn = document.getElementById('edbtn__save');
   saveBtn.disabled = true;
   saveBtn.style.color = 'gray';
   saveBtn.style.backgroundColor = '#EEEEEE';
   saveBtn.value = 'Enregistrer (Click \'Aperçu\' first)';
</script>
        <br style="clear:both;" />
        <div id="pageinfo">
            <!--  |  | -->
            <!-- ?tpl_pageinfo()? -->
            <br />
            Le contenu de ce wiki est sous licence : <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" rel="license" target="_blank">CC BY-SA v3.0</a>
        </div> 
      </div>

      
      <div id="navigation">

        <ul>
          <li class="menu"><a href="http://www.ubuntu-fr.org" class="title" id="menu-accueil"><span>Accueil</span></a></li>
          <li class="menu" id="active">
            <a href="index.html"  class="title" id="menu-doc"><span>Documentation</span></a>
            <ul>
              <li id="navWiki" class="cat">
                <h2>Actions</h2>
                <ul>
                  <li><a href="picviz?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/picviz?do="  class="action show" accesskey="v" rel="nofollow" title="Afficher la page [V]">Afficher la page</a></li>
                  <li><a href="picviz?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li>
                  <li></li>
                  <li><a href="picviz?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li>
                  <li><a href="picviz?do=backlink"  class="action backlink" rel="nofollow" title="Liens vers cette page">Liens vers cette page</a></li>
                  <li></li>
                  <li></li>
                  <li></li>
                </ul>
              </li>
              <li id="navDivers" class="cat">
                <h2>Divers</h2>
                <ul>
                  <li><bdi><a href="wiki/participer_wiki" class="wikilink1" title="wiki:participer_wiki">Participer à la documentation</a></bdi></li>
                  <li><bdi><a href="documentation_hors_ligne" class="wikilink1" title="documentation_hors_ligne">Documentation hors ligne</a></bdi></li>
                  <li><a href="http://www.ubuntu-fr.org/telechargement" title="T&eacute;l&eacute;charger Ubuntu">T&eacute;l&eacute;charger Ubuntu</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="menu"><a href="http://forum.ubuntu-fr.org"  class="title" id="menu-forum"><span>Forum</span></a></li>
          <li class="menu"><a href="http://planet.ubuntu-fr.org"  class="title" id="menu-planet"><span>Planet</span></a></li>
        </ul>

      </div>
      <div id="references-ufr">
        <ul id="legal-ufr">
          <li><a href="http://www.ubuntu-fr.org/contacts">Contact</a></li>
        </ul>

        <ul id="sponsors-ufr">
          <li><a href="http://www.dokuwiki.org/dokuwiki" id="dokuwiki">Propulsé par Dokuwiki</a></li>
        </ul>
      </div>

    </div>
    <!-- $Id$ -->

    <!-- Piwik Image Tracker -->
    <!-- img src="http://piwik.infra.ubuntu-fr.org/piwik.php?idsite=2&amp;rec=1" style="border:0" alt="" /-->
    <!-- End Piwik -->

  </body>
</html>
