<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript"/>
    <meta http-equiv="Content-Style-Type" content="text/css"/>
    <meta http-equiv="Content-Language" content="fr"/>
    <title>tutoriel:creation_deb - Documentation Ubuntu Francophone</title>
    <meta name="Description" content="Documentation francophone pour la distribution Ubuntu" lang="fr" />
    <meta name="language" content="fr-FR" />

    <!--[if IE 8]>
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <![endif]-->
        <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2015-03-07T20:43:55+0100"/>
<meta name="keywords" content="tutoriel,paquet,a recycler"/>
<link rel="search" type="application/opensearchdescription+xml" href="../lib/exe/opensearch.php" title="Documentation Ubuntu Francophone"/>
<link rel="start" href="../index.html"/>
<link rel="contents" href="http://doc.ubuntu-fr.org/tutoriel/creation_deb?do=index" title="Plan du site"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Namespace actuel" href="../feed.php?mode=list&amp;ns=tutoriel"/>
<link rel="edit" title="Modifier cette page" href="http://doc.ubuntu-fr.org/tutoriel/creation_deb?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="http://doc.ubuntu-fr.org/_export/xhtml/tutoriel/creation_deb"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="http://doc.ubuntu-fr.org/_export/raw/tutoriel/creation_deb"/>
<link rel="canonical" href="creation_deb"/>
<link rel="stylesheet" type="text/css" href="../lib/exe/css.php?t=ubuntu-2010&amp;tseed=4af22dedc19f28c99fa67afabbb173df"/>
<script type="text/javascript">/*<![CDATA[*/var NS='tutoriel';var JSINFO = {"id":"tutoriel:creation_deb","namespace":"tutoriel"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../lib/exe/js.php?tseed=4af22dedc19f28c99fa67afabbb173df"></script>
    <link rel="shortcut icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/icone.png" type="image/x-icon" />
    <link rel="apple-touch-icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/touch-ico.png" />

    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc.css" />
    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-ubuntu.css" />
    <link rel="stylesheet" media="print" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-print.css" />

    <script type="text/javascript">
      var menu_hidden;
      var static_url = "UFR_STATIC";
    </script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/menu.js" type="text/javascript"></script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/common.js" type="text/javascript"></script>
  </head>
  <body>

    <div id="accessibar">
      <a href="creation_deb#main" tabindex="1">Contenu</a> | <a href="creation_deb#qsearch__in" tabindex="2">Rechercher</a> | <a href="creation_deb#navigation" tabindex="3">Menus</a>
    </div>

    <div id="page">

      <div id="header">

        <div id="logo">
          <h1>Ubuntu-fr</h1>
          <a href="../index.html" title="Accueil de la documentation">Communauté francophone d'utilisateurs d'Ubuntu</a>
        </div>

        <form action="http://ubuntu-fr.org/recherche" accept-charset="utf-8" id="search" onsubmit="if (document.getElementById('qsearch__in').value == 'Recherche rapide....') {document.getElementById('qsearch__in').value = '';}">
          <fieldset>
            <label for="qsearch__in">Recherche : </label><input type="text" value="Recherche rapide...." id="qsearch__in" accesskey="f" name="sk_q" alt="[F]" size="34" tabindex="4" />
            <label for="tsearch_field">Chercher dans : </label><select name="sk_engine" tabindex="5" id="tsearch_field" title="Chercher dans">
              <option value="all">Site</option>
              <option selected="selected" value="doc">Documentation</option>
              <option value="forum">Forum</option>
              <option value="planet">Planet</option>
            </select>
            <input type="submit" value="ok" class="button" alt="Lancer la recherche" tabindex="5" />
          </fieldset>
        </form>
        <!--[if lte IE 7]><div class="clear"></div><![endif]-->

        <form action="creation_deb" accept-charset="utf-8" id="login_top" method="post">
          <fieldset>
            <label for="u_field">Identifiant : </label><input type="text" value="Identifiant" name="u" id="u_field" size="9" /><label for="p_field">Mot de passe : </label><input type="password" value="Mot de passe" name="p" id="p_field" size="9" alt="Mot de passe" /><input type="submit" value="connexion" id="connect" /> / <a href="http://forum.ubuntu-fr.org/register.php">inscription</a>
          </fieldset>
        </form>
 

      </div>

      <div id="navbar">
          <h2 id="pagetitle"><a href="creation_deb" >tutoriel:creation_deb</a></h2>
      </div>

      
      <div id="main" class="dokuwiki">

        <div id="hidemenu" title="Masquer le menu"></div>

        <div id="pagerror"></div>
                <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table des matières</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="creation_deb#le_programme_python">Le programme python</a></div></li>
<li class="level1"><div class="li"><a href="creation_deb#le_programme_archive">Le programme archivé</a></div></li>
<li class="level1"><div class="li"><a href="creation_deb#ressources">Ressources</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->
<div class="tags"><span>
	<a href="http://doc.ubuntu-fr.org/tutoriel" class="wikilink1" title="tutoriel" rel="tag">tutoriel</a>,
	<a href="../paquet" class="wikilink1" title="paquet" rel="tag">paquet</a>,
	<a href="http://doc.ubuntu-fr.org/a_recycler" class="wikilink1" title="a_recycler" rel="tag">à recycler</a>
</span></div>
<hr />

<h1 class="sectionedit1" id="creation_d_un_paquet_deb_a_partir_d_une_archive">Création d&#039;un paquet deb à partir d&#039;une archive</h1>
<div class="level1">

<p>
<p><div class="noteclassic">Ici il est expliqué comment créer un paquet .deb depuis une archive, pour créer un .deb depuis les sources, voir <a href="creer_un_paquet" class="wikilink1" title="tutoriel:creer_un_paquet">Création d&#039;un paquet deb à partir des sources</a>
</div></p>
Il peut être pratique de créer soit-même des paquets deb. Cela permet une diffusion plus pratique des programmes et surtout une désinstallation rapide dudit programme. La manière la plus commune de créer un paquet est de <a href="compilation" class="wikilink1" title="tutoriel:compilation">compiler les sources</a> du programmes. Mais parfois, il n&#039;y a rien à compiler.
</p>

<p>
Le cas m&#039;est arrivé avec un programme python et avec des programmes simplement archivés.
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit" method="post" action="creation_deb"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1425757435" /><input type="hidden" name="summary" value="[Création d'un paquet deb à partir d'une archive] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="45-738" /><input type="submit" value="Modifier" class="button" title="Création d'un paquet deb à partir d'une archive" /></div></form></div>
<h2 class="sectionedit2" id="le_programme_python">Le programme python</h2>
<div class="level2">

<p>
Le programme en question ne demande qu&#039;à être installé avec la fonction : <code>python setup.py install</code>
</p>

<p>
L&#039;idée ici est de créer une archive au lieu de l&#039;installer, pour pouvoir par la suite créer son paquet deb. On va donc dans un <a href="../terminal" class="wikilink1" title="terminal">terminal</a> saisir la <a href="../commande_shell" class="wikilink1" title="commande_shell">commande</a> suivante:
</p>
<pre class="code">python setup.py bdist --format=gztar</pre>

<p>
Une fois l&#039;archive créée, on procède comme pour le programme archivé. Ici, le format est tar.gz. On le décompressera en tapant: <code>tar xvzf xxxx.tar.gz</code>
</p>

<p>
<a href="http://www.python.org/doc/2.0.1/dist/built-dist.html" class="urlextern" title="http://www.python.org/doc/2.0.1/dist/built-dist.html"  rel="nofollow">documentation python</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit" method="post" action="creation_deb"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1425757435" /><input type="hidden" name="summary" value="[Le programme python] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="739-1360" /><input type="submit" value="Modifier" class="button" title="Le programme python" /></div></form></div>
<h2 class="sectionedit3" id="le_programme_archive">Le programme archivé</h2>
<div class="level2">

<p>
Le second cas que j&#039;ai rencontré est celui du programme archivé. Qui n&#039;a jamais vu un tuto pour <a href="../firefox" class="wikilink1" title="firefox">installer la dernière version de firefox</a> en le désarchivant dans /opt ?<br/>

Au lieu de cela, on va créer un paquet deb pour pouvoir l&#039;installer et le désinstaller correctement. En lieu et place de firefox, j&#039;en choisi pour l&#039;exemple la version libre <a href="http://www.gnu.org/software/gnuzilla/" class="urlextern" title="http://www.gnu.org/software/gnuzilla/"  rel="nofollow">icecat</a>.
</p>

<p>
Une fois l&#039;archive récupérée, on la décompresse :
</p>
<pre class="code">wget http://ftp.gnu.org/gnu/gnuzilla/3.5.1/icecat-3.5.1-i386.tar.bz2   
tar xvjf icecat-3.5.1-i386.tar.bz2</pre>

<p>
Le principe du fichier est le suivant :
</p>
<ul>
<li class="level1"><div class="li"> un dossier de travail</div>
</li>
<li class="level1"><div class="li"> dans ce dossier, un dossier &quot;DEBIAN&quot; qui comporte un fichier &quot;control&quot;. Ce fichier comporte la description du paquet, ses dépendances, son nom…</div>
</li>
<li class="level1"><div class="li"> dans ce même dossier de travail, l&#039;arborescence comme si l&#039;on partait de /</div>
</li>
</ul>

<p>
Créons le dossier de travail, et rendons-nous y : 
</p>
<pre class="code">mkdir travail
cd travail</pre>

<p>
Créons le dossier DEBIAN et l&#039;arborescence souhaitée :
</p>
<pre class="code">mkdir DEBIAN
mkdir opt
mkdir usr
mkdir usr/share
mkdir usr/share/applications
mkdir usr/bin</pre>

<p>
Déplaçons le dossier décompressé dans notre opt de travail :
</p>
<pre class="code">mv ../icecat-3.5.1-i386 opt/icecat</pre>

<p>
Créons le fichier control :
</p>
<pre class="code">nano DEBIAN/control</pre>

<p>
Ce fichier comporte une multitude de champs plus ou moins importants :
</p>
<pre class="code">Package: icecat
Version: 3.5.1
Architecture: i386
Maintainer: Gnuzilla Project
Section: web
Priority: optional
Installed-Size: 29700
Description: Decouvrez une version totalement libre de firefox
 IceCat est un fork totalement libre de Firefox, maintenu par le projet GnuZilla.</pre>

<p>
En l&#039;occurrence, &quot;Package&quot; et &quot;Version&quot; permettront de remplacer un paquet d&#039;un même nom par une version supérieure.
</p>

<p>
<p><div class="noteimportant">A cette étape, si on voulait installer la dernière version sans effacer la version officielle des dépôts, on pourrait remplacer <code>icecat</code> par <code>icecat-3.5.1</code> par exemple. Ainsi pourraient cohabiter les deux versions d&#039;un même programme. De même, à l&#039;étape d&#039;après, on remplacerait <code>usr/bin/icecat</code> par <code>usr/bin/icecat-3.5.1</code> etc.
</div></p>
</p>

<p>
On peut créer le lanceur dans usr/bin
</p>
<pre class="code">nano usr/bin/icecat</pre>

<p>
Et y coller :
</p>
<pre class="code">#!/bin/bash
cd /opt/icecat
sh run-icecat.sh</pre>

<p>
Puis le rendre exécutable
</p>
<pre class="code">chmod +x usr/bin/icecat</pre>

<p>
Ainsi que l&#039;entrée dans le menu :
</p>
<pre class="code">nano usr/share/applications/icecat.desktop</pre>

<p>
Et y coller :
</p>
<pre class="code">#!/usr/bin/env xdg-open

[Desktop Entry]
Version=3.5.1
Encoding=UTF-8
Name=IceCat
GenericName=IceCat
Comment=Navigateur Web (Firefox totalement libre)
Exec=icecat
Icon=/opt/icecat/icons/mozicon128.png
Terminal=false
Type=Application
Categories=Application;Network;
Name[fr_FR]=IceCat</pre>

<p>
Enfin, tous les ingrédients pour créer le paquet deb sont prêts. Il suffit de le créer par la fonction :
</p>
<pre class="code">cd ..
dpkg -b travail/ icecat_3.5.1_i386.deb</pre>

<p>
Voilà, le paquet est créé et peut être installé normalement : <code>sudo dpkg -i icecat_3.5.1_i386.deb</code>
</p>

<p>
De la même manière, il est plus facilement diffusable sur les autres ordinateurs de votre famille voire à d&#039;autres sur internet.
</p>

<p>
<a href="http://www.linuxfordevices.com/c/a/Linux-For-Devices-Articles/How-to-make-deb-packages/" class="urlextern" title="http://www.linuxfordevices.com/c/a/Linux-For-Devices-Articles/How-to-make-deb-packages/"  rel="nofollow">How to make deb packages</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit" method="post" action="creation_deb"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1425757435" /><input type="hidden" name="summary" value="[Le programme archivé] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="1361-4635" /><input type="submit" value="Modifier" class="button" title="Le programme archivé" /></div></form></div>
<h2 class="sectionedit4" id="ressources">Ressources</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> IceCat, <a href="http://www.gnu.org/software/gnuzilla/" class="urlextern" title="http://www.gnu.org/software/gnuzilla/"  rel="nofollow">the GNU version of the Firefox browser</a></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <a href="http://www.python.org/doc/2.0.1/dist/built-dist.html" class="urlextern" title="http://www.python.org/doc/2.0.1/dist/built-dist.html"  rel="nofollow">documentation python</a></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <a href="http://www.linuxfordevices.com/c/a/Linux-For-Devices-Articles/How-to-make-deb-packages/" class="urlextern" title="http://www.linuxfordevices.com/c/a/Linux-For-Devices-Articles/How-to-make-deb-packages/"  rel="nofollow">How to make deb packages</a></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <a href="http://forum.ubuntu-fr.org/viewtopic.php?id=334554" class="urlextern" title="http://forum.ubuntu-fr.org/viewtopic.php?id=334554"  rel="nofollow">Le paquet de billou</a> pour l&#039;exemple spécifique de firefox/icecat que je voulais mettre en avant.</div>
</li>
</ul>
<hr />

<p>
<em>Contributeurs : <a href="http://doc.ubuntu-fr.org/utilisateurs/skeroy" class="wikilink1" title="utilisateurs:skeroy">SkeRoy</a>.</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit" method="post" action="creation_deb"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1425757435" /><input type="hidden" name="summary" value="[Ressources] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="4636-" /><input type="submit" value="Modifier" class="button" title="Ressources" /></div></form></div>
<!-- no cachefile used, but created /srv/www/doc.ubuntu-fr.org/htdocs/data/cache/0/0f9fe2e5142afc53c0ca77c7f8b0b461.xhtml -->

        <br style="clear:both;" />
        <div id="pageinfo">
            <!--  |  | -->
            <!-- ?tpl_pageinfo()? -->
            <br />
            Le contenu de ce wiki est sous licence : <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" rel="license" target="_blank">CC BY-SA v3.0</a>
        </div> 
      </div>

      
      <div id="navigation">

        <ul>
          <li class="menu"><a href="http://www.ubuntu-fr.org" class="title" id="menu-accueil"><span>Accueil</span></a></li>
          <li class="menu" id="active">
            <a href="../index.html"  class="title" id="menu-doc"><span>Documentation</span></a>
            <ul>
              <li id="navWiki" class="cat">
                <h2>Actions</h2>
                <ul>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/creation_deb?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/creation_deb?do=edit&amp;rev=0"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/creation_deb?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li>
                  <li></li>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/creation_deb?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/creation_deb?do=backlink"  class="action backlink" rel="nofollow" title="Liens vers cette page">Liens vers cette page</a></li>
                  <li></li>
                  <li></li>
                  <li></li>
                </ul>
              </li>
              <li id="navDivers" class="cat">
                <h2>Divers</h2>
                <ul>
                  <li><bdi><a href="../wiki/participer_wiki" class="wikilink1" title="wiki:participer_wiki">Participer à la documentation</a></bdi></li>
                  <li><bdi><a href="../documentation_hors_ligne" class="wikilink1" title="documentation_hors_ligne">Documentation hors ligne</a></bdi></li>
                  <li><a href="http://www.ubuntu-fr.org/telechargement" title="T&eacute;l&eacute;charger Ubuntu">T&eacute;l&eacute;charger Ubuntu</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="menu"><a href="http://forum.ubuntu-fr.org"  class="title" id="menu-forum"><span>Forum</span></a></li>
          <li class="menu"><a href="http://planet.ubuntu-fr.org"  class="title" id="menu-planet"><span>Planet</span></a></li>
        </ul>

      </div>
      <div id="references-ufr">
        <ul id="legal-ufr">
          <li><a href="http://www.ubuntu-fr.org/contacts">Contact</a></li>
        </ul>

        <ul id="sponsors-ufr">
          <li><a href="http://www.dokuwiki.org/dokuwiki" id="dokuwiki">Propulsé par Dokuwiki</a></li>
        </ul>
      </div>

    </div>
    <!-- $Id$ -->

    <!-- Piwik Image Tracker -->
    <!-- img src="http://piwik.infra.ubuntu-fr.org/piwik.php?idsite=2&amp;rec=1" style="border:0" alt="" /-->
    <!-- End Piwik -->

  </body>
</html>
