<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript"/>
    <meta http-equiv="Content-Style-Type" content="text/css"/>
    <meta http-equiv="Content-Language" content="fr"/>
    <title>tutoriel:restrictions_horaires - Documentation Ubuntu Francophone</title>
    <meta name="Description" content="Documentation francophone pour la distribution Ubuntu" lang="fr" />
    <meta name="language" content="fr-FR" />

    <!--[if IE 8]>
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <![endif]-->
        <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2015-03-16T13:16:45+0100"/>
<meta name="keywords" content="securite,tutoriel,pam"/>
<link rel="search" type="application/opensearchdescription+xml" href="../lib/exe/opensearch.php" title="Documentation Ubuntu Francophone"/>
<link rel="start" href="../index.html"/>
<link rel="contents" href="http://doc.ubuntu-fr.org/tutoriel/restrictions_horaires?do=index" title="Plan du site"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Namespace actuel" href="../feed.php?mode=list&amp;ns=tutoriel"/>
<link rel="edit" title="Modifier cette page" href="http://doc.ubuntu-fr.org/tutoriel/restrictions_horaires?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="http://doc.ubuntu-fr.org/_export/xhtml/tutoriel/restrictions_horaires"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="http://doc.ubuntu-fr.org/_export/raw/tutoriel/restrictions_horaires"/>
<link rel="canonical" href="restrictions_horaires"/>
<link rel="stylesheet" type="text/css" href="../lib/exe/css.php?t=ubuntu-2010&amp;tseed=4af22dedc19f28c99fa67afabbb173df"/>
<script type="text/javascript">/*<![CDATA[*/var NS='tutoriel';var JSINFO = {"id":"tutoriel:restrictions_horaires","namespace":"tutoriel"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../lib/exe/js.php?tseed=4af22dedc19f28c99fa67afabbb173df"></script>
    <link rel="shortcut icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/icone.png" type="image/x-icon" />
    <link rel="apple-touch-icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/touch-ico.png" />

    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc.css" />
    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-ubuntu.css" />
    <link rel="stylesheet" media="print" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-print.css" />

    <script type="text/javascript">
      var menu_hidden;
      var static_url = "UFR_STATIC";
    </script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/menu.js" type="text/javascript"></script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/common.js" type="text/javascript"></script>
  </head>
  <body>

    <div id="accessibar">
      <a href="restrictions_horaires#main" tabindex="1">Contenu</a> | <a href="restrictions_horaires#qsearch__in" tabindex="2">Rechercher</a> | <a href="restrictions_horaires#navigation" tabindex="3">Menus</a>
    </div>

    <div id="page">

      <div id="header">

        <div id="logo">
          <h1>Ubuntu-fr</h1>
          <a href="../index.html" title="Accueil de la documentation">Communauté francophone d'utilisateurs d'Ubuntu</a>
        </div>

        <form action="http://ubuntu-fr.org/recherche" accept-charset="utf-8" id="search" onsubmit="if (document.getElementById('qsearch__in').value == 'Recherche rapide....') {document.getElementById('qsearch__in').value = '';}">
          <fieldset>
            <label for="qsearch__in">Recherche : </label><input type="text" value="Recherche rapide...." id="qsearch__in" accesskey="f" name="sk_q" alt="[F]" size="34" tabindex="4" />
            <label for="tsearch_field">Chercher dans : </label><select name="sk_engine" tabindex="5" id="tsearch_field" title="Chercher dans">
              <option value="all">Site</option>
              <option selected="selected" value="doc">Documentation</option>
              <option value="forum">Forum</option>
              <option value="planet">Planet</option>
            </select>
            <input type="submit" value="ok" class="button" alt="Lancer la recherche" tabindex="5" />
          </fieldset>
        </form>
        <!--[if lte IE 7]><div class="clear"></div><![endif]-->

        <form action="restrictions_horaires" accept-charset="utf-8" id="login_top" method="post">
          <fieldset>
            <label for="u_field">Identifiant : </label><input type="text" value="Identifiant" name="u" id="u_field" size="9" /><label for="p_field">Mot de passe : </label><input type="password" value="Mot de passe" name="p" id="p_field" size="9" alt="Mot de passe" /><input type="submit" value="connexion" id="connect" /> / <a href="http://forum.ubuntu-fr.org/register.php">inscription</a>
          </fieldset>
        </form>
 

      </div>

      <div id="navbar">
          <h2 id="pagetitle"><a href="restrictions_horaires" >tutoriel:restrictions_horaires</a></h2>
      </div>

      
      <div id="main" class="dokuwiki">

        <div id="hidemenu" title="Masquer le menu"></div>

        <div id="pagerror"></div>
                <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table des matières</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="restrictions_horaires#utilisation_d_une_interface_graphique">Utilisation d&#039;une interface graphique</a></div></li>
<li class="level1"><div class="li"><a href="restrictions_horaires#configuration_semi-automatique_par_script">Configuration semi-automatique par script</a></div></li>
<li class="level1"><div class="li"><a href="restrictions_horaires#configuration_manuelle">Configuration manuelle</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="restrictions_horaires#comprendre_ce_que_vous_allez_faire">Comprendre ce que vous allez faire</a></div></li>
<li class="level2"><div class="li"><a href="restrictions_horaires#activer_les_restrictions_horaires_via_le_module_pam">Activer les Restrictions Horaires via le Module PAM</a></div></li>
<li class="level2"><div class="li"><a href="restrictions_horaires#configurer_les_horaires_d_acces">Configurer les Horaires d&#039;Accès</a></div></li>
<li class="level2"><div class="li"><a href="restrictions_horaires#expiration_d_une_session">Expiration d&#039;une Session</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="restrictions_horaires#voir_aussi">Voir aussi</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->
<div class="tags"><span>
	<a href="http://doc.ubuntu-fr.org/securite" class="wikilink1" title="securite" rel="tag">sécurité</a>,
	<a href="http://doc.ubuntu-fr.org/tutoriel" class="wikilink1" title="tutoriel" rel="tag">tutoriel</a>,
	<a href="http://doc.ubuntu-fr.org/pam?do=showtag&amp;tag=pam" class="wikilink1" title="pam" rel="tag">pam</a>
</span></div>
<hr />

<h1 class="sectionedit1" id="les_restrictions_horaires_sous_linux">Les restrictions horaires sous Linux</h1>
<div class="level1">

<p>
Avec Ubuntu Linux, il est possible d&#039;affecter à votre ordinateur des <strong>restrictions horaires</strong>, afin d&#039;empêcher la connexion d&#039;un ou plusieurs utilisateurs à votre système.
Grâce aux restrictions horaires, vous pourrez, par exemple, limiter l&#039;accès à l&#039;ordinateur pour vos enfants (une sorte de <a href="comment_mettre_en_place_un_controle_parental" class="wikilink1" title="tutoriel:comment_mettre_en_place_un_controle_parental">Contrôle Parental</a>, en somme), ou bien encore protéger la connexion à votre serveur durant certaines heures.
</p>

<p>
2 grandes orientations s&#039;offrent à vous:
</p>
<ul>
<li class="level1"><div class="li"> utiliser une interface graphique (utilisateur normal)</div>
</li>
<li class="level1"><div class="li"> configurer manuellement des fichiers textes (utilisateur avancé)</div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit" method="post" action="restrictions_horaires"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1426508205" /><input type="hidden" name="summary" value="[Les restrictions horaires sous Linux] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="39-725" /><input type="submit" value="Modifier" class="button" title="Les restrictions horaires sous Linux" /></div></form></div>
<h2 class="sectionedit2" id="utilisation_d_une_interface_graphique">Utilisation d&#039;une interface graphique</h2>
<div class="level2">

<p>
Pour utiliser une interface graphique, consulter la page sur le logiciel <a href="../timekpr" class="wikilink1" title="timekpr">timekpr</a>.
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit" method="post" action="restrictions_horaires"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1426508205" /><input type="hidden" name="summary" value="[Utilisation d'une interface graphique] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="726-864" /><input type="submit" value="Modifier" class="button" title="Utilisation d'une interface graphique" /></div></form></div>
<h2 class="sectionedit3" id="configuration_semi-automatique_par_script">Configuration semi-automatique par script</h2>
<div class="level2">

<p>
Le script <strong>CTparental.sh</strong> que l&#039;on retrouve dans la page de documentation <a href="comment_mettre_en_place_un_controle_parental#dnsmasq_et_blackliste_de_l_universite_de_toulouse" class="urlextern" title="http://doc.ubuntu-fr.org/tutoriel/comment_mettre_en_place_un_controle_parental#dnsmasq_et_blackliste_de_l_universite_de_toulouse"  rel="nofollow">comment mettre en place un contrôle parental</a>
se base sur les principes décrits dans la partie <strong>Configuration manuelle</strong>, mais automatise toutes les étapes.
</p>

<p>
Une fois le script installé il vous suffira de lancer :
</p>
<pre class="code">sudo CTparental.sh -off  # si vous ne voulez pas du filtrage sur Internet.</pre>

<p>
puis :
</p>
<pre class="code">sudo CTparental.sh -tlo  # pour paramétrer les plages horaires de connexion de chaque usager. Attention à bien se laisser un compte en accès H24 7/7</pre>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit" method="post" action="restrictions_horaires"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1426508205" /><input type="hidden" name="summary" value="[Configuration semi-automatique par script] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="865-1589" /><input type="submit" value="Modifier" class="button" title="Configuration semi-automatique par script" /></div></form></div>
<h2 class="sectionedit4" id="configuration_manuelle">Configuration manuelle</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit" method="post" action="restrictions_horaires"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1426508205" /><input type="hidden" name="summary" value="[Configuration manuelle] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="1590-1625" /><input type="submit" value="Modifier" class="button" title="Configuration manuelle" /></div></form></div>
<h3 class="sectionedit5" id="comprendre_ce_que_vous_allez_faire">Comprendre ce que vous allez faire</h3>
<div class="level3">

<p>
Tout au long de ce tutoriel, nous allons nous servir du <strong>Module PAM</strong> (Pluggable Authentication Modules, en anglais <em>modules d&#039;authentification enfichables</em>). Il permet de contrôler l&#039;authentification des utilisateurs lorsqu&#039;ils se connectent. Puis, nous utiliserons les fichiers de configuration de sécurité afin de définir les heures de connexion autorisées.<br/>

Ces manipulations peuvent être exécutées sur <strong>n&#039;importe quelle version d&#039;Ubuntu</strong>, et ne nécessitent qu&#039;un simple éditeur de texte (<a href="../vim" class="wikilink1" title="vim">vim</a>, <a href="../emacs" class="wikilink1" title="emacs">emacs</a>, <a href="../nano" class="wikilink1" title="nano">nano</a>, <a href="../gedit" class="wikilink1" title="gedit">gedit</a>, <a href="../kate" class="wikilink1" title="kate">kate</a>, pour ne citer qu&#039;eux).<br/>

</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit" method="post" action="restrictions_horaires"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1426508205" /><input type="hidden" name="summary" value="[Comprendre ce que vous allez faire] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="1626-2263" /><input type="submit" value="Modifier" class="button" title="Comprendre ce que vous allez faire" /></div></form></div>
<h3 class="sectionedit6" id="activer_les_restrictions_horaires_via_le_module_pam">Activer les Restrictions Horaires via le Module PAM</h3>
<div class="level3">

<p>
Tout d&#039;abord, commencez par vous rendre dans le répertoire <code>/etc/pam.d/</code>, où se situe l&#039;ensemble des services configurables :
</p>
<pre class="code">$ ls /etc/pam.d/
atd   common-account   common-session  gdm                login   ppp    sudo
chfn  common-auth      cron            gdm-autologin      other   samba
chsh  common-password  cupsys          gnome-screensaver  passwd  su</pre>

<p>
Si nous souhaitons bloquer la connexion à l&#039;ordinateur, nous allons devoir modifier le service <a href="../lightdm" class="wikilink1" title="lightdm">lightdm</a>. <a href="comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">Editez donc le fichier</a>  <code>lightdm</code> et ajoutez-y cette ligne de code (à la fin du fichier) :
</p>
<pre class="file">account required pam_time.so</pre>

<p>
Si vous utilisez <strong>kdm</strong>, ce sera donc ce fichier qu&#039;il faudra ouvrir.<br/>

Et voilà, c&#039;est terminé pour la configuration du module PAM ! Cela aura pour effet d&#039;activer le contrôle des heures sur ce service .
<p><div class="noteimportant">Si vous possédez un serveur, vous ne disposez sûrement pas d&#039;interface graphique. Auquel cas, Lightdm n&#039;est pas installé et la connexion ne sera pas bloquée. Pour empêcher la connexion aux <a href="http://doc.ubuntu-fr.org/tty" class="wikilink2" title="tty" rel="nofollow">TTY</a>, il faut modifier le fichier <code>login</code> du même dossier, et y ajouter la même ligne de code que celle précédemment citée.
Cette manipulation est également valable pour les personnes qui ont installé une interface graphique et qui souhaitent bloquer l&#039;accès à l&#039;écran de connexion ainsi qu&#039;aux terminaux.
</div></p>
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit" method="post" action="restrictions_horaires"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1426508205" /><input type="hidden" name="summary" value="[Activer les Restrictions Horaires via le Module PAM] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="2264-3748" /><input type="submit" value="Modifier" class="button" title="Activer les Restrictions Horaires via le Module PAM" /></div></form></div>
<h3 class="sectionedit7" id="configurer_les_horaires_d_acces">Configurer les Horaires d&#039;Accès</h3>
<div class="level3">

<p>
Maintenant que le service PAM a été activé, nous n&#039;avons plus qu&#039;à configurer les heures d&#039;accès. Ouvrez le répertoire <code>/etc/security</code>. Plusieurs fichiers de configuration s&#039;offrent à vous :
</p>
<pre class="code">$ ls /etc/security/
access.conf  namespace.conf  pam_env.conf
group.conf   namespace.init  time.conf
limits.conf  opasswd         time.conf.bak</pre>

<p>
<a href="comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">Editez le fichier</a> <code>time.conf</code>. Quelques explications accompagnées d&#039;exemples (en anglais) introduisent le fichier. Pour définir les horaires d&#039;accès, copiez-collez la ligne de code suivante (à la fin du fichier, comme toujours) :
</p>
<pre class="code">*;*;utilisateurs;horaires</pre>

<p>
A la place du champ <code>utilisateur</code>, écrivez le <strong>login</strong> du compte que vous souhaitez bloquer. 
<p><div class="notetip">Si vous souhaitez bloquer plusieurs utilisateurs, écrivez leurs login à la suite, séparés par l&#039;opérateur <strong>|</strong>.
Par exemple, si je souhaite bloquer les comptes de <code>patrick</code>, <code>jean</code> et <code>emilie</code> :
</p>
<pre class="code">*;*;patrick|jean|emilie;horaires</pre>

<p>
Par contre, si vous désirez bloquer l&#039;accès au système pour tous les utilisateurs sauf un en particulier, il faut utiliser l&#039;opérateur <strong>!</strong> devant la personne concernée.<br/>
Par exemple, si je souhaite que l&#039;accès à l&#039;ordinateur soit refusé à tous les utilisateurs, excepté <code>nicolas</code> et <code>xavier</code> :
</p>
<pre class="code">*;*;!nicolas|xavier;horaires</pre>

<p>

</div></p>
Intéressons-nous maintenant au champ <code>horaires</code>. C&#039;est dans ce champ que la sélection du <strong>jour</strong> et des <strong>horaires</strong> de connexion autorisées sera possible.<br/>
Vous devez tout d&#039;abord spécifier le jour de la semaine, au moyen des abréviations suivantes :
</p>
<pre class="code">Mo : Lundi		Fr : Vendredi		Wd : Samedi/Dimanche
Tu : Mardi		Sa : Samedi		Wk : Lundi/Mardi/Mercredi/Jeudi/Vendredi
We : Mercredi		Su : Dimanche
Th : Jeudi		Al : Tous les Jours</pre>

<p>
<p><div class="noteimportant">Attention de ne pas confondre les abréviations Wk et Wd qui sont trompeuses ! et surtout mal identifiées sur internet : on trouve facilement des informations contradictoires !
</div></p>
</p>

<p>
Puis, on spécifie les heures limites. Celles-ci doivent être au format 24H, composée de 4 chiffres. Par exemple, pour limiter de 15H17 à 18H34, on écrira : <code>1517-1834</code>.<br/>

Pour autoriser <code>marie</code> à se connecter seulement le Mardi, de 15H17 à 18H34, on obtient le résultat :
</p>
<pre class="code">*;*;marie;Tu1517-1834</pre>

<p>
Les connexions en dehors de cette plage horaire seront interdites.<br/>
Tout comme pour les utilisateurs, il est possible d&#039;utiliser les opérateurs <strong>|</strong> et <strong>!</strong> pour indiquer plusieurs horaires (l&#039;opérateur <strong>!</strong> indiquera alors que toutes les heures de connexion seront autorisées, sauf celles qui seront indiquées).
<p><div class="notetip">Les deux étoiles (<strong>jokers</strong>) au début de la ligne de code remplissent respectivement les champs <code>services</code> et <code>tty</code>. Etant donné que l&#039;on souhaite bloquer tout accès au système, il est inutile de spécifier quel service ou quel tty vous souhaitez bloquer.<br/>

Si toutefois vous souhaitez empêcher l&#039;utilisation d&#039;un service particulier, il suffit de le spécifier, comme l&#039;exemple qui suit :
</p>
<pre class="code">login;tty1|tty4|tty5;marie;!Wd0000-2400</pre>

<p>
Ainsi, l&#039;utilisateur <code>marie</code> ne pourra pas se connecter aux <abbr title="Terminal Texte">TTY</abbr> 1, 4 et 5 durant le week-end.
</div></p>
</p>

</div>

<h4 id="quelques_exemples_de_restrictions_horaires">Quelques Exemples de Restrictions Horaires</h4>
<div class="level4">

<p>
<code>mathilde</code> est autorisée à se connecter tous les jours de 13H20 à 15H20, puis de 16H00 à 20H30 :
</p>
<pre class="code">*;*;mathilde;Al1320-1520|Al1600-2030</pre>

<p>
<code>pierre</code>, <code>franck</code> et <code>florian</code> sont autorisés à se connecter de 14H00 à 18H45 pendant les jours de semaine, et de 14H00 à 22H15 pendant le week-end :
</p>
<pre class="code">*;*;pierre|franck|florian;Wk1400-1845|Wd1400-2215</pre>

<p>
<code>olivier</code> n&#039;est jamais autorisé à se connecter. <code>jessica</code> peut se connecter le Mercredi de 13H00 à 16H00 :
</p>
<pre class="code">*;*;olivier;!Al0000-2400
*;*;jessica;We1300-1600
# 2 lignes différentes, car deux horaires différentes pour chacun des utilisateurs</pre>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit" method="post" action="restrictions_horaires"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1426508205" /><input type="hidden" name="summary" value="[Configurer les Horaires d'Accès] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="3749-7759" /><input type="submit" value="Modifier" class="button" title="Configurer les Horaires d'Accès" /></div></form></div>
<h3 class="sectionedit8" id="expiration_d_une_session">Expiration d&#039;une Session</h3>
<div class="level3">

<p>
Lorsqu&#039;une Session arrive à expiration (qu&#039;elle dépasse la limite horaire alors que l&#039;utilisateur est déjà connecté), le module PAM ne peut atteindre l&#039;utilisateur concerné. En effet, si <code>mathilde</code> se connecte pendant les horaires de temps autorisées, elle est tout à fait libre de dépasser ces plages horaires ! Pour cela, nous allons utiliser un nouveau programme : <a href="../cron" class="wikilink1" title="cron">cron</a>. Cette application exécute des commandes à des intervalles de temps données. Dans notre cas, nous allons faire usage de la commande <code>skill -KILL -u</code> pour déconnecter l&#039;utilisateur lorsque la Session expire. <br/>

La Manipulation est très simple. <a href="comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">Editez simplement le fichier</a> <code>/etc/crontab</code>. Ajoutez-y alors la ligne de code suivante :
</p>
<pre class="code">Minute Heure    * * Jour(s)   root    skill -KILL -u Utilisateur</pre>

<p>
Comme précédemment, remplacez les champs <code>Minute</code> et <code>Heure</code> aux horaires désirées. Puis, remplissez le champ <code>Jour(s)</code> par le(s) jour(s) interdit(s), ou tapez simplement une étoile (*) pour indiquer tous les jours de la semaine.
Enfin, remplacez le champ <code>Utilisateur</code> par le login du compte à bloquer, et voilà !
<p><div class="notewarning">Les Jours ne se notent pas de la même façon avec les tâches cron ! Voici la liste des abréviations à utiliser avec ce programme :
</p>
<pre class="code">mon : Lundi	fri : Vendredi
tue : Mardi	sat : Samedi
wed : Mercredi	sun : Dimanche
thu : Jeudi	 *  : Tous les Jours</pre>

<p>

</div></p>
</p>

</div>

<h4 id="quelques_exemples_de_taches_cron_avec_les_exemples_d_horaires_de_la_partie_precedente">Quelques Exemples de tâches cron (avec les exemples d&#039;horaires de la partie précédente)</h4>
<div class="level4">

<p>
<code>jessica</code> peut se connecter le Mercredi de 13H00 à 16H00<br/>

<em>–&gt; Déconnexion : Mercredi, à 16H00.</em>
</p>
<pre class="code">00 16    * * wed   root    skill -KILL -u jessica</pre>

<p>
<code>mathilde</code> est autorisée à se connecter tous les jours de 13H20 à 15H20, puis de 16H00 à 20H30.<br/>

<em>–&gt; Déconnexion : Tous les Jours, à 15H20 et 20H30.</em>
</p>
<pre class="code">20 15    * * *   root    skill -KILL -u mathilde
30 20    * * *   root    skill -KILL -u mathilde</pre>

<p>
<code>pierre</code>, <code>franck</code> et <code>florian</code> sont autorisés à se connecter de 14H00 à 18H45 pendant les jours de semaine, et de 14H00 à 22H15 pendant le week-end<br/>

<em>–&gt; Déconnexion (1) : Lundi, Mardi, Mercredi, Jeudi et Vendredi, à 18H45.<br/>

–&gt; Déconnexion (2) : Samedi et Dimanche, à 22H15.</em>
</p>
<pre class="code">45 18    * * mon,tue,wed,thu,fri   root    skill -KILL -u pierre &amp;&amp; skill -KILL -u franck &amp;&amp; skill -KILL -u florian
15 22    * * sat,sun               root    skill -KILL -u pierre &amp;&amp; skill -KILL -u franck &amp;&amp; skill -KILL -u florian</pre>

<p>
<p><div class="noteclassic">La commande <code>skill -KILL -u</code> déconnecte l&#039;utilisateur de l&#039;interface graphique, mais aussi des <abbr title="Terminal Texte">TTY</abbr>. Elle est donc parfaitement utilisable pour les administrateurs de serveur.<br/>
Cependant, cette commande est immédiate et la déconnexion sera faite sans avertissement. Il serait donc préférable de prévenir de l&#039;installation de ce dispositif les utilisateurs de l&#039;ordinateur ou du réseau en question !
</div></p>
</p>

<p>
Il est possible de prévenir les utilisateurs avec une commande wall lancée par cron quelques minutes avant la fin de la plage horaire, qui sera affichée dans les terminaux de tous les utilisateurs.
</p>
<pre class="code">40 18    * * mon,tue,wed,thu,fri   root echo &quot;fin de session dans 5 minutes&quot; | wall</pre>

<p>
Pour prévenir les utilisateurs d&#039;interface graphique, on peut utiliser à la place de wall la commande notify-send qui est dans le paquet <a href="apt://libnotify-bin" class="interwiki iw_apt" title="apt://libnotify-bin">libnotify-bin</a>.
</p>
<pre class="code">40 18    * * mon,tue,wed,thu,fri   pierre DISPLAY=:0 notify-send &quot;fin de session dans 5 minutes&quot;</pre>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit" method="post" action="restrictions_horaires"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1426508205" /><input type="hidden" name="summary" value="[Expiration d'une Session] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="7760-11365" /><input type="submit" value="Modifier" class="button" title="Expiration d'une Session" /></div></form></div>
<h2 class="sectionedit9" id="voir_aussi">Voir aussi</h2>
<div class="level2">

<p>
<img src="../lib/images/smileys/fixme.gif" class="icon" alt="FIXME" />
</p>
<hr />

<p>
<em>Contributeurs principaux : </em>
</p>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit" method="post" action="restrictions_horaires"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1426508205" /><input type="hidden" name="summary" value="[Voir aussi] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="11366-" /><input type="submit" value="Modifier" class="button" title="Voir aussi" /></div></form></div>
<!-- cachefile /srv/www/doc.ubuntu-fr.org/htdocs/data/cache/6/6a4867fde22568688955e880a477bbc5.xhtml used -->

        <br style="clear:both;" />
        <div id="pageinfo">
            <!--  |  | -->
            <!-- ?tpl_pageinfo()? -->
            <br />
            Le contenu de ce wiki est sous licence : <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" rel="license" target="_blank">CC BY-SA v3.0</a>
        </div> 
      </div>

      
      <div id="navigation">

        <ul>
          <li class="menu"><a href="http://www.ubuntu-fr.org" class="title" id="menu-accueil"><span>Accueil</span></a></li>
          <li class="menu" id="active">
            <a href="../index.html"  class="title" id="menu-doc"><span>Documentation</span></a>
            <ul>
              <li id="navWiki" class="cat">
                <h2>Actions</h2>
                <ul>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/restrictions_horaires?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/restrictions_horaires?do=edit&amp;rev=0"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/restrictions_horaires?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li>
                  <li></li>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/restrictions_horaires?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/restrictions_horaires?do=backlink"  class="action backlink" rel="nofollow" title="Liens vers cette page">Liens vers cette page</a></li>
                  <li></li>
                  <li></li>
                  <li></li>
                </ul>
              </li>
              <li id="navDivers" class="cat">
                <h2>Divers</h2>
                <ul>
                  <li><bdi><a href="../wiki/participer_wiki" class="wikilink1" title="wiki:participer_wiki">Participer à la documentation</a></bdi></li>
                  <li><bdi><a href="../documentation_hors_ligne" class="wikilink1" title="documentation_hors_ligne">Documentation hors ligne</a></bdi></li>
                  <li><a href="http://www.ubuntu-fr.org/telechargement" title="T&eacute;l&eacute;charger Ubuntu">T&eacute;l&eacute;charger Ubuntu</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="menu"><a href="http://forum.ubuntu-fr.org"  class="title" id="menu-forum"><span>Forum</span></a></li>
          <li class="menu"><a href="http://planet.ubuntu-fr.org"  class="title" id="menu-planet"><span>Planet</span></a></li>
        </ul>

      </div>
      <div id="references-ufr">
        <ul id="legal-ufr">
          <li><a href="http://www.ubuntu-fr.org/contacts">Contact</a></li>
        </ul>

        <ul id="sponsors-ufr">
          <li><a href="http://www.dokuwiki.org/dokuwiki" id="dokuwiki">Propulsé par Dokuwiki</a></li>
        </ul>
      </div>

    </div>
    <!-- $Id$ -->

    <!-- Piwik Image Tracker -->
    <!-- img src="http://piwik.infra.ubuntu-fr.org/piwik.php?idsite=2&amp;rec=1" style="border:0" alt="" /-->
    <!-- End Piwik -->

  </body>
</html>
