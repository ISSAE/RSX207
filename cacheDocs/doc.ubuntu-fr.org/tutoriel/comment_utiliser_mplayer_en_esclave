<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript"/>
    <meta http-equiv="Content-Style-Type" content="text/css"/>
    <meta http-equiv="Content-Language" content="fr"/>
    <title>tutoriel:comment_utiliser_mplayer_en_esclave - Documentation Ubuntu Francophone</title>
    <meta name="Description" content="Documentation francophone pour la distribution Ubuntu" lang="fr" />
    <meta name="language" content="fr-FR" />

    <!--[if IE 8]>
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <![endif]-->
        <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2010-09-06T09:23:15+0200"/>
<meta name="keywords" content="mplayer,esclave,tutoriel,brouillon"/>
<link rel="search" type="application/opensearchdescription+xml" href="../lib/exe/opensearch.php" title="Documentation Ubuntu Francophone"/>
<link rel="start" href="../index.html"/>
<link rel="contents" href="http://doc.ubuntu-fr.org/tutoriel/comment_utiliser_mplayer_en_esclave?do=index" title="Plan du site"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Namespace actuel" href="../feed.php?mode=list&amp;ns=tutoriel"/>
<link rel="edit" title="Modifier cette page" href="http://doc.ubuntu-fr.org/tutoriel/comment_utiliser_mplayer_en_esclave?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="http://doc.ubuntu-fr.org/_export/xhtml/tutoriel/comment_utiliser_mplayer_en_esclave"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="http://doc.ubuntu-fr.org/_export/raw/tutoriel/comment_utiliser_mplayer_en_esclave"/>
<link rel="canonical" href="comment_utiliser_mplayer_en_esclave"/>
<link rel="stylesheet" type="text/css" href="../lib/exe/css.php?t=ubuntu-2010&amp;tseed=4af22dedc19f28c99fa67afabbb173df"/>
<script type="text/javascript">/*<![CDATA[*/var NS='tutoriel';var JSINFO = {"id":"tutoriel:comment_utiliser_mplayer_en_esclave","namespace":"tutoriel"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../lib/exe/js.php?tseed=4af22dedc19f28c99fa67afabbb173df"></script>
    <link rel="shortcut icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/icone.png" type="image/x-icon" />
    <link rel="apple-touch-icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/touch-ico.png" />

    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc.css" />
    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-ubuntu.css" />
    <link rel="stylesheet" media="print" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-print.css" />

    <script type="text/javascript">
      var menu_hidden;
      var static_url = "UFR_STATIC";
    </script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/menu.js" type="text/javascript"></script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/common.js" type="text/javascript"></script>
  </head>
  <body>

    <div id="accessibar">
      <a href="comment_utiliser_mplayer_en_esclave#main" tabindex="1">Contenu</a> | <a href="comment_utiliser_mplayer_en_esclave#qsearch__in" tabindex="2">Rechercher</a> | <a href="comment_utiliser_mplayer_en_esclave#navigation" tabindex="3">Menus</a>
    </div>

    <div id="page">

      <div id="header">

        <div id="logo">
          <h1>Ubuntu-fr</h1>
          <a href="../index.html" title="Accueil de la documentation">Communauté francophone d'utilisateurs d'Ubuntu</a>
        </div>

        <form action="http://ubuntu-fr.org/recherche" accept-charset="utf-8" id="search" onsubmit="if (document.getElementById('qsearch__in').value == 'Recherche rapide....') {document.getElementById('qsearch__in').value = '';}">
          <fieldset>
            <label for="qsearch__in">Recherche : </label><input type="text" value="Recherche rapide...." id="qsearch__in" accesskey="f" name="sk_q" alt="[F]" size="34" tabindex="4" />
            <label for="tsearch_field">Chercher dans : </label><select name="sk_engine" tabindex="5" id="tsearch_field" title="Chercher dans">
              <option value="all">Site</option>
              <option selected="selected" value="doc">Documentation</option>
              <option value="forum">Forum</option>
              <option value="planet">Planet</option>
            </select>
            <input type="submit" value="ok" class="button" alt="Lancer la recherche" tabindex="5" />
          </fieldset>
        </form>
        <!--[if lte IE 7]><div class="clear"></div><![endif]-->

        <form action="comment_utiliser_mplayer_en_esclave" accept-charset="utf-8" id="login_top" method="post">
          <fieldset>
            <label for="u_field">Identifiant : </label><input type="text" value="Identifiant" name="u" id="u_field" size="9" /><label for="p_field">Mot de passe : </label><input type="password" value="Mot de passe" name="p" id="p_field" size="9" alt="Mot de passe" /><input type="submit" value="connexion" id="connect" /> / <a href="http://forum.ubuntu-fr.org/register.php">inscription</a>
          </fieldset>
        </form>
 

      </div>

      <div id="navbar">
          <h2 id="pagetitle"><a href="comment_utiliser_mplayer_en_esclave" >tutoriel:comment_utiliser_mplayer_en_esclave</a></h2>
      </div>

      
      <div id="main" class="dokuwiki">

        <div id="hidemenu" title="Masquer le menu"></div>

        <div id="pagerror"></div>
                <div class="notetag">Cette page est en cours de rédaction.<br />
<a href="../wiki/participer_wiki">Apportez votre aide…</a>
</div>
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table des matières</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="comment_utiliser_mplayer_en_esclave#introduction">Introduction</a></div></li>
<li class="level1"><div class="li"><a href="comment_utiliser_mplayer_en_esclave#prerequis">Prérequis</a></div></li>
<li class="level1"><div class="li"><a href="comment_utiliser_mplayer_en_esclave#let_s_go">Let&#039;s go ?</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="comment_utiliser_mplayer_en_esclave#trouver_la_commande">Trouver la commande</a></div></li>
<li class="level2"><div class="li"><a href="comment_utiliser_mplayer_en_esclave#utiliser_la_commande">Utiliser la commande</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="comment_utiliser_mplayer_en_esclave#mise_en_pratique">Mise en pratique</a></div></li>
<li class="level1"><div class="li"><a href="comment_utiliser_mplayer_en_esclave#aller_plus_loin">Aller plus loin</a></div></li>
<li class="level1"><div class="li"><a href="comment_utiliser_mplayer_en_esclave#infos_utiles">Infos utiles</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->
<div class="tags"><span>
	<a href="http://doc.ubuntu-fr.org/mplayer" class="wikilink1" title="mplayer" rel="tag">mplayer</a>,
	<a href="http://doc.ubuntu-fr.org/esclave?do=showtag&amp;tag=esclave" class="wikilink1" title="esclave" rel="tag">esclave</a>,
	<a href="http://doc.ubuntu-fr.org/tutoriel" class="wikilink1" title="tutoriel" rel="tag">tutoriel</a>,
	<a href="../brouillon" class="wikilink1" title="brouillon" rel="tag">BROUILLON</a>
</span></div>

<h1 class="sectionedit1" id="comment_utiliser_mplayer_en_esclave">Comment utiliser Mplayer en esclave ?</h1>
<div class="level1">
<hr />

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit" method="post" action="comment_utiliser_mplayer_en_esclave"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1283757795" /><input type="hidden" name="summary" value="[Comment utiliser Mplayer en esclave ?] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="43-101" /><input type="submit" value="Modifier" class="button" title="Comment utiliser Mplayer en esclave ?" /></div></form></div>
<h2 class="sectionedit2" id="introduction">Introduction</h2>
<div class="level2">

<p>
<a href="http://doc.ubuntu-fr.org/mplayer" class="wikilink1" title="mplayer">Mplayer</a> est un puissant logiciel de lecture de vidéos et de musique. Ce tutoriel explique comment l&#039;utiliser en tant qu&#039;esclave, autant pour la musique que pour la vidéo. Cette technique permet de se passer d&#039;une <a href="http://fr.wikipedia.org/wiki/Environnement_graphique" class="urlextern" title="http://fr.wikipedia.org/wiki/Environnement_graphique"  rel="nofollow">interface graphique</a> et d&#039;ainsi d&#039;économiser de la mémoire RAM, de s&#039;économiser de la place à l&#039;écran (et de faire über-geek). De plus, cette option permet un contrôle du lecteur via de simples <a href="script_shell" class="wikilink1" title="tutoriel:script_shell">scripts shell</a>.
</p>

<p>
Cette méthode est plutôt déconseillée aux adeptes de solutions «usine à gaz», qui préfèreront alors une interface graphique complète, il existe de nombreux <a href="http://doc.ubuntu-fr.org/lecteur_audio" class="wikilink1" title="lecteur_audio">lecteurs de musique</a> et <a href="http://doc.ubuntu-fr.org/lecture_et_encodage_de_fichiers_videos" class="wikilink1" title="lecture_et_encodage_de_fichiers_videos">lecteurs vidéos</a> de qualité.
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit" method="post" action="comment_utiliser_mplayer_en_esclave"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1283757795" /><input type="hidden" name="summary" value="[Introduction] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="102-924" /><input type="submit" value="Modifier" class="button" title="Introduction" /></div></form></div>
<h2 class="sectionedit3" id="prerequis">Prérequis</h2>
<div class="level2">

<p>
Cette utilisation de mplayer est dite en tant que «backend», c&#039;est-à-dire que mplayer devient contrôlable par n&#039;importe quel programme ou script. C&#039;est cette deuxième solution qui va nous intéresser. Pour suivre ce tutoriel, il faudra donc de rapides connaissance sur les scripts shell. La lecture du man de mplayer permettra une meilleure compréhension de la suite.
</p>
<pre class="code">man mplayer
man bash</pre>

<p>
il faut aussi comprendre les notions de <a href="http://fr.wikipedia.org/wiki/Stdout" class="urlextern" title="http://fr.wikipedia.org/wiki/Stdout"  rel="nofollow">flux</a>, et de redirection de flux.
</p>

<p>
Pour continuer le tutoriel, assurez-vous d&#039;avoir <a href="comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installé le paquet</a> mplayer (<a href="apt://mplayer" class="urlextern" title="apt://mplayer"  rel="nofollow">apt://mplayer</a>), <a href="http://fr.wikipedia.org/wiki/Tube_nomm%C3%A9" class="urlextern" title="http://fr.wikipedia.org/wiki/Tube_nomm%C3%A9"  rel="nofollow">mkfifo</a>. Munissez vous de votre <a href="../terminal" class="wikilink1" title="terminal">terminal</a> favoris, d&#039;un peu de patience, et de courage .
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit" method="post" action="comment_utiliser_mplayer_en_esclave"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1283757795" /><input type="hidden" name="summary" value="[Prérequis] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="925-1754" /><input type="submit" value="Modifier" class="button" title="Prérequis" /></div></form></div>
<h2 class="sectionedit4" id="let_s_go">Let&#039;s go ?</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit" method="post" action="comment_utiliser_mplayer_en_esclave"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1283757795" /><input type="hidden" name="summary" value="[Let's go ?] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="1755-1777" /><input type="submit" value="Modifier" class="button" title="Let's go ?" /></div></form></div>
<h3 class="sectionedit5" id="trouver_la_commande">Trouver la commande</h3>
<div class="level3">

<p>
Tout d&#039;abord, il faut trouver la commande adéquate pour lancer mplayer. Le manuel nous informe qu&#039;il faut utiliser l&#039;argument -slave.
</p>
<pre class="code">Cette option enclenche le mode esclave. Ceci est prévu pour l’utilisation de MPlayer en tant que base (backend) pour d’autres programmes. Au lieu d’intercepter les évènements clavier, MPlayer va lire ses commandes séparées par un retour chariot (\n) via l’entrée stdin.
NOTE : Voir −input cmdlist pour une liste des commandes esclaves, et DOCS/tech/slave.txt pour leur description.</pre>

<p>
Il faudra, comme indiqué aussi utiliser l&#039;argument -input file=&quot;chemin/vers/mon/fichier/de/controle&quot;. Cette fois-ci, je vous laisse lire le manuel :p. De même, pour plus de clarté, l&#039;argument -quiet sera passé, pour un <a href="http://fr.wikipedia.org/wiki/Stdout" class="urlextern" title="http://fr.wikipedia.org/wiki/Stdout"  rel="nofollow">stdout</a> plus «épuré».Voici ce que vous devriez obtenir après une petite torture mentale :p :
</p>
<pre class="code">mplayer -quiet -slave -input file=/tmp/music-control</pre>

<p>
NB : l&#039;argument -shuffle permet de rendre la playlist aléatoire ,-idle évite à mplayer de quitter si rien n&#039;est joué et -playlist permet de préloader une playlist. 
</p>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit" method="post" action="comment_utiliser_mplayer_en_esclave"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1283757795" /><input type="hidden" name="summary" value="[Trouver la commande] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="1778-2950" /><input type="submit" value="Modifier" class="button" title="Trouver la commande" /></div></form></div>
<h3 class="sectionedit6" id="utiliser_la_commande">Utiliser la commande</h3>
<div class="level3">

<p>
Comme indiqué dans le man, cette commande implique l&#039;utilisation d&#039;un fifofile. C&#039;est à dire un «fichier» qui servira à rediriger ce qui rentre dans son stdin vers celui de mplayer. Ainsi, les commandes passées au fifofile seront transmises à mplayer, qui les exécutera. Pour obtenir une liste des commandes disponibles, c&#039;est :
</p>
<pre class="code">mplayer -input cmdlist</pre>

<p>
Le principe est donc simple, il suffit de passer des commandes à notre fifofile ce qui influencera le comportement de mplayer.
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit" method="post" action="comment_utiliser_mplayer_en_esclave"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1283757795" /><input type="hidden" name="summary" value="[Utiliser la commande] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="2951-3481" /><input type="submit" value="Modifier" class="button" title="Utiliser la commande" /></div></form></div>
<h2 class="sectionedit7" id="mise_en_pratique">Mise en pratique</h2>
<div class="level2">

<p>
<p><div class="notetip">Les chemins cités ci-dessous ne sont pas obligatoires, ils ne font qu&#039;office d&#039;exemple. Adaptez les en fonction en vos besoins et envies.
</div></p>
</p>

<p>
Nous allons tout d&#039;abord créer notre fichier fifofile. Pour cela, simplement exécuter la commande &quot;mkfifo&quot;.
</p>
<pre class="code">mkfifo /tmp/music-control</pre>

<p>
Ensuite, il faut lancer la commande de mplayer. Avoir un lecteur en background n&#039;a d&#039;interêt que s&#039;il est en background (tâche de fond, non dépendante d&#039;un terminal). Pour ce faire, ajouter un <a href="../projets/ecole/scripting/initiation_au_shell#presentation_de1" class="wikilink1" title="projets:ecole:scripting:initiation_au_shell">&amp;</a> en fin de ligne. 
</p>

<p>
Cependant, le stdout et le stderr nous intéressent, car ils permettent de récupérer le nom du titre joué, par exemple dans le cas d&#039;une chanson (cf fixme). Nous allons donc les rediriger vers deux fichiers distincts.
</p>
<pre class="code">mplayer -slave -input file=/tmp/music-control -shuffle -playlist ~/Musique/ma-playlist.m3u -idle &amp;&gt; ~/.mplayer/mplayer.log 2&gt; ~/.mplayer/mplayer-err.log</pre>

<p>
Pour contrôler mplayer, il suffit de rediriger le stdout d&#039;un echo vers le stdin du fifofile.
</p>
<pre class="code">echo &#039;macommande&#039; &gt; /tmp/music-control</pre>

<p>
Pour liste toutes les commandes, c&#039;est <code>mplayer -input cmdlist</code>. On notera &quot;seek&quot; pour se déplacer dans la chanson, &quot;volume&quot;, &quot;loadfile&quot; pour ouvrir un fichier, &quot;loadlist&quot; pour ouvrir une playlist. Pour plus d&#039;infos : <a href="http://www.mplayerhq.hu/DOCS/tech/slave.txt" class="urlextern" title="http://www.mplayerhq.hu/DOCS/tech/slave.txt"  rel="nofollow">en</a>.
</p>

<p>
On peut récupérer des infos sur le média en cours de lecture en utilisant les commandes <code>get_xxx</code> de mplayer (la liste est donnée plus bas) :
</p>
<pre class="code">echo &#039;get_meta_title&#039; &gt; /tmp/music-control</pre>

<p>
Cela affichera la ligne suivante dans ~/.mplayer/mplayer.log
</p>
<pre class="code">ANS_META_TITLE=&#039;Le titre de la chanson&#039;</pre>

<p>
On peut donc filtrer la sortie de la manière suivante :
</p>
<pre class="code">tac ~/.mplayer/mplayer.log | grep &quot;ANS_META_TITLE=&#039;&quot; | cut -d &quot;&#039;&quot; -f 2 | head -n 1</pre>

<p>
Notez l&#039;utilisation de tac, qui passe le fichier à grep en ordre inverse (dernière ligne en premier), c&#039;est plus rapide que de démarrer au début. Une autre solution consiste à utiliser un fifo comme sortie de mplayer (au lieu du fichier .log), mais il est (très) difficile d&#039;avoir le même script qui contrôle à la fois une fifo d&#039;entrée et de sortie, donc il faudra avoir deux scripts (un qui envoie les commandes, un qui affiche les infos).
</p>

<p>
Une autre solution, moins propre, consiste à rechercher à coup de &quot;grep&quot;, de &quot;tail&quot; et de &quot;cut&quot; les infos sur la dernière chanson : <code>grep &#039;^ Title&#039; ~/.mplayer/mplayer.log | cut -d &quot;:&quot; -f 2 | tail -n 1</code>
</p>

<p>
On peut récupérer la liste des get_xxx avec la commande <code>mplayer -input cmdlist</code> :
</p>
<pre class="code">get_percent_pos      # Position en pourcentage dans le fichier
get_time_pos         # Position en secondes et dixièmes de secondes
get_time_length      # Longueur totale en secondes et dixièmes
get_file_name        # Nom de fichier
get_video_codec      # Codec vidéo utilisé
get_video_bitrate    # Débit vidéo en KiloBits par seconde
get_video_resolution # Résolution de la vidéo en pixels
get_audio_codec      # Codec audio utilisé
get_audio_bitrate    # Débit audio en KiloBits par seconde
get_audio_samples    # Fréquence d&#039;échantillonnage et nombre de cannaux (1 = mono / 2 = stereo)
get_meta_title       # Titre
get_meta_artist      # Artiste
get_meta_album       # Album
get_meta_year        # Année
get_meta_comment     # Commentaire
get_meta_track       # Numéro de piste
get_meta_genre       # Genre</pre>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit" method="post" action="comment_utiliser_mplayer_en_esclave"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1283757795" /><input type="hidden" name="summary" value="[Mise en pratique] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="3482-6967" /><input type="submit" value="Modifier" class="button" title="Mise en pratique" /></div></form></div>
<h2 class="sectionedit8" id="aller_plus_loin">Aller plus loin</h2>
<div class="level2">

<p>
Cet aspect de mplayer nous permet de le contrôler via des scripts bash. 
Pour ne citer qu&#039;eux, il est possible
</p>
<ul>
<li class="level1"><div class="li">de passer à la chanson suivante</div>
</li>
</ul>
<pre class="code bash"><span class="co0">#!/bin/sh</span>
<span class="co0"># Aller au fichier suivant</span>
<span class="kw3">echo</span> <span class="st_h">'pt_step 1'</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>music-control
<span class="kw3">exit</span> <span class="nu0">0</span></pre>
<ul>
<li class="level1"><div class="li">de passer à la chanson précédente</div>
</li>
</ul>
<pre class="code bash"><span class="co0">#!/bin/sh</span>
<span class="co0"># Aller au fichier précédent</span>
<span class="kw3">echo</span> <span class="st_h">'pt_step -1'</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>music-control
<span class="kw3">exit</span> <span class="nu0">0</span></pre>
<ul>
<li class="level1"><div class="li">de mettre mplayer en pause</div>
</li>
</ul>
<pre class="code bash"><span class="co0">#!/bin/sh</span>
<span class="co0"># Mettre la lecture en pause ou la reprendre</span>
<span class="kw3">echo</span> <span class="st_h">'pause'</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>music-control
<span class="kw3">exit</span> <span class="nu0">0</span></pre>
<ul>
<li class="level1"><div class="li">d&#039;arrêter mplayer</div>
</li>
</ul>
<pre class="code bash"><span class="co0">#!/bin/sh</span>
<span class="co0"># Quitte mplayer</span>
<span class="kw3">echo</span> <span class="st_h">'quit'</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>music-control
<span class="kw3">exit</span> <span class="nu0">0</span></pre>

<p>
Ces petits scripts, combinés par exemple à zenity, permettent un excellent contrôle de mplayer. On notera par exemple la possibilité de créer un petit script qui affichera un navigateur et permettra d&#039;ouvrir un morceau, et de le jouer dans mplayer. Allez je suis gentil, je vous le donne aussi :p
</p>
<pre class="code bash"><span class="co0">#!/bin/sh</span>
<span class="co0"># Open a file</span>
<span class="kw3">echo</span> <span class="st0">&quot;loadfile '<span class="es5">`zenity --question --text=&quot;Si vous jouez une autre liste de lecture, la liste de lecture en cours sera effacée \!&quot; &amp;&amp; zenity --file-selection --title &quot;Sélectionnez le fichier à jouer.&quot;`</span>' 0&quot;</span> <span class="sy0">&gt;</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>music-control 
<span class="kw3">exit</span> <span class="nu0">0</span> </pre>

<p>
De même, une méthode pas très conventionnelle permet de récupérer dans le fichier log le titre de la dernière chanson. Exemple (décidément, je vous donne tout !), et pardonnez la mauvaise qualité de ces scripts.
</p>
<pre class="code bash"><span class="co0">#!/bin/sh</span>
<span class="co0"># Récupérer les informations de la chanson.</span>
&nbsp;
<span class="kw3">cd</span> ~<span class="sy0">/</span>.mplayer
<span class="re2">title</span>=<span class="sy0">`</span><span class="kw2">grep</span> Title mplayer.log <span class="sy0">|</span> <span class="kw2">cut</span> <span class="re5">-d</span> <span class="st0">&quot;:&quot;</span> <span class="re5">-f</span> <span class="nu0">2</span> <span class="sy0">|</span> <span class="kw2">tail</span> <span class="re5">-n</span> <span class="nu0">1</span><span class="sy0">`</span>
<span class="re2">artist</span>=<span class="sy0">`</span><span class="kw2">grep</span> Artist mplayer.log <span class="sy0">|</span> <span class="kw2">cut</span> <span class="re5">-d</span> <span class="st0">&quot;:&quot;</span> <span class="re5">-f</span> <span class="nu0">2</span> <span class="sy0">|</span> <span class="kw2">tail</span> <span class="re5">-n</span> <span class="nu0">1</span><span class="sy0">`</span>
<span class="re2">album</span>=<span class="sy0">`</span><span class="kw2">grep</span> Album mplayer.log <span class="sy0">|</span> <span class="kw2">cut</span> <span class="re5">-d</span> <span class="st0">&quot;:&quot;</span> <span class="re5">-f</span> <span class="nu0">2</span> <span class="sy0">|</span> <span class="kw2">tail</span> <span class="re5">-n</span> <span class="nu0">1</span><span class="sy0">`</span>
<span class="re2">year</span>=<span class="sy0">`</span><span class="kw2">grep</span> Year mplayer.log <span class="sy0">|</span> <span class="kw2">cut</span> <span class="re5">-d</span> <span class="st0">&quot;:&quot;</span> <span class="re5">-f</span> <span class="nu0">2</span> <span class="sy0">|</span> <span class="kw2">tail</span> <span class="re5">-n</span> <span class="nu0">1</span><span class="sy0">`</span>
<span class="re2">genre</span>=<span class="sy0">`</span><span class="kw2">grep</span> Genre mplayer.log <span class="sy0">|</span> <span class="kw2">cut</span> <span class="re5">-d</span> <span class="st0">&quot;:&quot;</span> <span class="re5">-f</span> <span class="nu0">2</span> <span class="sy0">|</span> <span class="kw2">tail</span> <span class="re5">-n</span> <span class="nu0">1</span><span class="sy0">`</span>
&nbsp;
<span class="co0">#L'afficher dans une fenêtre</span>
zenity <span class="re5">--info</span> <span class="re5">--text</span>=<span class="st0">&quot;<span class="es5">`echo $title&quot;\n&quot;$artist&quot;\n&quot;$album&quot;\n&quot;$year&quot;\n&quot;$genre`</span>&quot;</span> <span class="re5">--title</span>=<span class="st0">&quot;Current song&quot;</span> <span class="re5">--no-wrap</span></pre>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit" method="post" action="comment_utiliser_mplayer_en_esclave"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1283757795" /><input type="hidden" name="summary" value="[Aller plus loin] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="6968-8988" /><input type="submit" value="Modifier" class="button" title="Aller plus loin" /></div></form></div>
<h2 class="sectionedit9" id="infos_utiles">Infos utiles</h2>
<div class="level2">

<p>
A l&#039;aide de <a href="http://doc.ubuntu-fr.org/xbindkeys" class="wikilink1" title="xbindkeys">xbindkeys</a>, on peut facilement arriver à tout contrôler au clavier !
</p>
<ul>
<li class="level1"><div class="li"><a href="http://www.mplayerhq.hu" class="urlextern" title="http://www.mplayerhq.hu"  rel="nofollow">Le site officiel de mplayer</a></div>
</li>
<li class="level1"><div class="li"><a href="http://www.mplayerhq.hu/DOCS/man/fr/mplayer.1.html" class="urlextern" title="http://www.mplayerhq.hu/DOCS/man/fr/mplayer.1.html"  rel="nofollow">Des infos sur le mode &quot;slave&quot; et les commandes possibles</a></div>
</li>
<li class="level1"><div class="li"><a href="http://fr.wikipedia.org/wiki/Mplayer" class="urlextern" title="http://fr.wikipedia.org/wiki/Mplayer"  rel="nofollow">La page wikipédia de mplayer</a></div>
</li>
<li class="level1"><div class="li">Si vous êtes fainéants, <a href="http://doc.ubuntu-fr.org/_media/tutoriel/mplayer-script.tar" class="urlextern" title="http://doc.ubuntu-fr.org/_media/tutoriel/mplayer-script.tar"  rel="nofollow">vous trouverez des scripts pré-fait pour pas mal de fonctions</a></div>
</li>
</ul>
<hr />

<p>
<em>Contributeurs: <a href="http://doc.ubuntu-fr.org/utilisateurs/blackbg" class="wikilink1" title="utilisateurs:blackbg">blackbg</a></em>
</p>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit" method="post" action="comment_utiliser_mplayer_en_esclave"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1283757795" /><input type="hidden" name="summary" value="[Infos utiles] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="8989-" /><input type="submit" value="Modifier" class="button" title="Infos utiles" /></div></form></div>
<!-- cachefile /srv/www/doc.ubuntu-fr.org/htdocs/data/cache/9/9f484a90fb09015daf9ffbac7e0d0bf4.xhtml used -->

        <br style="clear:both;" />
        <div id="pageinfo">
            <!--  |  | -->
            <!-- ?tpl_pageinfo()? -->
            <br />
            Le contenu de ce wiki est sous licence : <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" rel="license" target="_blank">CC BY-SA v3.0</a>
        </div> 
      </div>

      
      <div id="navigation">

        <ul>
          <li class="menu"><a href="http://www.ubuntu-fr.org" class="title" id="menu-accueil"><span>Accueil</span></a></li>
          <li class="menu" id="active">
            <a href="../index.html"  class="title" id="menu-doc"><span>Documentation</span></a>
            <ul>
              <li id="navWiki" class="cat">
                <h2>Actions</h2>
                <ul>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/comment_utiliser_mplayer_en_esclave?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/comment_utiliser_mplayer_en_esclave?do=edit&amp;rev=0"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/comment_utiliser_mplayer_en_esclave?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li>
                  <li></li>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/comment_utiliser_mplayer_en_esclave?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/comment_utiliser_mplayer_en_esclave?do=backlink"  class="action backlink" rel="nofollow" title="Liens vers cette page">Liens vers cette page</a></li>
                  <li></li>
                  <li></li>
                  <li></li>
                </ul>
              </li>
              <li id="navDivers" class="cat">
                <h2>Divers</h2>
                <ul>
                  <li><bdi><a href="../wiki/participer_wiki" class="wikilink1" title="wiki:participer_wiki">Participer à la documentation</a></bdi></li>
                  <li><bdi><a href="../documentation_hors_ligne" class="wikilink1" title="documentation_hors_ligne">Documentation hors ligne</a></bdi></li>
                  <li><a href="http://www.ubuntu-fr.org/telechargement" title="T&eacute;l&eacute;charger Ubuntu">T&eacute;l&eacute;charger Ubuntu</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="menu"><a href="http://forum.ubuntu-fr.org"  class="title" id="menu-forum"><span>Forum</span></a></li>
          <li class="menu"><a href="http://planet.ubuntu-fr.org"  class="title" id="menu-planet"><span>Planet</span></a></li>
        </ul>

      </div>
      <div id="references-ufr">
        <ul id="legal-ufr">
          <li><a href="http://www.ubuntu-fr.org/contacts">Contact</a></li>
        </ul>

        <ul id="sponsors-ufr">
          <li><a href="http://www.dokuwiki.org/dokuwiki" id="dokuwiki">Propulsé par Dokuwiki</a></li>
        </ul>
      </div>

    </div>
    <!-- $Id$ -->

    <!-- Piwik Image Tracker -->
    <!-- img src="http://piwik.infra.ubuntu-fr.org/piwik.php?idsite=2&amp;rec=1" style="border:0" alt="" /-->
    <!-- End Piwik -->

  </body>
</html>
