<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript"/>
    <meta http-equiv="Content-Style-Type" content="text/css"/>
    <meta http-equiv="Content-Language" content="fr"/>
    <title>tutoriel:comment_sauver_et_restaurer_la_liste_des_paquets - Documentation Ubuntu Francophone</title>
    <meta name="Description" content="Documentation francophone pour la distribution Ubuntu" lang="fr" />
    <meta name="language" content="fr-FR" />

    <!--[if IE 8]>
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <![endif]-->
        <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="noindex,nofollow"/>
<link rel="search" type="application/opensearchdescription+xml" href="../lib/exe/opensearch.php" title="Documentation Ubuntu Francophone"/>
<link rel="start" href="../index.html"/>
<link rel="contents" href="comment_sauver_et_restaurer_la_liste_des_paquets?do=index" title="Plan du site"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Namespace actuel" href="../feed.php?mode=list&amp;ns=tutoriel"/>
<link rel="alternate" type="text/html" title="HTML brut" href="../_export/xhtml/tutoriel/comment_sauver_et_restaurer_la_liste_des_paquets"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="../_export/raw/tutoriel/comment_sauver_et_restaurer_la_liste_des_paquets"/>
<link rel="stylesheet" type="text/css" href="../lib/exe/css.php?t=ubuntu-2010&amp;tseed=4af22dedc19f28c99fa67afabbb173df"/>
<script type="text/javascript">/*<![CDATA[*/var NS='tutoriel';var JSINFO = {"id":"tutoriel:comment_sauver_et_restaurer_la_liste_des_paquets","namespace":"tutoriel"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../lib/exe/js.php?tseed=4af22dedc19f28c99fa67afabbb173df"></script>
    <link rel="shortcut icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/icone.png" type="image/x-icon" />
    <link rel="apple-touch-icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/touch-ico.png" />

    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc.css" />
    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-ubuntu.css" />
    <link rel="stylesheet" media="print" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-print.css" />

    <script type="text/javascript">
      var menu_hidden;
      var static_url = "UFR_STATIC";
    </script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/menu.js" type="text/javascript"></script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/common.js" type="text/javascript"></script>
  </head>
  <body>

    <div id="accessibar">
      <a href="comment_sauver_et_restaurer_la_liste_des_paquets?do=edit#main" tabindex="1">Contenu</a> | <a href="comment_sauver_et_restaurer_la_liste_des_paquets?do=edit#qsearch__in" tabindex="2">Rechercher</a> | <a href="comment_sauver_et_restaurer_la_liste_des_paquets?do=edit#navigation" tabindex="3">Menus</a>
    </div>

    <div id="page">

      <div id="header">

        <div id="logo">
          <h1>Ubuntu-fr</h1>
          <a href="../index.html" title="Accueil de la documentation">Communauté francophone d'utilisateurs d'Ubuntu</a>
        </div>

        <form action="http://ubuntu-fr.org/recherche" accept-charset="utf-8" id="search" onsubmit="if (document.getElementById('qsearch__in').value == 'Recherche rapide....') {document.getElementById('qsearch__in').value = '';}">
          <fieldset>
            <label for="qsearch__in">Recherche : </label><input type="text" value="Recherche rapide...." id="qsearch__in" accesskey="f" name="sk_q" alt="[F]" size="34" tabindex="4" />
            <label for="tsearch_field">Chercher dans : </label><select name="sk_engine" tabindex="5" id="tsearch_field" title="Chercher dans">
              <option value="all">Site</option>
              <option selected="selected" value="doc">Documentation</option>
              <option value="forum">Forum</option>
              <option value="planet">Planet</option>
            </select>
            <input type="submit" value="ok" class="button" alt="Lancer la recherche" tabindex="5" />
          </fieldset>
        </form>
        <!--[if lte IE 7]><div class="clear"></div><![endif]-->

        <form action="comment_sauver_et_restaurer_la_liste_des_paquets?do=edit" accept-charset="utf-8" id="login_top" method="post">
          <fieldset>
            <label for="u_field">Identifiant : </label><input type="text" value="Identifiant" name="u" id="u_field" size="9" /><label for="p_field">Mot de passe : </label><input type="password" value="Mot de passe" name="p" id="p_field" size="9" alt="Mot de passe" /><input type="submit" value="connexion" id="connect" /> / <a href="http://forum.ubuntu-fr.org/register.php">inscription</a>
          </fieldset>
        </form>
 

      </div>

      <div id="navbar">
          <h2 id="pagetitle"><a href="comment_sauver_et_restaurer_la_liste_des_paquets" >tutoriel:comment_sauver_et_restaurer_la_liste_des_paquets</a></h2>
      </div>

      
      <div id="main" class="dokuwiki">

        <div id="hidemenu" title="Masquer le menu"></div>

        <div id="pagerror"></div>
                
<p>
<strong>Quelques recommandations avant de créer ou de modifier cette page :</strong>
</p>
<ol>
<li class="level1"><div class="li"> Lisez le <a href="../wiki/participer_wiki" class="wikilink1" title="wiki:participer_wiki">guide du contributeur</a> et la <a href="../wiki/ligne_editoriale" class="wikilink1" title="wiki:ligne_editoriale">ligne éditoriale</a>.</div>
</li>
<li class="level1"><div class="li"> Découvrez la <a href="http://doc.ubuntu-fr.org/wiki/syntaxe" class="wikilink1" title="wiki:syntaxe">syntaxe</a> et entraînez-vous dans le <a href="../playground/playground" class="wikilink1" title="playground:playground">bac à sable</a>.</div>
</li>
<li class="level1"><div class="li"> Utilisez les modèles (<a href="../wiki/modeles/application" class="wikilink1" title="wiki:modeles:application">application</a>, <a href="../wiki/modeles/materiel" class="wikilink1" title="wiki:modeles:materiel">matériel</a>, <a href="../wiki/modeles/portable" class="wikilink1" title="wiki:modeles:portable">ordinateur portable</a>, <a href="../wiki/modeles/tutoriel" class="wikilink1" title="wiki:modeles:tutoriel">tutoriel</a>, <a href="../wiki/modeles/utilisateur" class="wikilink1" title="wiki:modeles:utilisateur">utilisateur</a>, <a href="../wiki/modeles/portail" class="wikilink1" title="wiki:modeles:portail">portail</a>) et les <a href="../wiki/mini-tutoriels" class="wikilink1" title="wiki:mini-tutoriels">mini-tutoriels</a>.</div>
</li>
<li class="level1"><div class="li"> Rapportez toutes créations ou modifications importantes sur <a href="../wiki/liste_discussion#coordination_de_la_documentation" class="wikilink1" title="wiki:liste_discussion">la liste de discussion</a>.</div>
</li>
</ol>

<!-- cachefile /srv/www/doc.ubuntu-fr.org/htdocs/data/cache/f/fcdb5fe1d67011f56447459483d05597.xhtml used -->
<script type="text/javascript">/*<![CDATA[*/
textChanged = false/*!]]>*/</script>
    <div class="editBox" role="application">

    <div class="toolbar group">
        <div id="draft__status"></div>
        <div id="tool__bar"><a href="http://doc.ubuntu-fr.org/lib/exe/mediamanager.php?ns=tutoriel"
            target="_blank">Sélection de fichiers</a></div>
    </div>
    <form id="dw__editform" method="post" action="comment_sauver_et_restaurer_la_liste_des_paquets?do=edit" accept-charset="utf-8"><div class="no">
<input type="hidden" name="sectok" value="3bbdeeb4168d06af7a8bbdbdb8925be6" /><input type="hidden" name="id" value="tutoriel:comment_sauver_et_restaurer_la_liste_des_paquets" /><input type="hidden" name="rev" value="0" /><input type="hidden" name="date" value="1425050757" /><input type="hidden" name="prefix" value="." /><input type="hidden" name="suffix" value="" /><input type="hidden" name="changecheck" value="2a5a4b7663afde3201fc63ddcb2d48d8" /><input type="hidden" name="target" value="section" /><textarea name="wikitext" id="wiki__text" dir="auto" class="edit" cols="80" rows="10" tabindex="1">
{{tag&gt;Lucid Precise Quantal Raring système administration tutoriel sauvegarde paquet dépôts}}

----

====== Sauvegarde et restauration de la liste des paquets installés pour restauration, duplication ou migration ======


Votre système est installé et vous avez ajouté au fil du temps des applications pour votre utilisation quotidienne. **Ce tutoriel vous sera utile dans les cas suivants :**

  * Vous souhaitez tout simplement sauvegarder la liste de vos applications au cas où vous devriez réinstaller entièrement votre système.
  * ou : La nouvelle version d'Ubuntu vient de sortir et vous aimeriez pouvoir l'installer sans passer par le gestionnaire de mises à jour, mais via une [[:reinstallation_ubuntu|réinstallation du système]] puis des logiciels.
  * ou : Vous souhaitez installer la même version d'Ubuntu sur un autre ordinateur et y placer également vos applications préférées.



&gt;===== Pré-requis =====

  - Niveau requis : être familiarisé avec  [[:terminal | le terminal]]
  - Avoir une connexion internet opérationnelle.
  - Avoir les [[:sudo|droits d'administration]]
  - Avoir configuré son fichier /etc/apt/sources.list (ou /etc/apt/sources.list.d ) pour les dépôts standards Ubuntu (ou Kubuntu ou Xubuntu)
  - Pour un changement de version ou un clonage sur un autre PC, si vous utilisiez des [[:depots|dépôts]] spécifiques, le fichier [[:sources.list]] de la nouvelle version devra être adaptée ainsi que les [[:tutoriel:comment_modifier_sources_maj#gerer_les_cles_d_authentification|clés d'authentification]] correspondantes
===== Sauvegarde =====

Récupérez la liste des paquets installés sur le système :

  dpkg --get-selections &gt; liste-des-paquets

Cela crée un fichier &quot;liste-des-paquets&quot; dans le répertoire courant. Il contient la liste des paquets installés.

&lt;note tip&gt;Cette méthode a l'air plus précise quant à la sélection des paquets : http://forum.ubuntu-fr.org/viewtopic.php?id=473811&lt;/note&gt;

== Si votre but est une sauvegarde pour une réinstallation ==

Sauvegardez ce fichier (ainsi que le sources.list) sur un support externe (usb, web, etc.)

Le fichier sources.list se trouve dans /etc/apt.

== Si votre but est un changement de version ou un clonage sur un autre PC ==

FIXME : Méthode à valider voir : [[http://forum.ubuntu-fr.org/viewtopic.php?pid=3318587]]

Éditez ce fichier et faites le ménage...

Ne conservez __que vos__ paquets. Ceux que vous avez rajouté et qui ne font pas partie de l'installation standard d'Ubuntu (les paquets systèmes, les paquets libxxxx, les paquets gnome-xxxxx, Firefox, et caetera)

Voici un extrait en exemple d'un fichier &quot;liste-des-paquets&quot; modifié :
&lt;file&gt;
   acidrip                                      install
   chromium-browser                             install
   chromium-browser-l10n                        install
   chromium-codecs-ffmpeg                       install
   easytag                                      install
   filezilla                                    install
   filezilla-common                             install
&lt;/file&gt;
Sauvegardez ce fichier (ainsi que le sources.list) sur un support externe (usb, web, etc.)

===== Restauration =====

&lt;note tip&gt;Si vous réinstallez une version identique, remplacez le fichier sources.list par le votre.

Si vous changez de version, adaptez si besoin le fichier sources.list avec vos dépôts spécifiques.
&lt;/note&gt;

Récupérez votre fichier &quot;liste-des-paquets&quot; puis :


     # sudo apt-get update
     # sudo dpkg --set-selections &lt; liste-des-paquets
     # sudo apt-get -u dselect-upgrade

Normalement vos applications préférées sont restaurées et si vous avez une sauvegarde de votre partition &quot;home&quot;, vous pourrez également récupérer vos paramétrages spécifiques.

**NOTE :**

Si certains paquets ne sont pas présents dans la base de données mais bien disponible dans les dépôts, à la place de
  sudo apt-get update
on peut faire,
  sudo dselect update

**NOTE 2 :**

Si votre liste est trop volumineuse, enlever des paquets de votre fichier, puis faites:
     # sudo dpkg --clear-selections
     # sudo dpkg --set-selections &lt; liste-des-paquets
     # sudo apt-get -u dselect-upgrade

&lt;note important&gt;
Attention : la commande &quot;''sudo dpkg --clear-selections''&quot; est potentiellement très dangereuse : elle modifie le fichier /var/lib/dpkg/status en positionnant tous les paquets sur &quot;à supprimer&quot; ! 

Si derrière est exécuté un &quot;''sudo apt-get -u dselect-upgrade''&quot; sans au préalable avoir fait un &quot;''sudo dpkg --set-selections &lt; liste-des-paquets''&quot;, on efface tous les paquets !

Pour s'en sortir en cas de &quot;''sudo dpkg --clear-selections''&quot; sans avoir un fichier &quot;liste-des-paquets&quot; complet et valide, la solution consiste à renommer &quot;''/var/lib/dpkg/status.old''&quot; en &quot;''/var/lib/dpkg/status''&quot; si cela vient d'arriver, ou bien d'aller chercher une sauvegarde créée automatiquement dans &quot;''/var/backups/''&quot;
&lt;/note&gt;

&lt;note important&gt;
L'utilisation de cette procédure de restauration sous 11.10 et au delà (vécu sous 12.04) avec l'architecture amd64 peut conduire à ce bogue [[https://bugs.launchpad.net/ubuntu/+source/apt/+bug/877681]] ; dpkg préfère les paquets i386 aux paquets amd64... Entraînant une impossibilité de ré-installation (conflit de paquets insolubles ou suppression de paquets nécessaire à la suite de l'installation).\\
Dans la mesure ou le bogue est ouvert depuis la 11.10, qu'il n'est pas considéré comme urgent et pas assigné (pas prés d'être corrigé) autant le contourner.

Le contournement consiste, sur le système cible, dans le fichier &quot;''/etc/dpkg/dpkg.cfg.d/multiarch''&quot; à commenter (mettre un # devant) la ligne :\\
&quot;''foreign-architecture i386''&quot;\\
Avant d’exécuter\\
&quot;''# sudo dpkg --set-selections &lt; liste-des-paquets''&quot;\\
et la suite de la procédure
&lt;/note&gt;
===== Voir aussi =====

  * [[:Sauvegarde]] : sauvegarder vos données sur Ubuntu
  * [[:Reinstallation ubuntu]] (réinstallation d'Ubuntu sans perdre son /home)
  * Le site [[http://ubuntu.allmyapps.com/install-pc|allmyapps pour ubuntu]] permet aussi de sauvegarder une liste de logiciels à installer, liste qu'on peut ensuite relancer sur n'importe quelle machine équipée d'Ubuntu.
===== Autres pages en lien avec les sujets =====

{{backlinks&gt;.}}

----

//Contributeurs : [[utilisateurs:ostaquet]] (L'auteur), [[utilisateurs:bobil78]], [[utilisateurs:mr_jay_01]], [[utilisateurs:sylvainsjc]], [[utilisateurs:YoBoY]], [[utilisateurs:bioman]], [[utilisateurs:lami|L'ami René]] (MAJ mise en page)+(Autres pages en lien avec les sujets), [[utilisateurs:draco31.fr]], [[utilisateurs:pipou24]].//</textarea>
<div id="wiki__editbar" class="editBar">
<div id="size__ctl">
</div>
<div class="editButtons">
<div id="plugin__captcha_wrapper"><input type="hidden" name="f6425081ecb07dbf5e2ae65cdb685f07" value="dYD315FaXZNbHaVPVd70vXOqJb/wAl4ZujpK8SBMqXs=" /><label for="plugin__captcha">Merci de recopier le code ci-contre pour prouver que vous êtes humain :</label> <span id="plugin__captcha_code">SZ A B A</span> <input type="text" size="5" name="23bbc34cbfaa25173a0966cfb368c706" class="edit" /> <label class="no">Merci de laisser ce champ vide : <input type="text" name="528418fcf4cda2dcb8374dabfead8e80" /></label></div><input name="do[save]" type="submit" value="Enregistrer" class="button" id="edbtn__save" accesskey="s" tabindex="4" title="Enregistrer [S]" />
<input name="do[preview]" type="submit" value="Aperçu" class="button" id="edbtn__preview" accesskey="p" tabindex="5" title="Aperçu [P]" />
<input name="do[draftdel]" type="submit" value="Annuler" class="button" tabindex="6" />
</div>
<div class="summary">
<label class="nowrap" for="edit__summary"><span>Résumé</span> <input type="text" id="edit__summary" name="summary" class="edit" size="50" tabindex="2" /></label>
</div>
</div>
<div class="license">
Note : En modifiant cette page, vous acceptez que le contenu soit placé sous les termes de la licence suivante : <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" rel="license" class="urlextern">CC Paternité-Partage des Conditions Initiales à l'Identique 3.0 Unported</a></div>
</div></form>
</div>
<script type="text/javascript">
   var saveBtn = document.getElementById('edbtn__save');
   saveBtn.disabled = true;
   saveBtn.style.color = 'gray';
   saveBtn.style.backgroundColor = '#EEEEEE';
   saveBtn.value = 'Enregistrer (Click \'Aperçu\' first)';
</script>
        <br style="clear:both;" />
        <div id="pageinfo">
            <!--  |  | -->
            <!-- ?tpl_pageinfo()? -->
            <br />
            Le contenu de ce wiki est sous licence : <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" rel="license" target="_blank">CC BY-SA v3.0</a>
        </div> 
      </div>

      
      <div id="navigation">

        <ul>
          <li class="menu"><a href="http://www.ubuntu-fr.org" class="title" id="menu-accueil"><span>Accueil</span></a></li>
          <li class="menu" id="active">
            <a href="../index.html"  class="title" id="menu-doc"><span>Documentation</span></a>
            <ul>
              <li id="navWiki" class="cat">
                <h2>Actions</h2>
                <ul>
                  <li><a href="comment_sauver_et_restaurer_la_liste_des_paquets?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/comment_sauver_et_restaurer_la_liste_des_paquets?do="  class="action show" accesskey="v" rel="nofollow" title="Afficher la page [V]">Afficher la page</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/comment_sauver_et_restaurer_la_liste_des_paquets?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li>
                  <li></li>
                  <li><a href="comment_sauver_et_restaurer_la_liste_des_paquets?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/tutoriel/comment_sauver_et_restaurer_la_liste_des_paquets?do=backlink"  class="action backlink" rel="nofollow" title="Liens vers cette page">Liens vers cette page</a></li>
                  <li></li>
                  <li></li>
                  <li></li>
                </ul>
              </li>
              <li id="navDivers" class="cat">
                <h2>Divers</h2>
                <ul>
                  <li><bdi><a href="../wiki/participer_wiki" class="wikilink1" title="wiki:participer_wiki">Participer à la documentation</a></bdi></li>
                  <li><bdi><a href="../documentation_hors_ligne" class="wikilink1" title="documentation_hors_ligne">Documentation hors ligne</a></bdi></li>
                  <li><a href="http://www.ubuntu-fr.org/telechargement" title="T&eacute;l&eacute;charger Ubuntu">T&eacute;l&eacute;charger Ubuntu</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="menu"><a href="http://forum.ubuntu-fr.org"  class="title" id="menu-forum"><span>Forum</span></a></li>
          <li class="menu"><a href="http://planet.ubuntu-fr.org"  class="title" id="menu-planet"><span>Planet</span></a></li>
        </ul>

      </div>
      <div id="references-ufr">
        <ul id="legal-ufr">
          <li><a href="http://www.ubuntu-fr.org/contacts">Contact</a></li>
        </ul>

        <ul id="sponsors-ufr">
          <li><a href="http://www.dokuwiki.org/dokuwiki" id="dokuwiki">Propulsé par Dokuwiki</a></li>
        </ul>
      </div>

    </div>
    <!-- $Id$ -->

    <!-- Piwik Image Tracker -->
    <!-- img src="http://piwik.infra.ubuntu-fr.org/piwik.php?idsite=2&amp;rec=1" style="border:0" alt="" /-->
    <!-- End Piwik -->

  </body>
</html>
