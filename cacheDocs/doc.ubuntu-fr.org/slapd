<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript"/>
    <meta http-equiv="Content-Style-Type" content="text/css"/>
    <meta http-equiv="Content-Language" content="fr"/>
    <title>slapd - Documentation Ubuntu Francophone</title>
    <meta name="Description" content="Documentation francophone pour la distribution Ubuntu" lang="fr" />
    <meta name="language" content="fr-FR" />

    <!--[if IE 8]>
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <![endif]-->
        <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2014-08-02T15:21:13+0200"/>
<meta name="keywords" content="feisty,dapper,edgy,serveur,reseau,brouillon"/>
<link rel="search" type="application/opensearchdescription+xml" href="lib/exe/opensearch.php" title="Documentation Ubuntu Francophone"/>
<link rel="start" href="index.html"/>
<link rel="contents" href="http://doc.ubuntu-fr.org/slapd?do=index" title="Plan du site"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Namespace actuel" href="feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="http://doc.ubuntu-fr.org/slapd?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="http://doc.ubuntu-fr.org/_export/xhtml/slapd"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="http://doc.ubuntu-fr.org/_export/raw/slapd"/>
<link rel="canonical" href="slapd"/>
<link rel="stylesheet" type="text/css" href="lib/exe/css.php?t=ubuntu-2010&amp;tseed=4af22dedc19f28c99fa67afabbb173df"/>
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"id":"slapd","namespace":""};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="lib/exe/js.php?tseed=4af22dedc19f28c99fa67afabbb173df"></script>
    <link rel="shortcut icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/icone.png" type="image/x-icon" />
    <link rel="apple-touch-icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/touch-ico.png" />

    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc.css" />
    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-ubuntu.css" />
    <link rel="stylesheet" media="print" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-print.css" />

    <script type="text/javascript">
      var menu_hidden;
      var static_url = "UFR_STATIC";
    </script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/menu.js" type="text/javascript"></script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/common.js" type="text/javascript"></script>
  </head>
  <body>

    <div id="accessibar">
      <a href="slapd#main" tabindex="1">Contenu</a> | <a href="slapd#qsearch__in" tabindex="2">Rechercher</a> | <a href="slapd#navigation" tabindex="3">Menus</a>
    </div>

    <div id="page">

      <div id="header">

        <div id="logo">
          <h1>Ubuntu-fr</h1>
          <a href="index.html" title="Accueil de la documentation">Communauté francophone d'utilisateurs d'Ubuntu</a>
        </div>

        <form action="http://ubuntu-fr.org/recherche" accept-charset="utf-8" id="search" onsubmit="if (document.getElementById('qsearch__in').value == 'Recherche rapide....') {document.getElementById('qsearch__in').value = '';}">
          <fieldset>
            <label for="qsearch__in">Recherche : </label><input type="text" value="Recherche rapide...." id="qsearch__in" accesskey="f" name="sk_q" alt="[F]" size="34" tabindex="4" />
            <label for="tsearch_field">Chercher dans : </label><select name="sk_engine" tabindex="5" id="tsearch_field" title="Chercher dans">
              <option value="all">Site</option>
              <option selected="selected" value="doc">Documentation</option>
              <option value="forum">Forum</option>
              <option value="planet">Planet</option>
            </select>
            <input type="submit" value="ok" class="button" alt="Lancer la recherche" tabindex="5" />
          </fieldset>
        </form>
        <!--[if lte IE 7]><div class="clear"></div><![endif]-->

        <form action="slapd" accept-charset="utf-8" id="login_top" method="post">
          <fieldset>
            <label for="u_field">Identifiant : </label><input type="text" value="Identifiant" name="u" id="u_field" size="9" /><label for="p_field">Mot de passe : </label><input type="password" value="Mot de passe" name="p" id="p_field" size="9" alt="Mot de passe" /><input type="submit" value="connexion" id="connect" /> / <a href="http://forum.ubuntu-fr.org/register.php">inscription</a>
          </fieldset>
        </form>
 

      </div>

      <div id="navbar">
          <h2 id="pagetitle"><a href="slapd" >slapd</a></h2>
      </div>

      
      <div id="main" class="dokuwiki">

        <div id="hidemenu" title="Masquer le menu"></div>

        <div id="pagerror"></div>
                <div class="notetag">Selon les <a href="tags">tags</a> présents sur cette page, celle-ci est ancienne et ne contient plus d'informations sur une des  <a href="versions">versions supportées d'Ubuntu</a>.<br />
Cette page est en cours de rédaction.<br />
<a href="wiki/participer_wiki">Apportez votre aide…</a>
</div>
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table des matières</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="slapd#introduction">Introduction</a></div></li>
<li class="level1"><div class="li"><a href="slapd#installation">Installation</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="slapd#pour_intrepid_ibex_et_superieur">Pour Intrepid Ibex et supérieur</a></div></li>
<li class="level2"><div class="li"><a href="slapd#pour_hardy_heron_et_inferieur">Pour Hardy Heron et inférieur</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="slapd#remplir_ldap">Remplir LDAP</a></div></li>
<li class="level1"><div class="li"><a href="slapd#utiliser_votre_serveur_ldap">Utiliser votre serveur LDAP</a></div></li>
<li class="level1"><div class="li"><a href="slapd#replication_des_donnees_ldap">Réplication des données LDAP</a></div></li>
<li class="level1"><div class="li"><a href="slapd#liens">Liens</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->
<div class="tags"><span>
	<a href="feisty" class="wikilink1" title="feisty" rel="tag">Feisty</a>,
	<a href="dapper" class="wikilink1" title="dapper" rel="tag">Dapper</a>,
	<a href="http://doc.ubuntu-fr.org/edgy" class="wikilink1" title="edgy" rel="tag">Edgy</a>,
	<a href="serveur" class="wikilink1" title="serveur" rel="tag">serveur</a>,
	<a href="reseau" class="wikilink1" title="reseau" rel="tag">réseau</a>,
	<a href="brouillon" class="wikilink1" title="brouillon" rel="tag">BROUILLON</a>
</span></div>
<hr />

<h1 class="sectionedit1" id="un_serveur_d_annuaire_avec_openldap">Un serveur d&#039;annuaire avec OpenLDAP</h1>
<div class="level1">

<p>
Ce document est la traduction du HowTo présenté à l&#039;adresse <a href="https://wiki.ubuntu.com/OpenLDAPServer" class="urlextern" title="https://wiki.ubuntu.com/OpenLDAPServer"  rel="nofollow">https://wiki.ubuntu.com/OpenLDAPServer</a>. 
</p>

<p>
Il a été traduit par <a href="http://doc.ubuntu-fr.org/utilisateurs/sp4rky" class="wikilink1" title="utilisateurs:sp4rky">Sp4rKy</a> puis remis (un peu) en page et déplacé par <a href="http://doc.ubuntu-fr.org/utilisateurs/bastnic" class="wikilink1" title="utilisateurs:bastnic">bastnic</a>. 
Il a été mis a jour par <a href="http://doc.ubuntu-fr.org/utilisateurs/kenny432" class="wikilink1" title="utilisateurs:kenny432">Kenny432</a> pour Ubuntu 8.10 . 
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit" method="post" action="slapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1406985673" /><input type="hidden" name="summary" value="[Un serveur d'annuaire avec OpenLDAP] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="62-408" /><input type="submit" value="Modifier" class="button" title="Un serveur d'annuaire avec OpenLDAP" /></div></form></div>
<h2 class="sectionedit2" id="introduction">Introduction</h2>
<div class="level2">

<p>
<abbr title="Lightweight Directory Access Protocol">LDAP</abbr> signifie Lightweight Directory Access Protocol, c&#039;est une version simplifiée du protocole X500. Vous pourrez trouver une présentation détaillée sur <a href="http://fr.wikipedia.org/wiki/LDAP" class="urlextern" title="http://fr.wikipedia.org/wiki/LDAP"  rel="nofollow">Wikipédia</a> .
</p>

<p>
Pour expliquer rapidement, toutes les informations sont stockées dans un arbre. Vous devez déterminer l&#039;arborescence des annuaires ou, autrement dit, des informations de l&#039;arbre (Directory Information Tree) . 
Nous allons commencer ici avec un exemple simple contenant seulement 2 nœuds en plus de la racine :
</p>
<ul>
<li class="level1"><div class="li"> Le nœud &quot;People&quot; , où seront stockés vos utilisateurs</div>
</li>
<li class="level1"><div class="li"> Le nœud &quot;Groups&quot; , où seront enregistrés vos groupes</div>
</li>
</ul>

<p>
Vous devez commencer par déterminer ce que sera la racine de votre <abbr title="Lightweight Directory Access Protocol">LDAP</abbr>. Par défaut, votre arbre peut être déterminé à partir de votre domaine Internet. Si votre domaine est exemple.com , votre racine sera  dc=exemple,dc=com .
</p>

<p>
<p><div class="noteimportant">Dans le cas où le nom de domaine déclaré sur la machine n&#039;est pas celui que l&#039;on souhaite utiliser, il faut modifier le nom dans les fichiers &quot;/etc/hostname&quot; et &quot;/etc/hosts&quot; et redémarrer le serveur AVANT l&#039;installation des paquets.
Dans le cas contraire, il risque d&#039;y avoir une contradiction entre le nom choisi à l&#039;installation (ou demandé par dpkg-reconfigure) et celui récupéré automatiquement par l&#039;installation du paquet (dc=lenomdedomaine,dc=extenion). je n&#039;ai pas réussi à modifier cela dans la base <abbr title="Lightweight Directory Access Protocol">LDAP</abbr>. solutionné par tout désinstaller, renommer puis réinstaller.
</div></p>
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit" method="post" action="slapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1406985673" /><input type="hidden" name="summary" value="[Introduction] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="409-1931" /><input type="submit" value="Modifier" class="button" title="Introduction" /></div></form></div>
<h2 class="sectionedit3" id="installation">Installation</h2>
<div class="level2">

<p>
Avant tout, installons le daemon du serveur ldap (slapd) sur le serveur. Pour cela, il suffit d&#039;<a href="tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installer les paquets</a> <strong> <a href="apt://slapd,ldap-utils" class="urlextern" title="apt://slapd,ldap-utils"  rel="nofollow">apt://slapd,ldap-utils</a></strong>.
</p>

<p>
On vous demandera votre mot de passe administrateur et votre nom de domaine. Renseignez-les. Parfois on ne vous demandera que le mot de passe et on ne vous demandera rien concernant le nom de domaine car l&#039;installeur récupère directement le nom de domaine de la machine. Si vous souhaitez renseigner ces champs faites :
</p>
<pre class="code">sudo dpkg-reconfigure slapd</pre>

<p>
Voici brièvement les réponses attendues pour une installation standard :
</p>
<pre class="code">1.Passer la configuration d&#039;OpenLDAP ? non
2.Nom de domaine ? example.com
3.Nom de votre société ? masociété 
4.Quelle base de donnée ? hdb 
5.Voulez-vous que la base de donnée soit effacée lorsque slapd est purgé ? oui 
6.Supprimer les anciennes bases de données ? oui
7.Mot de passe administrateur ? VotreMotDePasse
8.Confirmer ce mot de passe ? VotreMotDePasse
9.Authoriser le protocol LDAPv2 ? non</pre>

<p>
<a href="http://doc.ubuntu-fr.org/_detail/icons/icontip.png?id=slapd" class="media" title="icons:icontip.png"><img src="http://doc.ubuntu-fr.org/_media/icons/icontip.png" class="medialeft" title="Conseil" alt="Conseil" /></a>
</p>
<blockquote><div class="no">
 Sur Feisty, la commande précédente demande des informations comme le mot de passe de l&#039;administrateur ldap ou le nom de domaine. Cependant, sur ma machine, le fichier de configuration n&#039;est pas modifié en conséquence. La suite est donc à effectuer tout de même.</div></blockquote>

<p>
Mais seulement quelques changements seront effectués sur la configuration par défaut. Tout le reste va se jouer dans le fichier <code>/etc/ldap/slapd.conf</code>.
</p>

<p>
Nous allons commencer par enregistrer le mot de passe administrateur (de <abbr title="Lightweight Directory Access Protocol">LDAP</abbr>) dans le fichier de configuration en éditant ce fichier. Ce serait une folie de vouloir enregistrer votre mot de passe en clair donc nous allons générer votre mot de passe en chiffré avec la commande :
</p>
<pre class="code">sudo slappasswd</pre>

<p>
On obtient quelque chose dans ce genre :
</p>
<pre class="code">$ sudo slappasswd
New password:
Re-enter password:
{SSHA}d2BamRTgBuhC6SxC0vFGWol31ki8iq5m</pre>

<p>
Cet exemple montre la définition de votre mot de passe en utilisant le mot de passe &quot;secret&quot;. (D&#039;après l&#039;implémentation de SSHA, votre résultat peut varier) .
</p>

<p>
<p><div class="noteimportant">Depuis Ubuntu Linux Intrepid Ibex, l&#039;installation de slapd ne crée pas de fichier <strong>slapd.conf</strong>, tous les éléments de configuration sont désormais dans le dossier <strong>/etc/ldap/slapd.d/</strong>. Pour ceux qui rencontrent ce problème voici une solution ( en anglais ) : <a href="http://ralf.schaeftlein.de/2009/02/04/howto-setup-a-openldap-server-for-ubuntu-810/" class="urlextern" title="http://ralf.schaeftlein.de/2009/02/04/howto-setup-a-openldap-server-for-ubuntu-810/"  rel="nofollow">OpenLDAP ubuntu 8.10</a>
</div></p>
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit" method="post" action="slapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1406985673" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="1932-4508" /><input type="submit" value="Modifier" class="button" title="Installation" /></div></form></div>
<h3 class="sectionedit4" id="pour_intrepid_ibex_et_superieur">Pour Intrepid Ibex et supérieur</h3>
<div class="level3">

<p>
<a href="tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">Éditez</a> le fichier <strong>

/etc/ldap/ldap.conf</strong> avec les droits administrateurs.
</p>

<p>
S&#039;il n&#039;est pas déjà présent, <a href="tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">créez</a> ce fichier avec les droits administrateurs.
On renseigne alors les informations suivantes :
</p>
<pre class="code">ldap_version 3
URI ldap://localhost:389
SIZELIMIT 0
TIMELIMIT 0
DEREF never
BASE dc=example, dc=com</pre>

<p>
Toutes les informations relatives à <strong>slapd.d</strong> (dossier remplaçant slapd.conf) sont maintenant inscrites au moment où on lance la commande <em>dpkg-reconfigure slapd</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit" method="post" action="slapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1406985673" /><input type="hidden" name="summary" value="[Pour Intrepid Ibex et supérieur] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="4509-5131" /><input type="submit" value="Modifier" class="button" title="Pour Intrepid Ibex et supérieur" /></div></form></div>
<h3 class="sectionedit5" id="pour_hardy_heron_et_inferieur">Pour Hardy Heron et inférieur</h3>
<div class="level3">

<p>
Maintenant <a href="tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">éditez</a> le fichier <strong>/etc/ldap/slapd.conf</strong> avec les droits administrateurs.
</p>

<p>
Il va falloir ajouter à la main quelques paramètres très importants. Notamment ces quatre lignes là, à mettre après la section &quot;database&quot; donc vers les lignes 70 et quelques.
</p>
<pre class="code">suffix          &quot;dc=example,dc=com&quot;
directory       &quot;/var/lib/ldap&quot;
rootdn          &quot;cn=admin,dc=example,dc=com&quot;
rootpw          {SSHA}d2BamRTgBuhC6SxC0vFGWol31ki8iq5m</pre>

<p>
Si jamais vous voulez activer le support de la version précédente d&#039;<abbr title="Lightweight Directory Access Protocol">LDAP</abbr>, décommentez  l&#039;option (ligne 8) :
</p>
<pre class="code">allow bind_v2</pre>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit" method="post" action="slapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1406985673" /><input type="hidden" name="summary" value="[Pour Hardy Heron et inférieur] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="5132-5805" /><input type="submit" value="Modifier" class="button" title="Pour Hardy Heron et inférieur" /></div></form></div>
<h2 class="sectionedit6" id="remplir_ldap">Remplir LDAP</h2>
<div class="level2">

<p>
L&#039; annuaire a été créé lors de l&#039;installation, il est maintenant temps de le remplir. Il sera rempli avec des entrées classiques qui seront compatibles avec la structure d&#039;un annuaire (pour un annuaire partagé), avec les comptes classiques (pour une authentification Web par exemple) et avec les comptes Unix (posix).
</p>

<p>
L&#039;annuaire <abbr title="Lightweight Directory Access Protocol">LDAP</abbr> peut être rempli par des fichiers ldif (ldif signifie ldap directory interchange format). Vous pouvez commencer en créant ce fichier d&#039;exemple (init.ldif) :
</p>
<pre class="code"># fichier de données : ~/init.ldif
dn: dc=example,dc=com
objectClass: dcObject
objectClass: organizationalUnit
dc: example
ou: Example Dot Com

dn: ou=people,dc=example,dc=com
objectClass: organizationalUnit
ou: people

dn: ou=groups,dc=example,dc=com
objectClass: organizationalUnit
ou: groups

dn: uid=lionel,ou=people,dc=example,dc=com
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: shadowAccount
uid: lionel
sn: Porcheron
givenName: Lionel
cn: Lionel Porcheron
displayName: Lionel Porcheron
uidNumber: 1000
gidNumber: 10000
gecos: Lionel Porcheron
loginShell: /bin/bash
homeDirectory: /home/lionel
shadowExpire: -1
shadowFlag: 0
shadowWarning: 7
shadowMin: 8
shadowMax: 999999
shadowLastChange: 10877
mail: lionel.porcheron@example.com
postalCode: 31000
l: Toulouse
o: Example
mobile: +33 (0)6 xx xx xx xx
homePhone: +33 (0)5 xx xx xx xx
title: System Administrator
postalAddress: 
initials: LP

dn: cn=example,ou=groups,dc=example,dc=com
objectClass: posixGroup
cn: example
gidNumber: 10000
displayName: Example group</pre>

<p>
Dans l&#039;exemple ci-dessus, la structure de l&#039;annuaire, c&#039;est-à-dire un utilisateur et un groupe ont été créés. Dans d&#039;autres exemples vous auriez pu voir le paramètre &quot;objectClass: top&quot; ajouté dans plusieurs entrées, mais c&#039;est le comportement par défaut donc pas besoin de le mettre :)
</p>

<p>
Maintenant ajoutez vos entrées à <abbr title="Lightweight Directory Access Protocol">LDAP</abbr> :
</p>
<ul>
<li class="level1"><div class="li"> Arrêtez le daemon : </div>
</li>
</ul>
<pre class="code">sudo /etc/init.d/slapd stop</pre>
<ul>
<li class="level1"><div class="li"> Supprimer ce qui a été ajouté automatiquement à l&#039;installation :</div>
</li>
</ul>
<pre class="code">sudo rm -rf /var/lib/ldap/*</pre>

<p>
Ajouter les données :
</p>
<pre class="code">sudo slapadd -l ~/init.ldif</pre>

<p>
<p><div class="notetip">Si vous rencontrez le message type : 
</p>
<pre class="code">Entry (cn=example,ou=groups,dc=example,dc=com), attribute &#039;displayName&#039; not allowed
slapadd: dn=&quot;cn=example,ou=groups,dc=example,dc=com&quot; (line=46): (65) attribute &#039;displayName&#039; not allowed</pre>

<p>
Il faut commenter la ligne 46 comme ceci : 
</p>
<pre class="code">#displayName: Example group</pre>

<p>
Puis refaire :
</p>
<pre class="code">sudo rm -rf /var/lib/ldap/*</pre>

<p>

</div></p>
</p>

<p>
Donner les droits de lecture aux fichiers de la base de données
</p>
<pre class="code">sudo chown -R openldap:openldap /var/lib/ldap</pre>

<p>
N&#039;oublions pas de relancer ldap :
</p>
<pre class="code">sudo /etc/init.d/slapd start</pre>

<p>
Nous allons pouvoir vérifier que les données ont été correctement ajoutées avec les outils du paquet <code>ldap-utils</code>. Pour effectuer une recherche dans les annuaires <abbr title="Lightweight Directory Access Protocol">LDAP</abbr> il vous suffit de faire :
</p>
<pre class="code">ldapsearch -xLLL -b &quot;dc=example,dc=com&quot; uid=lionel sn givenName cn
dn: uid=lionel,ou=people,dc=example,dc=com
cn: Lionel Porcheron
sn: Porcheron
givenName: Lionel</pre>

<p>
Une rapide explication :
</p>
<ul>
<li class="level1"><div class="li"> -x désactive l&#039;authentification SASL</div>
</li>
<li class="level1"><div class="li"> -LLL empêche l&#039;affichage des informations LDIF </div>
</li>
<li class="level1"><div class="li"> -b indique la branche utilisée</div>
</li>
</ul>

<p>
NE PAS OUBLIER d&#039;ajouter le user qui doit administrer le service ldap au group openldap à créer lors de l&#039;installation du paquet ou bien de donner les bons droits sur les fichiers /etc/ldap/ldap.conf et /var/lib/ldap/*
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit" method="post" action="slapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1406985673" /><input type="hidden" name="summary" value="[Remplir LDAP] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="5806-9354" /><input type="submit" value="Modifier" class="button" title="Remplir LDAP" /></div></form></div>
<h2 class="sectionedit7" id="utiliser_votre_serveur_ldap">Utiliser votre serveur LDAP</h2>
<div class="level2">

<p>
Maintenant que votre serveur est prêt et démarré vous pouvez :
</p>
<ul>
<li class="level1"><div class="li"> Authentifier vos utilisateurs dans l&#039;annuaire comme expliqué dans la documentation <a href="https://help.ubuntu.com/community/LDAPClientAuthentication" class="urlextern" title="https://help.ubuntu.com/community/LDAPClientAuthentication"  rel="nofollow">LDAPClientAuthentication</a></div>
</li>
<li class="level1"><div class="li"> Authentifier vos utilisateurs via une applications web</div>
</li>
<li class="level1"><div class="li"> Utiliser l&#039;annuaire comme une base de données pour votre client mail</div>
</li>
<li class="level1"><div class="li"> Et bien plus encore !!!</div>
</li>
</ul>

<p>
De manière plus concrète, il existe des solutions simples à installer et qui vous permettent un excellent accès à votre annuaire, que ce soit en visualisation comme en création/édition.
</p>

</div>

<h4 id="phpldapadmin">phpLDAPadmin</h4>
<div class="level4">

</div>

<h5 id="pre-requis">Pré-requis</h5>
<div class="level5">
<ul>
<li class="level1"><div class="li"> Avoir un serveur WEB installé, voir <a href="lamp" class="wikilink1" title="lamp">LAMP</a>.</div>
</li>
<li class="level1"><div class="li"> La version 12.04 LTS d&#039;Ubuntu. (La 13.10 étant incompatible avec phpLDAPadmin : <a href="https://bugs.launchpad.net/ubuntu/+source/phpldapadmin/+bug/1246170" class="urlextern" title="https://bugs.launchpad.net/ubuntu/+source/phpldapadmin/+bug/1246170"  rel="nofollow">https://bugs.launchpad.net/ubuntu/+source/phpldapadmin/+bug/1246170</a>)</div>
</li>
</ul>

</div>

<h5 id="installation1">Installation</h5>
<div class="level5">

<p>
Vous devez <a href="tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installer les paquets</a> <strong><a href="apt://phpldapadmin" class="urlextern" title="apt://phpldapadmin"  rel="nofollow">apt://phpldapadmin</a></strong>.
</p>

<p>
Et on y accède via <a href="http://votre_domaine.com/phpldapadmin/" class="urlextern" title="http://votre_domaine.com/phpldapadmin/"  rel="nofollow">http://votre_domaine.com/phpldapadmin/</a>
</p>

<p>
Attention, le login est : &quot;cn=admin,dc=example,dc=com&quot;.
</p>

</div>

<h5 id="problemememory_limit_low">Problème : Memory Limit low</h5>
<div class="level5">

<p>
Si lorsque vous allez sur l&#039;interface web de phpldapadmin, vous avez cette erreur : 
</p>

<p>
Memory Limit low.
Your php memory limit is low - currently 16M
</p>

<p>
Éditer en admin le fichiers php.ini :
</p>
<pre class="code"> cd /etc/php5/apache2/
 sudo nano php.ini</pre>

<p>
trouvez la section suivante et changez la valeur memory_limit = 16M en mettant 50M :
</p>
<pre class="code"> ;;;;;;;;;;;;;;;;;;;
 ; Resource Limits ;
 ;;;;;;;;;;;;;;;;;;;

 max_execution_time = 30     ; Maximum execution time of each script, in seconds
 max_input_time = 60 ; Maximum amount of time each script may spend parsing   request data
 ;max_input_nesting_level = 64 ; Maximum input variable nesting level
 memory_limit = 50M      ; Maximum amount of memory a script may consume (16MB)</pre>

<p>
Il suffit ensuite de recharger la configuration de apache pour que la modification soit prise en compte :
</p>
<pre class="code">sudo /etc/init.d/apache2 reload</pre>

<p>
puis relancer votre serveur ldap :
</p>
<pre class="code">sudo /etc/init.d/slapd restart</pre>

<p>
<a href="http://www.developpez.net/forums/d489029/hardware-systemes-logiciels/linux/reseau/phpldapadmin-memory-limit-low/" class="urlextern" title="http://www.developpez.net/forums/d489029/hardware-systemes-logiciels/linux/reseau/phpldapadmin-memory-limit-low/"  rel="nofollow">source forum Developpez.com</a>
</p>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit" method="post" action="slapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1406985673" /><input type="hidden" name="summary" value="[Utiliser votre serveur LDAP] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="9355-11627" /><input type="submit" value="Modifier" class="button" title="Utiliser votre serveur LDAP" /></div></form></div>
<h2 class="sectionedit8" id="replication_des_donnees_ldap">Réplication des données LDAP</h2>
<div class="level2">

<p>
Le service <abbr title="Lightweight Directory Access Protocol">LDAP</abbr> peut vite devenir un service hautement critique dans votre système d&#039;information : tout dépend (ou peut dépendre) de <abbr title="Lightweight Directory Access Protocol">LDAP</abbr> :
</p>
<ul>
<li class="level1"><div class="li"> Authentification</div>
</li>
<li class="level1"><div class="li"> Autorisation</div>
</li>
<li class="level1"><div class="li"> Mail</div>
</li>
<li class="level1"><div class="li"> …</div>
</li>
</ul>

<p>
Ce serait donc une bonne idée de créer un système redondant. Le mini HOWTO ci-dessous vous permettra de le faire.
</p>

</div>

<h4 id="introduction1">Introduction</h4>
<div class="level4">

<p>
Avec OpenLDAP 2.2 (sur Breezy et Dapper), la réplication est basée sur une communication maître-esclave.
</p>

<p>
<em class="u"><strong>ATTENTION </strong></em>
</p>

<p>
Vous devez vous rappeler que les modifications devraient toujours être faites sur le maître ! Si vous modifiez un esclave, les modifications seront perdues dès la synchronisation suivante :/
</p>

</div>

<h4 id="le_maitre">Le maître</h4>
<div class="level4">

<p>
Sur le maître, vous devez modifier la section &quot;base de donnée&quot; du fichier de configuration <code>/etc/ldap/slapd.conf</code> pour ajouter une instruction de réplication.
L&#039;exemple suivant montre une réplication sur le serveur <code>ldap-2.example.com</code> avec le Manager <em>user</em> et le mot de passe <em>secret</em>.
Le fichier de log est l&#039;emplacement où les données seront stockées avant d’être envoyées sur le(s) serveur(s) esclave(s).
</p>

<p>
<p><div class="noteimportant">Note d&#039;un internaute : Comment faire pour les versions ou le fichier slapd.conf n&#039;existe plus, comme c&#039;est dit plus haut??
</div></p>
</p>
<pre class="code">replica uri=ldap://ldap-2.example.com:389 binddn=&quot;cn=Manager,dc=example,dc=com&quot; bindmethod=simple 
credentials=secret

replogfile      /var/lib/ldap/replog</pre>

<p>
Il ne reste plus qu&#039;a redémarrer votre serveur <abbr title="Lightweight Directory Access Protocol">LDAP</abbr> :)
</p>

</div>

<h4 id="le_s_esclave_s">Le(s) Esclave(s)</h4>
<div class="level4">

<p>
Sur le(s) serveur(s) esclave(s) , il vous suffit d&#039;autoriser votre serveur maître à mettre à jour la base de donnée <abbr title="Lightweight Directory Access Protocol">LDAP</abbr>. Pour cela ajoutez les lignes suivantes dans votre <code>/etc/ldap/slapd.conf</code> à la section base de données :
</p>
<pre class="code">updatedn        cn=Manager,dc=example,dc=com
updateref       ldap://ldap-1.example.com</pre>

<p>
Redémarrez votre serveur <abbr title="Lightweight Directory Access Protocol">LDAP</abbr> (l&#039;esclave).
</p>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit" method="post" action="slapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1406985673" /><input type="hidden" name="summary" value="[Réplication des données LDAP] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="11628-13573" /><input type="submit" value="Modifier" class="button" title="Réplication des données LDAP" /></div></form></div>
<h2 class="sectionedit9" id="liens">Liens</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="https://wiki.ubuntu.com/OpenLDAPServer" class="urlextern" title="https://wiki.ubuntu.com/OpenLDAPServer"  rel="nofollow">La version Anglaise</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://help.ubuntu.com/8.10/serverguide/C/openldap-server.html" class="urlextern" title="https://help.ubuntu.com/8.10/serverguide/C/openldap-server.html"  rel="nofollow">La version Anglaise mis a jour pour 8.10</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.openldap.org/" class="urlextern" title="http://www.openldap.org/"  rel="nofollow">OpenLDAP.org</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.tldp.org/HOWTO/html_single/LDAP-HOWTO/" class="urlextern" title="http://www.tldp.org/HOWTO/html_single/LDAP-HOWTO/"  rel="nofollow">LDAP HOWTO</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://luma.sourceforge.net/" class="urlextern" title="http://luma.sourceforge.net/"  rel="nofollow">Un GUI pour LDAP</a> (Disponible dans les dépots)</div>
</li>
<li class="level1"><div class="li"> <a href="http://ralf.schaeftlein.de/2009/02/04/howto-setup-a-openldap-server-for-ubuntu-810/" class="urlextern" title="http://ralf.schaeftlein.de/2009/02/04/howto-setup-a-openldap-server-for-ubuntu-810/"  rel="nofollow">OpenLDAP Ubuntu 8.10 HOWTO</a></div>
</li>
</ul>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit" method="post" action="slapd"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1406985673" /><input type="hidden" name="summary" value="[Liens] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="13574-" /><input type="submit" value="Modifier" class="button" title="Liens" /></div></form></div>
<!-- cachefile /srv/www/doc.ubuntu-fr.org/htdocs/data/cache/d/da02bf0fbc3dc3d825745700220e27bf.xhtml used -->

        <br style="clear:both;" />
        <div id="pageinfo">
            <!--  |  | -->
            <!-- ?tpl_pageinfo()? -->
            <br />
            Le contenu de ce wiki est sous licence : <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" rel="license" target="_blank">CC BY-SA v3.0</a>
        </div> 
      </div>

      
      <div id="navigation">

        <ul>
          <li class="menu"><a href="http://www.ubuntu-fr.org" class="title" id="menu-accueil"><span>Accueil</span></a></li>
          <li class="menu" id="active">
            <a href="index.html"  class="title" id="menu-doc"><span>Documentation</span></a>
            <ul>
              <li id="navWiki" class="cat">
                <h2>Actions</h2>
                <ul>
                  <li><a href="http://doc.ubuntu-fr.org/slapd?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/slapd?do=edit&amp;rev=0"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/slapd?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li>
                  <li></li>
                  <li><a href="http://doc.ubuntu-fr.org/slapd?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/slapd?do=backlink"  class="action backlink" rel="nofollow" title="Liens vers cette page">Liens vers cette page</a></li>
                  <li></li>
                  <li></li>
                  <li></li>
                </ul>
              </li>
              <li id="navDivers" class="cat">
                <h2>Divers</h2>
                <ul>
                  <li><bdi><a href="wiki/participer_wiki" class="wikilink1" title="wiki:participer_wiki">Participer à la documentation</a></bdi></li>
                  <li><bdi><a href="documentation_hors_ligne" class="wikilink1" title="documentation_hors_ligne">Documentation hors ligne</a></bdi></li>
                  <li><a href="http://www.ubuntu-fr.org/telechargement" title="T&eacute;l&eacute;charger Ubuntu">T&eacute;l&eacute;charger Ubuntu</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="menu"><a href="http://forum.ubuntu-fr.org"  class="title" id="menu-forum"><span>Forum</span></a></li>
          <li class="menu"><a href="http://planet.ubuntu-fr.org"  class="title" id="menu-planet"><span>Planet</span></a></li>
        </ul>

      </div>
      <div id="references-ufr">
        <ul id="legal-ufr">
          <li><a href="http://www.ubuntu-fr.org/contacts">Contact</a></li>
        </ul>

        <ul id="sponsors-ufr">
          <li><a href="http://www.dokuwiki.org/dokuwiki" id="dokuwiki">Propulsé par Dokuwiki</a></li>
        </ul>
      </div>

    </div>
    <!-- $Id$ -->

    <!-- Piwik Image Tracker -->
    <!-- img src="http://piwik.infra.ubuntu-fr.org/piwik.php?idsite=2&amp;rec=1" style="border:0" alt="" /-->
    <!-- End Piwik -->

  </body>
</html>
