{{tag>boot ppc vétuste}}

----

====== Gestionnaire d'amorçage : Yaboot pour PowerPC ====== 
===== Introduction =====

**Yaboot** est un gestionnaire de boot pour les machines ayant **Open Firmware** comme système primaire (comme le bios de PC mais en plus évolué). Ce **Bootloader** vous permet d'avoir plusieurs systèmes d'exploitation sur les machines Apple //NewWorld//. Ces machines sont les Mac G3 (bleu et blanc), les G4 et les G5. Pour les Mac plus anciens, les //OldWorld//, le gestionnaire de boot recommandé, est **[[bootx|BootX]]**.

===== Yaboot.conf =====

Le fichier **/etc/yaboot.conf** est le fichier de configuration de **Yaboot**. Vous pouvez le modifier en fonction de vos besoins avec un éditeur de texte ouvert en tant que //root//.

<code>
sudo gedit /etc/yaboot.conf
</code>

Vous obtiendrez quelque chose comme ça :

<code>
## yaboot.conf generated by the Ubuntu installer
##
## run: "man yaboot.conf" for details. Do not make changes until you have!!
## see also: /usr/share/doc/yaboot/examples for example configurations.
##
## For a dual-boot menu, add one or more of:
## bsd=/dev/hdaX, macos=/dev/hdaY, macosx=/dev/hdaZ

boot=/dev/hda2                          #indique sur quel partition est le boot système Yaboot
device=/pci@f4000000/ata-6@d/disk@0:    
partition=4                             #nombre de partitions sur le disque
root=/dev/hda4                          #partition racine / d'Ubuntu
timeout=100                             #temps d'attente au boot GNU/Linux (après le Yaboot)
install=/usr/lib/yaboot/yaboot
magicboot=/usr/lib/yaboot/ofboot        
enablecdboot                            #permet le boot sur CD (touche c)
macosx=/dev/hda3                        #localisation partition de Mac Os X
defaultos=macosx                        #choix du système bootant par défaut
image=/boot/vmlinux                  
	label=Linux
	read-only
	initrd=/boot/initrd.img
	append="quiet splash"

image=/boot/vmlinux.old
	label=old
	read-only
	initrd=/boot/initrd.img.old
	append="quiet splash"
</code>

Par défaut, l'option **defaultos** n'est pas présente, donc par défaut Linux (Ubuntu) boot automatiquement. Vous pouvez en ajoutant cette option avec le choix de votre OS par défaut démarrer automatiquement sur Mac Os 9/X. Il y a beaucoup d'autres options possibles : pour les connaître je vous renvoie sur le //man// de **yaboot** et **yaboot.conf**. Parmis les plus intéressantes :

<code>
password=           #pour protéger le boot avec un password
delay=              #délai avant le boot automatique
enableofboot        #autoriser l'ouverture de Open Firmware au boot 
enablenetboot       #autoriser le boot sur réseau
......
</code>


===== Validation =====

Une fois que vous avez modifié le fichier **/etc/yaboot.conf**, vous devez régénérer le boot sur la partition de démarrage, ici ///dev/hda2//, pour qu'il prenne en compte les modifications. Cela se fait simplement en utilisant la commande **ybin**.

<code>
sudo ybin -v            #l'option -v pour voir un peu ce qui ce passe mais elle n'est pas obligatoire
</code>

Bien sur, pour plus d'informations, consultez-le //man// de **ybin**.

===== Restauration de yaboot =====

Si vous n'avez plus le gestionnaire de démarrage **yaboot** suite à une mise à jour de //Mac Os X// ou autres problèmes, allez voir comment restaurer yaboot, sur la page [[installation:ppc_rescue]] le chapitre //Restauration de yaboot//.

===== Lien =====

  * [[http://penguinppc.org/bootloaders/yaboot/doc/yaboot-howto.shtml/ | penguinppc.org]] 

----

//Contributeur : Rédigé par [[:contributeurs|Les contributeurs d'Ubuntu-fr]].//