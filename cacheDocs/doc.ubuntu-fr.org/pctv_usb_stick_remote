<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript"/>
    <meta http-equiv="Content-Style-Type" content="text/css"/>
    <meta http-equiv="Content-Language" content="fr"/>
    <title>pctv_usb_stick_remote - Documentation Ubuntu Francophone</title>
    <meta name="Description" content="Documentation francophone pour la distribution Ubuntu" lang="fr" />
    <meta name="language" content="fr-FR" />

    <!--[if IE 8]>
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <![endif]-->
        <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2012-07-21T16:13:42+0200"/>
<meta name="keywords" content="materiel,usb,tnt,carte tv,brouillon,orthographe a corriger"/>
<link rel="search" type="application/opensearchdescription+xml" href="lib/exe/opensearch.php" title="Documentation Ubuntu Francophone"/>
<link rel="start" href="index.html"/>
<link rel="contents" href="http://doc.ubuntu-fr.org/pctv_usb_stick_remote?do=index" title="Plan du site"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Namespace actuel" href="feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="http://doc.ubuntu-fr.org/pctv_usb_stick_remote?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="http://doc.ubuntu-fr.org/_export/xhtml/pctv_usb_stick_remote"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="http://doc.ubuntu-fr.org/_export/raw/pctv_usb_stick_remote"/>
<link rel="canonical" href="pctv_usb_stick_remote"/>
<link rel="stylesheet" type="text/css" href="lib/exe/css.php?t=ubuntu-2010&amp;tseed=4af22dedc19f28c99fa67afabbb173df"/>
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"id":"pctv_usb_stick_remote","namespace":""};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="lib/exe/js.php?tseed=4af22dedc19f28c99fa67afabbb173df"></script>
    <link rel="shortcut icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/icone.png" type="image/x-icon" />
    <link rel="apple-touch-icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/touch-ico.png" />

    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc.css" />
    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-ubuntu.css" />
    <link rel="stylesheet" media="print" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-print.css" />

    <script type="text/javascript">
      var menu_hidden;
      var static_url = "UFR_STATIC";
    </script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/menu.js" type="text/javascript"></script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/common.js" type="text/javascript"></script>
  </head>
  <body>

    <div id="accessibar">
      <a href="pctv_usb_stick_remote#main" tabindex="1">Contenu</a> | <a href="pctv_usb_stick_remote#qsearch__in" tabindex="2">Rechercher</a> | <a href="pctv_usb_stick_remote#navigation" tabindex="3">Menus</a>
    </div>

    <div id="page">

      <div id="header">

        <div id="logo">
          <h1>Ubuntu-fr</h1>
          <a href="index.html" title="Accueil de la documentation">Communauté francophone d'utilisateurs d'Ubuntu</a>
        </div>

        <form action="http://ubuntu-fr.org/recherche" accept-charset="utf-8" id="search" onsubmit="if (document.getElementById('qsearch__in').value == 'Recherche rapide....') {document.getElementById('qsearch__in').value = '';}">
          <fieldset>
            <label for="qsearch__in">Recherche : </label><input type="text" value="Recherche rapide...." id="qsearch__in" accesskey="f" name="sk_q" alt="[F]" size="34" tabindex="4" />
            <label for="tsearch_field">Chercher dans : </label><select name="sk_engine" tabindex="5" id="tsearch_field" title="Chercher dans">
              <option value="all">Site</option>
              <option selected="selected" value="doc">Documentation</option>
              <option value="forum">Forum</option>
              <option value="planet">Planet</option>
            </select>
            <input type="submit" value="ok" class="button" alt="Lancer la recherche" tabindex="5" />
          </fieldset>
        </form>
        <!--[if lte IE 7]><div class="clear"></div><![endif]-->

        <form action="pctv_usb_stick_remote" accept-charset="utf-8" id="login_top" method="post">
          <fieldset>
            <label for="u_field">Identifiant : </label><input type="text" value="Identifiant" name="u" id="u_field" size="9" /><label for="p_field">Mot de passe : </label><input type="password" value="Mot de passe" name="p" id="p_field" size="9" alt="Mot de passe" /><input type="submit" value="connexion" id="connect" /> / <a href="http://forum.ubuntu-fr.org/register.php">inscription</a>
          </fieldset>
        </form>
 

      </div>

      <div id="navbar">
          <h2 id="pagetitle"><a href="pctv_usb_stick_remote" >pctv_usb_stick_remote</a></h2>
      </div>

      
      <div id="main" class="dokuwiki">

        <div id="hidemenu" title="Masquer le menu"></div>

        <div id="pagerror"></div>
                <div class="notetag">Cette page est en cours de rédaction.<br />
<a href="wiki/participer_wiki">Apportez votre aide…</a>
</div>
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table des matières</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="pctv_usb_stick_remote#installation">Installation</a></div></li>
<li class="level1"><div class="li"><a href="pctv_usb_stick_remote#configuration">Configuration</a></div></li>
<li class="level1"><div class="li"><a href="pctv_usb_stick_remote#via_lirc">Via lirc</a></div></li>
<li class="level1"><div class="li"><a href="pctv_usb_stick_remote#patch_des_pilotes">Patch des pilotes</a></div></li>
<li class="level1"><div class="li"><a href="pctv_usb_stick_remote#installation_et_configuration_de_lirc">Installation et configuration de lirc</a></div></li>
<li class="level1"><div class="li"><a href="pctv_usb_stick_remote#parametrage_de_lirc">Paramétrage de lirc</a></div></li>
<li class="level1"><div class="li"><a href="pctv_usb_stick_remote#voir_aussi">Voir aussi</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->
<div class="tags"><span>
	<a href="materiel" class="wikilink1" title="materiel" rel="tag">matériel</a>,
	<a href="usb" class="wikilink1" title="usb" rel="tag">usb</a>,
	<a href="http://doc.ubuntu-fr.org/tnt" class="wikilink1" title="tnt" rel="tag">tnt</a>,
	<a href="http://doc.ubuntu-fr.org/carte_tv" class="wikilink1" title="carte_tv" rel="tag">Carte TV</a>,
	<a href="brouillon" class="wikilink1" title="brouillon" rel="tag">BROUILLON</a>,
	<a href="http://doc.ubuntu-fr.org/orthographe_a_corriger" class="wikilink1" title="orthographe_a_corriger" rel="tag">orthographe à corriger</a>
</span></div>
<hr />

<h1 class="sectionedit1" id="carte_tvpinnacle_pctv_hybrid_pro_stickinstallation_de_la_telecommande">Carte TV : Pinnacle PCTV Hybrid Pro Stick : installation de la télécommande</h1>
<div class="level1">

<p>
Après avoir installé votre carte <a href="pctv_hybrid_pro_stick" class="wikilink1" title="pctv_hybrid_pro_stick">pctv_hybrid_pro_stick</a>, il est temps de configurer la télécommande.
</p>

<p>
Il y a plusieurs types de télécommande pour cette carte.<br/>

La configuration suivante est pour la télécommande noire toute plate, mais cela doit être identique pour les autres types de télécommande.
</p>

<p>
Par défaut, la télécommande ne fonctionne pas très bien: il n&#039;y a que le son qui fonctionne.
</p>

<p>
Nous allons configurer d&#039;autres touches (pas toutes malheureusement) pour Kaffeine. Nous pourrons faire:
</p>
<ul>
<li class="level1"><div class="li"> Le son (+,- et mute) qui doit fonctionner par défaut</div>
</li>
<li class="level1"><div class="li"> Fermer Kaffeine</div>
</li>
<li class="level1"><div class="li"> Chaine suivante et Chaine Précédente</div>
</li>
<li class="level1"><div class="li"> Plein écran</div>
</li>
<li class="level1"><div class="li"> Stopper l&#039;image de Kaffeine</div>
</li>
</ul>

<p>
Nous allons pour cela utiliser <strong>lineak.</strong>
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit" method="post" action="pctv_usb_stick_remote"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1342880022" /><input type="hidden" name="summary" value="[Carte TV : Pinnacle PCTV Hybrid Pro Stick : installation de la télécommande] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="76-905" /><input type="submit" value="Modifier" class="button" title="Carte TV : Pinnacle PCTV Hybrid Pro Stick : installation de la télécommande" /></div></form></div>
<h2 class="sectionedit2" id="installation">Installation</h2>
<div class="level2">

<p>
<a href="tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez le paquet</a> <strong><a href="apt://lineakd" class="interwiki iw_apt" title="apt://lineakd">lineakd</a></strong>.
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit" method="post" action="pctv_usb_stick_remote"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1342880022" /><input type="hidden" name="summary" value="[Installation] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="906-1016" /><input type="submit" value="Modifier" class="button" title="Installation" /></div></form></div>
<h2 class="sectionedit3" id="configuration">Configuration</h2>
<div class="level2">

<p>
<a href="tutoriel/comment_modifier_un_fichier" class="wikilink1" title="tutoriel:comment_modifier_un_fichier">Éditez le fichier</a> <strong>/etc/lineakkb.def</strong> avec les droits administrateur et rajoutez ceci au début du fichier:
</p>
<pre class="file">#### Pinnacle PCTV USB Stick Remote ####
[PCTV]
brandname = &quot;Pinnacle&quot;
modelname = &quot;PCTV USB Stick Remote Control&quot;
 [KEYS]
  Mute              = 160
  Lancer            = 110
  Eteindre          = 222
  Chaine_Precedente = 152
  Stop              = 232
  Plein_Ecran       = 177
  Chaine_Suivante   = 233
  VolumeUp          = 176
  VolumeDown        = 174
 [END KEYS]
[END PCTV]
  
#### END Pinnacle PCTV USB Stick Remote ####</pre>

<p>
Nous allons maintenant rechercher le type de la télécommande en tapant la commande suivante dans un <a href="terminal" class="wikilink1" title="terminal">terminal</a> :
</p>
<pre class="code">lineakd -l</pre>

<p>
Si tout va bien, nous devrions voir la télécommande dans la liste sous le nom de PCTV
</p>
<pre class="code">PCTV           Pinnacle PCTV USB Stick Remote Control</pre>

<p>
Créons un fichier de configuration pour cette télécommande:
</p>
<pre class="code">lineakd -c PCTV</pre>

<p>
Ce nouveau fichier est enregistré dans <strong>~/.lineak/lineakd.conf</strong>.
</p>

<p>
Maintenant, éditons ce fichier et mettons ces paramètres:
</p>
<pre class="file"># LinEAK - Linux support for Easy Access and Internet Keyboards
#  Copyright (c) 2001,2002, 2003  Sheldon Lee Wen &lt;leewsb@hotmail.com&gt; (Current Maintainer)
#  	and Mark Smulders &lt;Mark@PIRnet.nl&gt;
#  http://lineak.sourceforge.net
#
# lineakd configuration file
#
# example key configuration:
# 	play	= &quot;xmms --play-pause&quot;
# 	eject	= EAK_EJECT
#
# Lineakd supports the following modifier keys:
#    control alt shift mod2 mod3 mod4 mod5
   
CdromDevice = /dev/cdrom
Display_align = center
Display_color = 0aff00
Display_font = -adobe-helvetica-bold-r-normal-*-*-240-*-*-p-*-*-*
Display_hoffset = 0
Display_plugin = xosd
Display_pos = bottom
Display_soffset = 1
Display_timeout = 3
isplay_voffset = 50
KeyboardType = PCTV
MixerDevice = /dev/mixer
Screensaver = 
conffilename = /home/nico/.lineak/lineakd.conf
deffilename = /etc/lineakkb.def
keystate_capslock = 
keystate_numlock = 
keystate_scrolllock = 
userdeffile = /home/nico/.lineak/lineakkb.def
  
Mute = &quot;KMIX_MUTE&quot;
VolumeDown = &quot;KMIX_VOLDOWN&quot;
VolumeUp = &quot;KMIX_VOLUP&quot;
Chaine_Precedente = &quot;dcop kaffeine KaffeineIface previous&quot;
Chaine_Suivante = &quot;dcop kaffeine KaffeineIface next&quot;
Lancer = &quot;dcop kaffeine KaffeineIface play&quot;
Eteindre = &quot;dcop kaffeine KaffeineIface quit&quot;
Plein_Ecran = &quot;dcop kaffeine KaffeineIface fullscreen&quot;
Stop = &quot;dcop kaffeine KaffeineIface stop&quot;</pre>

<p>
Voila, c&#039;est presque fini…
</p>

<p>
Nous allons rajouter Lineak au démarrage:
</p>

<p>
<strong>Pour Ubuntu/Gnome:</strong> Allez dans Menu, Systèmes, Préférences, Sessions, Onglet &quot;Programme au démarrage&quot; et ajouter:
</p>
<pre class="code">lineakd &amp;</pre>

<p>
<strong>Pour Kubuntu/KDE:</strong> faites ceci dans un terminal:  
</p>
<pre class="code">ln -s /usr/bin/lineakd /home/marcus/.kde/Autostart/</pre>

<p>
Une fois votre ordinateur redémarré, lancez Kaffeine, et votre télécommande doit fonctionner <img src="lib/images/smileys/icon_wink.gif" class="icon" alt=";-)" />
</p>

<p>
Il faut savoir que l&#039;utilisation du plein écran se fait avec la touche enregistrement car la touche plein écran est inactive.
Les touches suivante et précédente sont les touches de retour et d&#039;avance rapide.
</p>

<p>
<strong>Pour information:</strong>
Les touches de 0 à 9 ne sont pas configurables car elles correspondent à des caractères du clavier (é,è,à, etc…), et si nous les configurons, les caractères ne fonctionneront plus avec le clavier…du moins je n&#039;y suis pas arrivé.
Les autres touches sont inactives. J&#039;ai essayé de les faire reconnaître avec xev et en fouillant dans les log mais rien…
Il est certainement possible de configurer totalement les touches, mais je n&#039;ai pas les connaissances pour.
</p>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit" method="post" action="pctv_usb_stick_remote"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1342880022" /><input type="hidden" name="summary" value="[Configuration] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="1017-4601" /><input type="submit" value="Modifier" class="button" title="Configuration" /></div></form></div>
<h2 class="sectionedit4" id="via_lirc">Via lirc</h2>
<div class="level2">

<p>
L&#039;installation via lirc est plus compliquée, il faut en particulier patcher les sources des pilotes em2880 mais il a l&#039;avantage que tous les boutons marchent..
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit" method="post" action="pctv_usb_stick_remote"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1342880022" /><input type="hidden" name="summary" value="[Via lirc] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="4602-4785" /><input type="submit" value="Modifier" class="button" title="Via lirc" /></div></form></div>
<h2 class="sectionedit5" id="patch_des_pilotes">Patch des pilotes</h2>
<div class="level2">

<p>
Il faut d&#039;abord aller dans le dossier des pilotes (au besoin, les re-télécharger) :
</p>
<pre class="code">hg clone http://linuxtv.org/hg/v4l-dvb
cd v4l-dvb</pre>

<p>
Il nous faut ensuite créer le patch :
</p>
<pre class="code">gedit telecommande.patch</pre>

<p>
Puis le remplir avec le code ci-dessous :
</p>
<pre class="file">diff -Naur v4l-org/linux/drivers/media/common/ir-keymaps.c v4l-mod/linux/drivers/media/common/ir-keymaps.c
--- v4l-org/linux/drivers/media/common/ir-keymaps.c	2007-11-03 12:57:32.179519367 +0100
+++ v4l-mod/linux/drivers/media/common/ir-keymaps.c	2007-11-03 13:51:46.864993322 +0100
@@ -2053,6 +2053,41 @@
 };
 EXPORT_SYMBOL_GPL(ir_codes_pinnacle2);
 
+IR_KEYTAB_TYPE ir_codes_pinnacle3[IR_KEYTAB_SIZE] = {
+	/* Keys 0 to 9 */
+	[ 0x27 ] = KEY_0,
+	[ 0x0f ] = KEY_1,
+	[ 0x15 ] = KEY_2,
+	[ 0x10 ] = KEY_3,
+	[ 0x18 ] = KEY_4,
+	[ 0x1b ] = KEY_5,
+	[ 0x1e ] = KEY_6,
+	[ 0x11 ] = KEY_7,
+	[ 0x21 ] = KEY_8,
+	[ 0x12 ] = KEY_9,
+
+	[ 0x39 ] = KEY_POWER,
+
+	[ 0x03 ] = KEY_VOLUMEUP,
+	[ 0x09 ] = KEY_VOLUMEDOWN,
+	[ 0x06 ] = KEY_CHANNELUP,
+	[ 0x0c ] = KEY_CHANNELDOWN,
+	[ 0x3f ] = KEY_INFO,
+
+	[ 0x00 ] = KEY_MUTE,
+
+	//[ 0x06 ] = KEY_PLAY,
+	[ 0x2d ] = KEY_REWIND,
+	[ 0x33 ] = KEY_FORWARD,
+	[ 0x30 ] = KEY_PAUSE,
+	[ 0x3c ] = KEY_STOP,
+	[ 0x36 ] = KEY_RECORD,
+	[ 0x24 ] = KEY_ZOOM, /* fullscreen */
+	[ 0x2a ] = KEY_M,
+
+};
+EXPORT_SYMBOL_GPL(ir_codes_pinnacle3);
+
 /* for the Geniatech X800 remote: */
 IR_KEYTAB_TYPE ir_codes_geniatech_x800[IR_KEYTAB_SIZE] = {
 	[ 0x00 ] = KEY_0,
diff -Naur v4l-org/linux/drivers/media/video/em28xx/em28xx-cards.c v4l-mod/linux/drivers/media/video/em28xx/em28xx-cards.c
--- v4l-org/linux/drivers/media/video/em28xx/em28xx-cards.c	2007-11-03 12:57:32.679547862 +0100
+++ v4l-mod/linux/drivers/media/video/em28xx/em28xx-cards.c	2007-11-03 13:51:47.365021817 +0100
@@ -2112,7 +2112,7 @@
 				em28xx_write_regs(dev, 0x08, &quot;\xfe&quot;, 1);
 				mdelay(70);
 				em28xx_write_regs(dev, R0F_XCLK_REG, &quot;\x22&quot;, 1); /* switch em2880 rc protocol */
-				em2880_ir_attach(dev,ir_codes_pinnacle2,ARRAY_SIZE(ir_codes_pinnacle2), em2880_get_key_pinnacle);
+				em2880_ir_attach(dev,ir_codes_pinnacle3,ARRAY_SIZE(ir_codes_pinnacle3), em2880_get_key_pinnacle);
 				break;
 			}
 		case EM2870_BOARD_TERRATEC_XS_MT2060:
diff -Naur v4l-org/linux/drivers/media/video/em28xx/em28xx-input.c v4l-mod/linux/drivers/media/video/em28xx/em28xx-input.c
--- v4l-org/linux/drivers/media/video/em28xx/em28xx-input.c	2007-11-03 12:57:32.679547862 +0100
+++ v4l-mod/linux/drivers/media/video/em28xx/em28xx-input.c	2007-11-03 13:51:47.365021817 +0100
@@ -92,10 +92,12 @@
 	dev-&gt;ir_em2880-&gt;sequence[2]=buf[0]&amp;1;
 	*ir_key=buf[2];
 	if((dev-&gt;ir_em2880-&gt;sequence[0]==1&amp;&amp;dev-&gt;ir_em2880-&gt;sequence[1]==0&amp;&amp;dev-&gt;ir_em2880-&gt;sequence[2]==1)||
-	   (dev-&gt;ir_em2880-&gt;sequence[0]==0&amp;&amp;dev-&gt;ir_em2880-&gt;sequence[1]==1&amp;&amp;dev-&gt;ir_em2880-&gt;sequence[2]==0))
+	   (dev-&gt;ir_em2880-&gt;sequence[0]==0&amp;&amp;dev-&gt;ir_em2880-&gt;sequence[1]==1&amp;&amp;dev-&gt;ir_em2880-&gt;sequence[2]==0)) {
+        //printk(&quot;em28xx-ir : Key pressed : %02x\n&quot;, *ir_key) ; 
 		return 1;
-	else
+    } else {
 		return 0;
+    }
 }
 
 static void em2880_ir_key_poll(struct em28xx *dev){
diff -Naur v4l-org/linux/include/media/ir-common.h v4l-mod/linux/include/media/ir-common.h
--- v4l-org/linux/include/media/ir-common.h	2007-11-03 12:57:32.679547862 +0100
+++ v4l-mod/linux/include/media/ir-common.h	2007-11-03 13:51:47.865050312 +0100
@@ -141,6 +141,7 @@
 extern IR_KEYTAB_TYPE ir_codes_encore_enltv[IR_KEYTAB_SIZE];
 extern IR_KEYTAB_TYPE ir_codes_tt_1500[IR_KEYTAB_SIZE];
 extern IR_KEYTAB_TYPE ir_codes_pinnacle2[IR_KEYTAB_SIZE];
+extern IR_KEYTAB_TYPE ir_codes_pinnacle3[IR_KEYTAB_SIZE];
 extern IR_KEYTAB_TYPE ir_codes_em_pinnacle_usb[IR_KEYTAB_SIZE];
 extern IR_KEYTAB_TYPE ir_codes_em_terratec2[IR_KEYTAB_SIZE];
 extern IR_KEYTAB_TYPE ir_codes_em_pinnacle2_usb[IR_KEYTAB_SIZE];</pre>

<p>
On a plus qu&#039;à patcher et recompiler les modules :
</p>
<pre class="code">patch -p1 &lt; telecommande.patch
make
make install</pre>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit" method="post" action="pctv_usb_stick_remote"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1342880022" /><input type="hidden" name="summary" value="[Patch des pilotes] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="4786-8748" /><input type="submit" value="Modifier" class="button" title="Patch des pilotes" /></div></form></div>
<h2 class="sectionedit6" id="installation_et_configuration_de_lirc">Installation et configuration de lirc</h2>
<div class="level2">

<p>
On doit d&#039;abord trouver quel /dev/input/eventX correspond à la télécommande
</p>
<pre class="code">sudo cat /proc/bus/input/devices</pre>

<p>
Vous devriez voir un paragraphe qui ressemble à ça : 
</p>
<pre class="code">I: Bus=0003 Vendor=0000 Product=0000 Version=0000
N: Name=&quot;em2880/em2870 remote control&quot;
P: Phys=USB
S: Sysfs=/class/input/input8
U: Uniq=
H: Handlers=kbd event8
B: EV=100003
B: KEY=c0000 100040 0 0 0 0 0 180 80000001 9e0000 0 40000 ffd</pre>

<p>
Ici, c&#039;est donc le fichier /dev/input/event8 qui correspond à ma télécommande.
</p>

<p>
Ensuite, on doit installer et paramétrer lirc
</p>
<pre class="code">sudo apt-get install lirc lirc-x</pre>

<p>
Si vous avez déjà installé lirc, vous devez le reconfigurer (en root : sudo) via :
</p>
<pre class="code">sudo dpkg-reconfigure lirc</pre>

<p>
Lors de l’installation, l&#039;installateur demande un modèle de télécommande, sélectionner <strong>Linux input layer (/dev/input/eventX)</strong> puis ensuite mettre <strong>None</strong> a la deuxième question et enfin <strong>/dev/input/eventX</strong> où X représente le numéro de l&#039;event déterminé précédemment.
</p>

<p>
Cette méthode n&#039;est pas valable lorsque le périphérique IR est amovible. Le numéro X de l&#039;event dépend de l&#039;ordre d&#039;introduction des périphériques, il peu changer. Depuis la version 2.6 du noyaux, UDEV crée un lien symbolique avec un nom constant qui pointe vers le bon eventX. Le lien se trouve dans les sous dossiers de <strong>/dev/input/</strong>.
Par exemple pour le récepteur Pinnacle DVB-T 72e ce sera <strong>/dev/inpu/by-path/pci-0000:00:1d.7-event-ir</strong>.
Pour être sûr que le lien pointe viens vers l&#039;event précédant, dans un terminal faites:
</p>
<pre class="code">ls -l /dev/input/by-path/pci-0000:00:1d.7-event-ir</pre>
<pre class="file">lrwxrwxrwx 1 root root 9 2009-12-01 11:39 pci-0000:00:1d.7-event-ir -&gt; ../event9</pre>

<p>
C&#039;est bien celui là, il ne reste plus qu&#039;à le choisir à la troisième étape de configuration.
</p>

<p>
Enfin, on règle les codes de la télécommande : 
</p>
<pre class="code">sudo gedit /etc/lirc/lircd.conf</pre>
<pre class="file">begin remote
    name linux-input-layer
    bits 32
    begin codes
        1                    0x10002
        2                    0x10003
        3                    0x10004
        4                    0x10005
        5                    0x10006
        6                    0x10007
        7                    0x10008
        8                    0x10009
        9                    0x1000a
        0                    0x1000b
        mute                 0x10071
        vol-down             0x10072
        vol-up               0x10073
        power                0x10074
        pause                0x10077
        forward              0x1009f
        rewind               0x100a8
        info                 0x10166
        zoom                 0x10174
        chan-up              0x10192
        chan-down            0x10193
        m                    0x10032
        record               0x100a7
        stop                 0x10080
    end codes
end remote</pre>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit" method="post" action="pctv_usb_stick_remote"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1342880022" /><input type="hidden" name="summary" value="[Installation et configuration de lirc] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="8749-11722" /><input type="submit" value="Modifier" class="button" title="Installation et configuration de lirc" /></div></form></div>
<h2 class="sectionedit7" id="parametrage_de_lirc">Paramétrage de lirc</h2>
<div class="level2">

<p>
Il ne reste plus qu&#039;a créer un fichier ~/.lircrc (cf : <a href="http://doc.ubuntu-fr.org/tutoriel/lircrc" class="wikilink1" title="tutoriel:lircrc">lircrc</a>)
En voici un d&#039;exemple qui ne convient que pour Kaffeine : 
</p>
<pre class="file">begin
        prog = irexec
        button = play
        config = dcop kaffeine KaffeineIface playDvb
end

begin
        prog = irexec
        button = pause
        config = dcop kaffeine KaffeineIface pause
end

begin
        prog = irxevent
        button = record
        config = Key r kaffeine
        config = Key space CurrentWindow
end

begin
        prog = irexec
        button = info
        config = dcop kaffeine KaffeineIface dvbOSD
end

begin
        prog = irexec
        button = stop
        config = dcop kaffeine KaffeineIface stop
end

begin
        prog = irexec
        button = forward
        config = dcop kaffeine KaffeineIface posPlus
end

begin
        prog = irexec
        button = rewind
        config = dcop kaffeine KaffeineIface posMinus
end

begin
        prog = irexec
        button = chan-up
        config = dcop kaffeine KaffeineIface next
end

begin
        prog = irexec
        button = chan-down
        config = dcop kaffeine KaffeineIface previous
end

begin
        prog = irexec
        button = power
        config = dcop kaffeine KaffeineIface quit
end

begin
        prog = irexec
        button = vol-up
        config = dcop kaffeine KaffeineIface volUp
end

begin
        prog = irexec
        button = mute
        config = dcop kaffeine KaffeineIface mute
end

begin
        prog = irexec
        button = vol-down
        config = dcop kaffeine KaffeineIface volDown
end

begin
        prog = irexec
        button = zoom
        config = dcop kaffeine KaffeineIface fullscreen
end

begin
        prog = irexec
        button = up
        config = dcop kaffeine KaffeineIface zoomIn
end

begin
        prog = irexec
        button = down
        config = dcop kaffeine KaffeineIface zoomOut
end

begin
        prog = irexec
        button = 1
        config = dcop kaffeine KaffeineIface setNumber 1
    repeat = 0
end

begin
        prog = irexec
        button = 2
        config = dcop kaffeine KaffeineIface setNumber 2
    repeat = 0
end

begin
        prog = irexec
        button = 3
        config = dcop kaffeine KaffeineIface setNumber 3
    repeat = 0
end

begin
        prog = irexec
        button = 4
        config = dcop kaffeine KaffeineIface setNumber 4
    repeat = 0
end

begin
        prog = irexec
        button = 5
        config = dcop kaffeine KaffeineIface setNumber 5
    repeat = 0
end

begin
        prog = irexec
        button = 6
        config = dcop kaffeine KaffeineIface setNumber 6
    repeat = 0
end

begin
        prog = irexec
        button = 7
        config = dcop kaffeine KaffeineIface setNumber 7
    repeat = 0
end

begin
        prog = irexec
        button = 8
        config = dcop kaffeine KaffeineIface setNumber 8
    repeat = 0
end

begin
        prog = irexec
        button = 9
        config = dcop kaffeine KaffeineIface setNumber 9
    repeat = 0
end

begin
        prog = irexec
        button = 0
        config = dcop kaffeine KaffeineIface setNumber 0
    repeat = 0
end</pre>

<p>
Pour finir, il faut ajouter au démarrage :
</p>

<p>
- Sur gnome : Système-Préférences-Sessions-Programmes au démarrage : irxevent puis irexec
</p>

<p>
- Sur kde :
</p>
<pre class="code">kate ~/.kde/Autostart/irexec
#!/bin/bash
irexec</pre>
<pre class="code">kate ~/.kde/Autostart/irxevent
#!/bin/bash
irxevent</pre>
<pre class="code">chmod u+x ~/.kde/Autostart/irexec ~/.kde/Autostart/irxevent</pre>

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit" method="post" action="pctv_usb_stick_remote"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1342880022" /><input type="hidden" name="summary" value="[Paramétrage de lirc] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="11723-15264" /><input type="submit" value="Modifier" class="button" title="Paramétrage de lirc" /></div></form></div>
<h2 class="sectionedit8" id="voir_aussi">Voir aussi</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <strong>(en)</strong> <a href="http://lineak.sourceforge.net/" class="urlextern" title="http://lineak.sourceforge.net/"  rel="nofollow">Site de lineak</a></div>
</li>
</ul>
<hr />

<p>
<em>Contributeurs principaux : <a href="http://doc.ubuntu-fr.org/utilisateurs/nico4731" class="wikilink1" title="utilisateurs:nico4731">Nico4731</a>, Xouillet</em>.
</p>

<p>
<em> Basé sur « <a href="http://www.marcushellberg.com/pages/projects/digital-tv-in-linux.php" class="urlextern" title="http://www.marcushellberg.com/pages/projects/digital-tv-in-linux.php"  rel="nofollow">Digital TV in Linux</a> » par Marcus Hellberg.</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit" method="post" action="pctv_usb_stick_remote"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1342880022" /><input type="hidden" name="summary" value="[Voir aussi] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="15265-" /><input type="submit" value="Modifier" class="button" title="Voir aussi" /></div></form></div>
<!-- cachefile /srv/www/doc.ubuntu-fr.org/htdocs/data/cache/6/61d996b46b0b91decc04c410120dfb07.xhtml used -->

        <br style="clear:both;" />
        <div id="pageinfo">
            <!--  |  | -->
            <!-- ?tpl_pageinfo()? -->
            <br />
            Le contenu de ce wiki est sous licence : <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" rel="license" target="_blank">CC BY-SA v3.0</a>
        </div> 
      </div>

      
      <div id="navigation">

        <ul>
          <li class="menu"><a href="http://www.ubuntu-fr.org" class="title" id="menu-accueil"><span>Accueil</span></a></li>
          <li class="menu" id="active">
            <a href="index.html"  class="title" id="menu-doc"><span>Documentation</span></a>
            <ul>
              <li id="navWiki" class="cat">
                <h2>Actions</h2>
                <ul>
                  <li><a href="http://doc.ubuntu-fr.org/pctv_usb_stick_remote?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/pctv_usb_stick_remote?do=edit&amp;rev=0"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/pctv_usb_stick_remote?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li>
                  <li></li>
                  <li><a href="http://doc.ubuntu-fr.org/pctv_usb_stick_remote?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/pctv_usb_stick_remote?do=backlink"  class="action backlink" rel="nofollow" title="Liens vers cette page">Liens vers cette page</a></li>
                  <li></li>
                  <li></li>
                  <li></li>
                </ul>
              </li>
              <li id="navDivers" class="cat">
                <h2>Divers</h2>
                <ul>
                  <li><bdi><a href="wiki/participer_wiki" class="wikilink1" title="wiki:participer_wiki">Participer à la documentation</a></bdi></li>
                  <li><bdi><a href="documentation_hors_ligne" class="wikilink1" title="documentation_hors_ligne">Documentation hors ligne</a></bdi></li>
                  <li><a href="http://www.ubuntu-fr.org/telechargement" title="T&eacute;l&eacute;charger Ubuntu">T&eacute;l&eacute;charger Ubuntu</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="menu"><a href="http://forum.ubuntu-fr.org"  class="title" id="menu-forum"><span>Forum</span></a></li>
          <li class="menu"><a href="http://planet.ubuntu-fr.org"  class="title" id="menu-planet"><span>Planet</span></a></li>
        </ul>

      </div>
      <div id="references-ufr">
        <ul id="legal-ufr">
          <li><a href="http://www.ubuntu-fr.org/contacts">Contact</a></li>
        </ul>

        <ul id="sponsors-ufr">
          <li><a href="http://www.dokuwiki.org/dokuwiki" id="dokuwiki">Propulsé par Dokuwiki</a></li>
        </ul>
      </div>

    </div>
    <!-- $Id$ -->

    <!-- Piwik Image Tracker -->
    <!-- img src="http://piwik.infra.ubuntu-fr.org/piwik.php?idsite=2&amp;rec=1" style="border:0" alt="" /-->
    <!-- End Piwik -->

  </body>
</html>
