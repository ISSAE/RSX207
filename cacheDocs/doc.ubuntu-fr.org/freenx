<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr" dir="ltr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript"/>
    <meta http-equiv="Content-Style-Type" content="text/css"/>
    <meta http-equiv="Content-Language" content="fr"/>
    <title>freenx - Documentation Ubuntu Francophone</title>
    <meta name="Description" content="Documentation francophone pour la distribution Ubuntu" lang="fr" />
    <meta name="language" content="fr-FR" />

    <!--[if IE 8]>
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <![endif]-->
        <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2014-11-27T19:14:40+0100"/>
<meta name="keywords" content="dapper,feisty,gutsy,serveur,bureau a distance,brouillon"/>
<link rel="search" type="application/opensearchdescription+xml" href="lib/exe/opensearch.php" title="Documentation Ubuntu Francophone"/>
<link rel="start" href="index.html"/>
<link rel="contents" href="http://doc.ubuntu-fr.org/freenx?do=index" title="Plan du site"/>
<link rel="alternate" type="application/rss+xml" title="Derniers changements" href="feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Namespace actuel" href="feed.php?mode=list&amp;ns="/>
<link rel="edit" title="Modifier cette page" href="http://doc.ubuntu-fr.org/freenx?do=edit"/>
<link rel="alternate" type="text/html" title="HTML brut" href="http://doc.ubuntu-fr.org/_export/xhtml/freenx"/>
<link rel="alternate" type="text/plain" title="Wiki balise" href="http://doc.ubuntu-fr.org/_export/raw/freenx"/>
<link rel="canonical" href="freenx"/>
<link rel="stylesheet" type="text/css" href="lib/exe/css.php?t=ubuntu-2010&amp;tseed=4af22dedc19f28c99fa67afabbb173df"/>
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"id":"freenx","namespace":""};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="lib/exe/js.php?tseed=4af22dedc19f28c99fa67afabbb173df"></script>
    <link rel="shortcut icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/icone.png" type="image/x-icon" />
    <link rel="apple-touch-icon" href="http://www-static.ubuntu-fr.org/theme2010/images/commun/ubuntu/touch-ico.png" />

    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc.css" />
    <link rel="stylesheet" media="screen" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-ubuntu.css" />
    <link rel="stylesheet" media="print" type="text/css" title="Design Ubuntu-fr" href="http://www-static.ubuntu-fr.org/theme2010/css/doc-print.css" />

    <script type="text/javascript">
      var menu_hidden;
      var static_url = "UFR_STATIC";
    </script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/menu.js" type="text/javascript"></script>
    <script src="http://www-static.ubuntu-fr.org/theme2010/js/common.js" type="text/javascript"></script>
  </head>
  <body>

    <div id="accessibar">
      <a href="freenx#main" tabindex="1">Contenu</a> | <a href="freenx#qsearch__in" tabindex="2">Rechercher</a> | <a href="freenx#navigation" tabindex="3">Menus</a>
    </div>

    <div id="page">

      <div id="header">

        <div id="logo">
          <h1>Ubuntu-fr</h1>
          <a href="index.html" title="Accueil de la documentation">Communauté francophone d'utilisateurs d'Ubuntu</a>
        </div>

        <form action="http://ubuntu-fr.org/recherche" accept-charset="utf-8" id="search" onsubmit="if (document.getElementById('qsearch__in').value == 'Recherche rapide....') {document.getElementById('qsearch__in').value = '';}">
          <fieldset>
            <label for="qsearch__in">Recherche : </label><input type="text" value="Recherche rapide...." id="qsearch__in" accesskey="f" name="sk_q" alt="[F]" size="34" tabindex="4" />
            <label for="tsearch_field">Chercher dans : </label><select name="sk_engine" tabindex="5" id="tsearch_field" title="Chercher dans">
              <option value="all">Site</option>
              <option selected="selected" value="doc">Documentation</option>
              <option value="forum">Forum</option>
              <option value="planet">Planet</option>
            </select>
            <input type="submit" value="ok" class="button" alt="Lancer la recherche" tabindex="5" />
          </fieldset>
        </form>
        <!--[if lte IE 7]><div class="clear"></div><![endif]-->

        <form action="freenx" accept-charset="utf-8" id="login_top" method="post">
          <fieldset>
            <label for="u_field">Identifiant : </label><input type="text" value="Identifiant" name="u" id="u_field" size="9" /><label for="p_field">Mot de passe : </label><input type="password" value="Mot de passe" name="p" id="p_field" size="9" alt="Mot de passe" /><input type="submit" value="connexion" id="connect" /> / <a href="http://forum.ubuntu-fr.org/register.php">inscription</a>
          </fieldset>
        </form>
 

      </div>

      <div id="navbar">
          <h2 id="pagetitle"><a href="freenx" >freenx</a></h2>
      </div>

      
      <div id="main" class="dokuwiki">

        <div id="hidemenu" title="Masquer le menu"></div>

        <div id="pagerror"></div>
                <div class="notetag">Selon les <a href="tags">tags</a> présents sur cette page, celle-ci est ancienne et ne contient plus d'informations sur une des  <a href="versions">versions supportées d'Ubuntu</a>.<br />
Cette page est en cours de rédaction.<br />
<a href="wiki/participer_wiki">Apportez votre aide…</a>
</div>
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table des matières</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="freenx#introduction">Introduction</a></div></li>
<li class="level1"><div class="li"><a href="freenx#installation_et_configuration_de_ssh">Installation et configuration de SSH</a></div></li>
<li class="level1"><div class="li"><a href="freenx#installation_et_configuration_de_freenx">Installation et configuration de Freenx</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="freenx#installation_depuis_depot_tiers">Installation depuis dépôt tiers</a></div></li>
<li class="level2"><div class="li"><a href="freenx#configuration">Configuration</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="freenx#installation_de_freenx">Installation de Freenx</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="freenx#premiere_methode">Première méthode</a></div></li>
<li class="level2"><div class="li"><a href="freenx#seconde_methode">Seconde méthode</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="freenx#ajout_d_utilisateurs">Ajout d&#039;utilisateurs</a></div></li>
<li class="level1"><div class="li"><a href="freenx#probleme_de_connexion_message_de_coupure_reseau">Problème de connexion (message de coupure réseau)</a></div></li>
<li class="level1"><div class="li"><a href="freenx#erreur_a_la_connexion_du_typeerrorcall_to_bind_failed_for_font_tcp_port_xxxxx">Erreur à la connexion du type : &quot;Error: Call to bind failed for font TCP port xxxxx&quot;</a></div></li>
<li class="level1"><div class="li"><a href="freenx#installation_et_configuration_du_client_nomachine">Installation et configuration du client NoMachine</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->
<div class="tags"><span>
	<a href="dapper" class="wikilink1" title="dapper" rel="tag">Dapper</a>,
	<a href="feisty" class="wikilink1" title="feisty" rel="tag">Feisty</a>,
	<a href="gutsy" class="wikilink1" title="gutsy" rel="tag">Gutsy</a>,
	<a href="serveur" class="wikilink1" title="serveur" rel="tag">serveur</a>,
	<a href="bureau_a_distance" class="wikilink1" title="bureau_a_distance" rel="tag">bureau à distance</a>,
	<a href="brouillon" class="wikilink1" title="brouillon" rel="tag">BROUILLON</a>
</span></div>
<hr />

<h1 class="sectionedit1" id="freenx_mise_en_œuvre">Freenx, mise en œuvre</h1>
<div class="level1">

<p>
<p><div class="noteimportant">FreeNX n&#039;est pas compatible avec les dernières versions du client de <a href="http://www.nomachine.com/" class="urlextern" title="http://www.nomachine.com/"  rel="nofollow">NoMachine</a>. Le <a href="serveur_nomachine" class="wikilink1" title="serveur_nomachine">serveur NoMachine</a> est donc indispensable si vous souhaitez installer un client sous Windows Vista. (corrigé avec la dernière version) 
</div></p>
</p>

<p>
<p><div class="noteimportant">Le développement de freenx semble fortement ralenti depuis 2008<sup><a href="freenx#fn__1" id="fnt__1" class="fn_top">1)</a></sup>. Le programme <a href="http://doc.ubuntu-fr.org/x2go" class="wikilink1" title="x2go">x2go</a> prends la suite avec sa simplicité d&#039;instalation et ses clients libres pour tous <abbr title="Operating System">OS</abbr>. 
</div></p>
</p>

<p>
<p><div class="noteclassic">Le serveur FreeNX des dépôts launchpad ppa fonctionne sans problème avec le dernier client NX NoMachines (3.3.0-6)
</div></p>
</p>

<p>
NoMachine met maintenant gratuitement à disposition sur son site web un serveur dont l&#039;installation est très facile, mais il n&#039;est pas open source. Vivement une mise à disposition via Synaptic. Cependant le nombre d&#039;utilisateurs pouvant se connecter via le serveur de NoMachine est limité à 2 ! Dans les autres cas il faut utiliser FreeNX.
</p>

<p>
Que vous vouliez installer le client ou le serveur, il faudra commencer par installer le package node. Il y a une dépendance avec libstdc++6 que vous devez donc installer préalablement avec synaptic. Ensuite vous installez nx free server ou le client. Vous trouverez avec chaque package les instructions pour l&#039;installer. C&#039;est beaucoup plus simple que pour freenx. 
</p>

<p>
Les directives de cette page pour configurer ssh correctement restent d&#039;actualité.
</p>

<p>
Une page spécifique à l&#039;installation et la configuration du client et du serveur NoMachine devrait être réalisée. (elle existe maintenant <a href="serveur_nomachine" class="wikilink1" title="serveur_nomachine">ici</a>)
</p>

</div>
<div class='secedit editbutton_section editbutton_1'><form class="button btn_secedit" method="post" action="freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1417112080" /><input type="hidden" name="summary" value="[Freenx, mise en œuvre] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="74-1810" /><input type="submit" value="Modifier" class="button" title="Freenx, mise en œuvre" /></div></form></div>
<h2 class="sectionedit2" id="introduction">Introduction</h2>
<div class="level2">

<p>
Freenx est un serveur que vous installez sur votre ordinateur Ubuntu et qui vous permettra de vous y connecter à partir d&#039;un autre ordinateur. Freenx surclasse les autres solutions du même type grâce à l&#039;utilisation d&#039;un protocole compressé propriétaire. La différence est particulièrement notable si la connexion passe par une liaison WiFi, <abbr title="Asymetric Digital Subscriber Line">ADSL</abbr> ou même modem. 
</p>

<p>
Le système est, à la base, développé et commercialisé par <a href="http://www.nomachine.com/" class="urlextern" title="http://www.nomachine.com/"  rel="nofollow">NoMachine</a>. Mais ils ont mis les sources de leur serveur à disposition du public sous license <abbr title="GNU General Public License">GPL</abbr>. Freenx est une réalisation de la communauté du logiciel libre qui utilise ces sources. Ce serveur est parfaitement compatible avec les clients fournis gratuitement par NoMachine pour différents systèmes d&#039;exploitation.  
</p>

<p>
Pour l&#039;illustration de la mise en œuvre de Freenx, nous utiliserons le client Windows.
</p>

<p>
Pour l&#039;installation nous utilisons le terminal, même si certaines opérations pourraient se faire avec Synaptic. Pour ouvrir un terminal, lancez le programme <em>Applications → Accessoires → Terminal</em>.
</p>

</div>
<div class='secedit editbutton_section editbutton_2'><form class="button btn_secedit" method="post" action="freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1417112080" /><input type="hidden" name="summary" value="[Introduction] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="1811-2923" /><input type="submit" value="Modifier" class="button" title="Introduction" /></div></form></div>
<h2 class="sectionedit3" id="installation_et_configuration_de_ssh">Installation et configuration de SSH</h2>
<div class="level2">

<p>
La connexion à Freenx se fait via SSH.
Pour installer SSH, <a href="tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez le paquet</a> <strong>ssh</strong>.
Lorsque c&#039;est terminé, ssh est opérationnel. 
</p>

<p>
Pour pouvoir se connecter à Freenx, il faut changer certains paramètres <a href="tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">dans le fichier</a> de configuration <strong>/etc/ssh/sshd_config</strong>. 
</p>

<p>
Dans ce fichier vous devriez trouver une section « Authentification ». Modifiez cette section pour avoir ce qui suit :
</p>
<pre class="file"># Authentication:
LoginGraceTime 120
PermitRootLogin no
StrictModes yes
 
RSAAuthentication yes
PubkeyAuthentication yes
AuthorizedKeysFile      %h/.ssh/authorized_keys</pre>

<p>
Normalement, vous devriez n&#039;avoir qu&#039;a dé-commenter la dernière ligne. Le « <code>PermitRootLogin no</code> » n&#039;est pas indispensable. C&#039;est juste une mesure de sécurité. Songez aussi à changer le numéro de port; le port par défaut est en effet la cible de constantes tentatives de pénétration automatisées. Si vous ne comprenez pas de quoi il s&#039;agit, ne vous en souciez pas. Ce changement n&#039;est pas critique pour utiliser Freenx ou pour la sécurité, étant donné la sécurité inhérente à ssh. 
</p>

<p>
Il faut maintenant faire en sorte que SSH prenne en compte cette nouvelle configuration. Pour cela, tapez la commande suivante :
</p>
<pre class="code">sudo /etc/init.d/ssh reload</pre>

<p>
À partir de Lucid Lynx (Ubuntu 10.04) la commande à utiliser pour relancer ssh est:
</p>
<pre class="code">sudo service ssh restart</pre>

</div>
<div class='secedit editbutton_section editbutton_3'><form class="button btn_secedit" method="post" action="freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1417112080" /><input type="hidden" name="summary" value="[Installation et configuration de SSH] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="2924-4416" /><input type="submit" value="Modifier" class="button" title="Installation et configuration de SSH" /></div></form></div>
<h2 class="sectionedit4" id="installation_et_configuration_de_freenx">Installation et configuration de Freenx</h2>
<div class="level2">

<p>
<p><div class="notetip">Jaunty 9.04 : voici un Script en version 0.1 pour simplifier l&#039;installation et la configuration : <a href="http://forum.ubuntu-fr.org/viewtopic.php?pid=2748883#p2748883" class="urlextern" title="http://forum.ubuntu-fr.org/viewtopic.php?pid=2748883#p2748883"  rel="nofollow">http://forum.ubuntu-fr.org/viewtopic.php?pid=2748883#p2748883</a>
</div></p>
</p>

<p>
<p><div class="notetip">Utilisateurs de Lucid (10.04), des instructions sont disponibles <a href="https://help.ubuntu.com/community/FreeNX" class="urlextern" title="https://help.ubuntu.com/community/FreeNX"  rel="nofollow">sur le wiki anglophone</a> et permettent une installation beaucoup plus rapide, notamment grâce au script <em>nxsetup</em> maintenant fourni avec le paquet FreeNX et qui automatise toute l&#039;installation
</div></p>
</p>

<p>
FreeNX est disponible dans deux dépôts tiers, l&#039;un pour Gutsy, l&#039;autre pour Debian. Bien que celui de Gutsy ne contienne pas la version la plus récente, ça fonctionne.
</p>

<p>
<p><div class="noteimportant">NOTE ( Utilisateurs d&#039;INTREPID IBEX ) : Le dépôt de freenx présent sous Hardy ne fonctionne pas avec la version 8.10. 
Il est alors nécessaire d&#039;utiliser le dépôt de FreeNX Team PPA
</div></p>
</p>

<p>
pour cela, ouvrez avec votre éditeur de texte favori le fichier <em>/etc/apt/sources.list</em>
</p>

<p>
et y ajouter les lignes suivantes:
</p>
<pre class="code">    deb http://ppa.launchpad.net/freenx-team/ppa/ubuntu intrepid main</pre>
<pre class="code">    deb-src http://ppa.launchpad.net/freenx-team/ppa/ubuntu intrepid main</pre>

<p>
<p><div class="noteclassic">Pour precise (12.04), remplacez dans les deux lignes précédentes &quot;intrepid&quot; par &quot;precise&quot;.
</div></p>
</p>

<p>
Il est ensuite nécessaire d&#039;ajouter la clé <abbr title="Pretty Good Privacy">PGP</abbr> à votre distribution, on ouvre donc un terminal:
</p>
<pre class="code">    gpg --keyserver subkeys.pgp.net --recv-keys D018A4CE</pre>
<pre class="code">    sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 2A8E3034D018A4CE</pre>

<p>
<p><div class="notetip">Si la commande ci-dessus ne fonctionne pas, vous pouvez taper la commande suivante:
</p>
<pre class="code">    gpg --keyserver hkp://keyserver.ubuntu.com:11371 --recv-key D018A4CE &amp;&amp; gpg -a --export D018A4CE | sudo apt-key add -</pre>

<p>

</div></p>
</p>

<p>
La clé est ajoutée, on peut maintenant mettre à jour la liste des dépôts puis installer le logiciel:
</p>
<pre class="code">    sudo apt-get update</pre>
<pre class="code">    sudo apt-get install freenx</pre>

<p>
Une fois installé, reste à paramétrer le serveur, et sécuriser le tout. <strong>Pour cela deux choses, d&#039;une part modifier le port ssh par défaut, puis d&#039;autre par créer votre propre certificat.</strong>
</p>

<p>
Ouvrez le fichier de configuration de freenx:
</p>
<pre class="code">    sudo nano /etc/nxserver/node.conf</pre>

<p>
trouvez la ligne suivante:
</p>
<pre class="code">    # The port number where local &#039;sshd&#039; is listening.
    #SSHD_PORT=22</pre>

<p>
décommentez et modifier le port ssh par celui souhaité
</p>

<p>
Attention le port doit être celui précisé au préalable dans le fichier de configuration de votre serveur ssh, qui se trouve dans <strong>/etc/ssh/sshd_config</strong>
</p>

<p>
Ce qui donnera par exemple:
</p>
<pre class="code">    # The port number where local &#039;sshd&#039; is listening.
    SSHD_PORT=8008</pre>

<p>
Une fois le port ssh par défaut modifié, il est préférable de créer votre propre certificat, que vous préciserez lorsque vous vous connecterez à partir d&#039;un client quelconque.
</p>

<p>
Toujours dans un terminal:
</p>
<pre class="code">    sudo dpkg-reconfigure freenx-server</pre>

<p>
Valider la première page, puis sur la seconde sélectionnez &#039;<em>Create new custom keys</em>&#039;.
</p>

<p>
Une clé nommée <strong>client.id_dsa.key</strong> sera créée dans le répertoire <em>/var/lib/nxserver/home/custom_keys</em>/, que vous vous empresserez de copier dans votre <em>Home</em>.
</p>
<pre class="code">    sudo cp /var/lib/nxserver/home/custom_keys/client.id_dsa.key ~/</pre>

<p>
Ca sera cette clé qu&#039;il faudra entrer à partir du poste client, pensez donc à la copier sur un espace sécurisé, sur le net pour y avoir accès depuis un autre poste!
</p>

<p>
Votre serveur est désormais paramétré, rendez vous sur le site de No Machine afin de télécharger le client (<a href="http://www.nomachine.com/download.php" class="urlextern" title="http://www.nomachine.com/download.php"  rel="nofollow">http://www.nomachine.com/download.php</a>) afin de prendre la main à distance. 
</p>

<p>
lors de la copie sous votre Home, la clé appartient au compte Root. Pour pouvoir la copier sur votre clé usb vous devez changer le propriétaire :
ls -alp /home/votrecompte/client.id_dsa.key pour vérifier les droits
sudo chown votrecompte:votregroupe /home/votrecompte/client.id_dsa.key pour changer le propriétaire
ls -alp /home/votrecompte/client.id_dsa.key pour vérifier les nouveaux droits
Maintenant vous pouvez la copier sur votre clé.
</p>

</div>
<div class='secedit editbutton_section editbutton_4'><form class="button btn_secedit" method="post" action="freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1417112080" /><input type="hidden" name="summary" value="[Installation et configuration de Freenx] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="4417-8499" /><input type="submit" value="Modifier" class="button" title="Installation et configuration de Freenx" /></div></form></div>
<h3 class="sectionedit5" id="installation_depuis_depot_tiers">Installation depuis dépôt tiers</h3>
<div class="level3">

<p>
<p><div class="notetip">Si vous avez suivi un tas de tutoriels pour ajouter les logiciels qui manquaient à la base, il y a des chances que votre liste de dépôts tiers ne vous dise plus grand-chose : n&#039;hésitez donc pas à écrire un commentaire pour chacun d&#039;eux pour savoir ce qu&#039;ils contiennent !
</div></p>
</p>

<p>
<a href="http://doc.ubuntu-fr.org/tutoriel/comment_modifier_sources_maj" class="wikilink1" title="tutoriel:comment_modifier_sources_maj">Ajouter les dépôts suivants</a> à vos sources de mises à jour (selon votre version) :
</p>

</div>

<h4 id="ubuntu_804">Ubuntu 8.04</h4>
<div class="level4">
<pre class="file">deb http://www.datakeylive.com/ubuntu hardy main</pre>

<p>
Il n&#039;y a pas de clé gpg disponible, ce qui génère une erreur lors du rechargement de l&#039;information des dépôts. Cela n&#039;est pas bloquant.
</p>

</div>

<h4 id="ubuntu_710">Ubuntu 7.10</h4>
<div class="level4">
<pre class="file">deb http://www.datakeylive.com/ubuntu gutsy main</pre>
<pre class="code">wget http://www.datakeylive.com/ubuntu/dists/gutsy/wjeremy.key -O - | sudo apt-key add -
wget http://www.datakeylive.com/ubuntu/dists/gutsy/alivesoftware.key -O - | sudo apt-key add -</pre>

</div>

<h4 id="ubuntu_704">Ubuntu 7.04</h4>
<div class="level4">
<pre class="file">deb http://mirror2.ubuntulinux.nl/ feisty-seveas all
deb-src http://mirror2.ubuntulinux.nl/ feisty-seveas all</pre>

</div>

<h4 id="ubuntu_610">Ubuntu 6.10</h4>
<div class="level4">
<pre class="file">deb http://mirror2.ubuntulinux.nl/ edgy-seveas all
deb-src http://mirror2.ubuntulinux.nl/ edgy-seveas all</pre>

<p>
<p><div class="noteclassic">FreeNX n&#039;est pas disponible dans le dépôt Edgy de ubuntulinux.nl.
</div></p>
</p>

</div>

<h4 id="ubuntu_606_lts">Ubuntu 6.06 LTS</h4>
<div class="level4">
<pre class="file">deb http://mirror2.ubuntulinux.nl/ dapper-seveas all
deb-src http://mirror2.ubuntulinux.nl/ dapper-seveas all</pre>

</div>
<div class='secedit editbutton_section editbutton_5'><form class="button btn_secedit" method="post" action="freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1417112080" /><input type="hidden" name="summary" value="[Installation depuis dépôt tiers] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="8500-10005" /><input type="submit" value="Modifier" class="button" title="Installation depuis dépôt tiers" /></div></form></div>
<h3 class="sectionedit6" id="configuration">Configuration</h3>
<div class="level3">

<p>
Tapez la commande suivante dans le terminal. 
</p>
<pre class="code">gpg --keyserver subkeys.pgp.net --recv-keys 1135D466
gpg --export --armor 1135D466 | sudo apt-key add -</pre>

<p>
S&#039;il n&#039;existe pas déjà, <a href="tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">créez un fichier</a> <strong>/etc/apt/preferences</strong> dans lequel vous ajoutez les lignes suivantes :
</p>
<pre class="file">Package: *
Pin: release o=Seveas
Pin-Priority: 50</pre>

<p>
Ces règles indiquent que cette source ne sera prise en considération que si le package ne se trouve pas dans les sources standards. Pour vérifier que cette règle est bien prise en compte tappez la commande suivante après avoir mise-à-jour le cache : 
</p>
<pre class="code">sudo apt-get update
apt-cache policy</pre>

<p>
Normalement vous devriez voir ceci au début du listing :
</p>
<pre class="code">Fichiers du paquet :
 100 /var/lib/dpkg/status
     release a=now
  50 http://seveas.ubuntulinux.nl breezy-seveas/all Packages
     release v=5.10,o=Seveas,a=breezy-seveas,l=Seveas,c=all
     origin seveas.ubuntulinux.nl
 500 http://security.ubuntu.com
 ...</pre>

<p>
Si tout s&#039;est bien passé jusqu&#039;ici, vous êtes prêt pour installer Freenx. Cette fastidieuse opération ne sera plus nécessaire le jour où Freenx sera mis à disposition dans les dépôts Universe ou Multiverse ou mieux encore dans le dépôt Main.
</p>

</div>
<div class='secedit editbutton_section editbutton_6'><form class="button btn_secedit" method="post" action="freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1417112080" /><input type="hidden" name="summary" value="[Configuration] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="10006-11298" /><input type="submit" value="Modifier" class="button" title="Configuration" /></div></form></div>
<h2 class="sectionedit7" id="installation_de_freenx">Installation de Freenx</h2>
<div class="level2">

</div>
<div class='secedit editbutton_section editbutton_7'><form class="button btn_secedit" method="post" action="freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1417112080" /><input type="hidden" name="summary" value="[Installation de Freenx] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="11299-11334" /><input type="submit" value="Modifier" class="button" title="Installation de Freenx" /></div></form></div>
<h3 class="sectionedit8" id="premiere_methode">Première méthode</h3>
<div class="level3">

<p>
Là, les choses redeviennent plus familières et plus simple : <a href="tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">installez le paquet</a> <strong>freenx</strong>.
</p>

<p>
À un moment donné, une question importante et décisive vous sera posée par le programme d&#039;installation. Il faut spécifier quel type de configuration vous voulez installer. Sélectionnez « Custom Keys ». Ceci indique que la procédure d&#039;installation doit générer des bi-clés d&#039;authentification spécifiques à votre configuration. 
</p>

<p>
Lorsque l&#039;installation est terminée, votre ordinateur est presque opérationnel. Il y a juste quelques détails à régler. 
</p>

<p>
Pour cela il est plus aisé de se mettre en mode administrateur. Puis allez dans le répertoire où sont placés les bi-clés d&#039;authentification.
</p>
<pre class="code">sudo -i
cd /var/lib/nxserver/home/.ssh
ls</pre>

<p>
Vous verrez que l&#039;installation de Freenx a créé un fichier « authorized_keys2 ». Le « 2 » est de trop. Pour le retirer tapez la commande suivante :
</p>
<pre class="code">mv authorized_keys2 authorized_keys</pre>

<p>
À côté de ce fichier, vous trouverez deux fichiers nommés « id_dsa » et « id_dsa.pub ». Le fichier qui nous intéresse ici est « id_dsa » car il contient la clé privée. C&#039;est un fichier texte dont vous pouvez afficher le contenu avec la commande suivante :
</p>
<pre class="code"># cat client.id_dsa.key
-----BEGIN DSA PRIVATE KEY-----
MIIBuwIBAAKBgQDXfUJs6cUZ67OgM//u3XV7nZD3k/nsCv/V/tXiGqvNk2FHXT3/
...
AFXytgRve3vJgWPIXiBV
-----END DSA PRIVATE KEY-----</pre>

<p>
Il vous faudra copier cette clé (le texte) sur l&#039;ordinateur distant. Là je n&#039;ai pas de ligne de commande à vous proposer. Vous devrez soit utiliser une disquette, une clé <abbr title="Universal Serial Bus">USB</abbr>, ou un autre moyen de transfert. Si vous avez mis en œuvre Samba, l&#039;opération sera triviale à réaliser. 
</p>

<p>
Arrivés ici, nous en avons fini avec la configuration de votre ordinateur Ubuntu. Nous pouvons passer au client qui dans notre cas d&#039;école est un ordinateur Windows XP. 
</p>

</div>
<div class='secedit editbutton_section editbutton_8'><form class="button btn_secedit" method="post" action="freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1417112080" /><input type="hidden" name="summary" value="[Première méthode] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="11335-13286" /><input type="submit" value="Modifier" class="button" title="Première méthode" /></div></form></div>
<h3 class="sectionedit9" id="seconde_methode">Seconde méthode</h3>
<div class="level3">

<p>
<a href="tutoriel/comment_installer_un_paquet" class="wikilink1" title="tutoriel:comment_installer_un_paquet">Installez les paquets</a> <strong>expect openssh-server tcl8.4 nxlibs nxagent nxproxy freenx nxclient</strong>.
</p>

<p>
Pour les manipulations décrites ci-dessus, les fichiers se trouvent respectivement à <strong>/home/votre_login/.ssh</strong> pour <em>authorized_keys2</em> et <strong>/etc/nxserver/<em class="u">users</em>.id_dsa</strong> pour la clé privée. Il n&#039;y a pas de « .key » final.
</p>

<p>
Ainsi, chaque utilisateur pourra récupérer sa clé privée dans son répertoire.
</p>

<p>
L&#039;inconvénient est que ça nécessite un moyen de transmission sécuritaire, ou réputé tel : une clé <abbr title="Universal Serial Bus">USB</abbr>. Ce n&#039;est pas pratique dans le cas où vous souhaiteriez donner accès à un utilisateur qui n&#039;a jamais eu accès physiquement à la machine.
</p>

</div>
<div class='secedit editbutton_section editbutton_9'><form class="button btn_secedit" method="post" action="freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1417112080" /><input type="hidden" name="summary" value="[Seconde méthode] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="13287-14025" /><input type="submit" value="Modifier" class="button" title="Seconde méthode" /></div></form></div>
<h2 class="sectionedit10" id="ajout_d_utilisateurs">Ajout d&#039;utilisateurs</h2>
<div class="level2">

<p>
Avant de pouvoir se connecter à la machine à distance, les utilisateurs doivent être ajoutés; comme le système NX est basé sur SSH, on ne peut ajouter que les utilisateurs qui possèdent leur dossier dans <strong>/home</strong>.
</p>

<p>
Tapez :
</p>
<pre class="code">sudo nxserver --adduser votre_login</pre>

<p>
ainsi qu&#039;un mot de passe:
</p>
<pre class="code">sudo nxserver --passwd &lt;username&gt;</pre>

<p>
Redémarrez ensuite le serveur NX:
</p>
<pre class="code">sudo nxserver --restart</pre>

</div>
<div class='secedit editbutton_section editbutton_10'><form class="button btn_secedit" method="post" action="freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1417112080" /><input type="hidden" name="summary" value="[Ajout d'utilisateurs] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="14026-14457" /><input type="submit" value="Modifier" class="button" title="Ajout d'utilisateurs" /></div></form></div>
<h2 class="sectionedit11" id="probleme_de_connexion_message_de_coupure_reseau">Problème de connexion (message de coupure réseau)</h2>
<div class="level2">

<p>
Le début de la connexion semble fonctionner mais au démarrage du serveur X, la connexion se ferme brutalement. Pour faire fonctionner la connexion, il faut <a href="tutoriel/comment_editer_un_fichier" class="wikilink1" title="tutoriel:comment_editer_un_fichier">ajouter dans le fichier de configuration</a> de FreeNX (vers la fin) <strong>/etc/nxserver/node.conf</strong> la ligne suivante à mettre sur une seule ligne et sans espace après les virgules :
</p>
<pre class="file">AGENT_EXTRA_OPTIONS_X=&quot;-fp
/usr/share/fonts/X11/misc/,
/usr/share/fonts/X11/75dpi/:unscaled,
/usr/share/fonts/X11/100dpi/:unscaled,
/usr/share/fonts/X11/Type1/,
/usr/share/fonts/X11/100dpi/,
/usr/share/fonts/X11/75dpi/&quot;
/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType</pre>

</div>
<div class='secedit editbutton_section editbutton_11'><form class="button btn_secedit" method="post" action="freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1417112080" /><input type="hidden" name="summary" value="[Problème de connexion (message de coupure réseau)] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="14458-15184" /><input type="submit" value="Modifier" class="button" title="Problème de connexion (message de coupure réseau)" /></div></form></div>
<h2 class="sectionedit12" id="erreur_a_la_connexion_du_typeerrorcall_to_bind_failed_for_font_tcp_port_xxxxx">Erreur à la connexion du type : &quot;Error: Call to bind failed for font TCP port xxxxx&quot;</h2>
<div class="level2">

<p>
Si on utilise plusieurs serveurs différents avec le même client, il peut y avoir des conflits d&#039;adresses. Voici l&#039;erreur rapportée côté client.
</p>
<pre class="file">Info: Connection with remote proxy completed.
Error: Call to bind failed for font TCP port 11000. Error is 48 &#039;Address already in use&#039;.
Session: Session terminated at &#039;Mon May 30 21:58:21 2011&#039;.</pre>

<p>
Si on a accès à l&#039;un des serveurs, la solution consiste à changer le numéro de base des sessions
</p>
<ul>
<li class="level1"><div class="li"> soit dans  <strong>/etc/nxserver/node.conf</strong></div>
</li>
<li class="level3"><div class="li"> ou bien en ajoutant un fichier nommé <strong>11_display_base</strong> (les deux chiffres &gt; 10 en tête du nom du fichier sont importants) dans le répertoire <strong>/usr/share/freenx-server/node.conf.d</strong> avec comme contenu : </div>
</li>
</ul>
<pre class="file"># The base display number from which sessions are started.
DISPLAY_BASE=2000</pre>

<p>
Ainsi les ports utilisés seront 12000 et suivants au lieu de 11000, ce qui évitera le conflit.
</p>

</div>
<div class='secedit editbutton_section editbutton_12'><form class="button btn_secedit" method="post" action="freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1417112080" /><input type="hidden" name="summary" value="[Erreur à la connexion du type : Error: Call to bind failed for font TCP port xxxxx] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="15185-16199" /><input type="submit" value="Modifier" class="button" title="Erreur à la connexion du type : Error: Call to bind failed for font TCP port xxxxx" /></div></form></div>
<h2 class="sectionedit13" id="installation_et_configuration_du_client_nomachine">Installation et configuration du client NoMachine</h2>
<div class="level2">

<p>
Rendez vous sur le site web de <a href="http://www.nomachine.com/" class="urlextern" title="http://www.nomachine.com/"  rel="nofollow">NoMachine</a> et téléchargez le client qui vous convient. Dans notre cas se sera celui de Windows.
</p>

<p>
L&#039;installation est une procédure classique pour tout utilisateur Windows. A la fin il vous propose de configurer une connexion à l&#039;aide d&#039;un assistant (Wizard). 
</p>
<blockquote><div class="no">
 <img src="lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> : à développer</div></blockquote>

<p>
Dans la fenêtre configurer, il y a un bouton « Key ». Là vous verrez la clé privée du client. Remplacez la par celle qui se trouve sur votre ordinateur Ubuntu. Sauvez. Dans les onglets, vous trouverez une option pour activer le chiffrement SSL. C&#039;est fortement conseillé. Il faut également activer la transmission du son. Ce n&#039;est pas activé par défaut. 
</p>

<p>
Choisissez un nom pour la session. Je vous suggère de créer un raccourci sur le bureau. Pensez à configurer le numéro de port et le nom de votre ordinateur Ubuntu comme il se doit. 
</p>

<p>
Si vous rencontrez des problèmes avec la version 2.0 du client proposé par NoMachine, <p><div class="notewarning">essayez la version 1.5 disponible <a href="http://documentation.dedibox.fr/doku.php?id=distrib:desktop&amp;s=nomachine" class="urlextern" title="http://documentation.dedibox.fr/doku.php?id=distrib:desktop&amp;s=nomachine"  rel="nofollow">ici</a> &gt; Lien mort
</div></p>. 
</p>
<hr />

<p>
<em>Contributeurs : <a href="http://doc.ubuntu-fr.org/utilisateurs/chmeessen" class="wikilink1" title="utilisateurs:chmeessen">ChMeessen</a>.</em>
</p>

</div>
<div class='secedit editbutton_section editbutton_13'><form class="button btn_secedit" method="post" action="freenx"><div class="no"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="1417112080" /><input type="hidden" name="summary" value="[Installation et configuration du client NoMachine] " /><input type="hidden" name="target" value="section" /><input type="hidden" name="range" value="16200-" /><input type="submit" value="Modifier" class="button" title="Installation et configuration du client NoMachine" /></div></form></div><div class="footnotes">
<div class="fn"><sup><a href="freenx#fnt__1" id="fn__1" class="fn_bot">1)</a></sup> 
<a href="http://linuxfr.org/users/fravashyo/journaux/x2go-le-digne-successeur-de-freenx/" class="urlextern" title="http://linuxfr.org/users/fravashyo/journaux/x2go-le-digne-successeur-de-freenx/"  rel="nofollow">http://linuxfr.org/users/fravashyo/journaux/x2go-le-digne-successeur-de-freenx/</a>|lien d&#039;un article linux-fr</div>
</div>

<!-- cachefile /srv/www/doc.ubuntu-fr.org/htdocs/data/cache/6/6c8e68cf193584a4d3d5f9ed3994bc1e.xhtml used -->

        <br style="clear:both;" />
        <div id="pageinfo">
            <!--  |  | -->
            <!-- ?tpl_pageinfo()? -->
            <br />
            Le contenu de ce wiki est sous licence : <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.fr" rel="license" target="_blank">CC BY-SA v3.0</a>
        </div> 
      </div>

      
      <div id="navigation">

        <ul>
          <li class="menu"><a href="http://www.ubuntu-fr.org" class="title" id="menu-accueil"><span>Accueil</span></a></li>
          <li class="menu" id="active">
            <a href="index.html"  class="title" id="menu-doc"><span>Documentation</span></a>
            <ul>
              <li id="navWiki" class="cat">
                <h2>Actions</h2>
                <ul>
                  <li><a href="http://doc.ubuntu-fr.org/freenx?do=index"  class="action index" accesskey="x" rel="nofollow" title="Plan du site [X]">Plan du site</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/freenx?do=edit&amp;rev=0"  class="action edit" accesskey="e" rel="nofollow" title="Modifier cette page [E]">Modifier cette page</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/freenx?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Anciennes révisions [O]">Anciennes révisions</a></li>
                  <li></li>
                  <li><a href="http://doc.ubuntu-fr.org/freenx?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Derniers changements [R]">Derniers changements</a></li>
                  <li><a href="http://doc.ubuntu-fr.org/freenx?do=backlink"  class="action backlink" rel="nofollow" title="Liens vers cette page">Liens vers cette page</a></li>
                  <li></li>
                  <li></li>
                  <li></li>
                </ul>
              </li>
              <li id="navDivers" class="cat">
                <h2>Divers</h2>
                <ul>
                  <li><bdi><a href="wiki/participer_wiki" class="wikilink1" title="wiki:participer_wiki">Participer à la documentation</a></bdi></li>
                  <li><bdi><a href="documentation_hors_ligne" class="wikilink1" title="documentation_hors_ligne">Documentation hors ligne</a></bdi></li>
                  <li><a href="http://www.ubuntu-fr.org/telechargement" title="T&eacute;l&eacute;charger Ubuntu">T&eacute;l&eacute;charger Ubuntu</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="menu"><a href="http://forum.ubuntu-fr.org"  class="title" id="menu-forum"><span>Forum</span></a></li>
          <li class="menu"><a href="http://planet.ubuntu-fr.org"  class="title" id="menu-planet"><span>Planet</span></a></li>
        </ul>

      </div>
      <div id="references-ufr">
        <ul id="legal-ufr">
          <li><a href="http://www.ubuntu-fr.org/contacts">Contact</a></li>
        </ul>

        <ul id="sponsors-ufr">
          <li><a href="http://www.dokuwiki.org/dokuwiki" id="dokuwiki">Propulsé par Dokuwiki</a></li>
        </ul>
      </div>

    </div>
    <!-- $Id$ -->

    <!-- Piwik Image Tracker -->
    <!-- img src="http://piwik.infra.ubuntu-fr.org/piwik.php?idsite=2&amp;rec=1" style="border:0" alt="" /-->
    <!-- End Piwik -->

  </body>
</html>
